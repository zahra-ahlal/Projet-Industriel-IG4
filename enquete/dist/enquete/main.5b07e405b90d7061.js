"use strict";var wj=Object.defineProperty,Cj=Object.defineProperties,Ij=Object.getOwnPropertyDescriptors,Pk=Object.getOwnPropertySymbols,bj=Object.prototype.hasOwnProperty,Dj=Object.prototype.propertyIsEnumerable,Ok=(Ye,ve,k)=>ve in Ye?wj(Ye,ve,{enumerable:!0,configurable:!0,writable:!0,value:k}):Ye[ve]=k,kk=(Ye,ve)=>{for(var k in ve||(ve={}))bj.call(ve,k)&&Ok(Ye,k,ve[k]);if(Pk)for(var k of Pk(ve))Dj.call(ve,k)&&Ok(Ye,k,ve[k]);return Ye},Fk=(Ye,ve)=>Cj(Ye,Ij(ve));(self.webpackChunkenquete=self.webpackChunkenquete||[]).push([[179],{2011:(Ye,ve,k)=>{k.d(ve,{Dh:()=>oe,GT:()=>ge,cc:()=>xe,hO:()=>Ge,on:()=>G,pX:()=>re,xv:()=>de});var g=k(5e3),ee=k(127),F=k(5813);Ye=k.hmd(Ye);const ue=["ngOnDestroy"],re=(Ie,We,Ze,Te={})=>new Proxy(Ie,{get:(we,Ce)=>Ze.runOutsideAngular(()=>{var Ue;if(Ie[Ce])return(null===(Ue=null==Te?void 0:Te.spy)||void 0===Ue?void 0:Ue.get)&&Te.spy.get(Ce,Ie[Ce]),Ie[Ce];if(ue.indexOf(Ce)>-1)return()=>{};const Be=We.toPromise().then($=>{const Ee=$&&$[Ce];return"function"==typeof Ee?Ee.bind($):Ee&&Ee.then?Ee.then(Z=>Ze.run(()=>Z)):Ze.run(()=>Ee)});return new Proxy(()=>{},{get:($,Ee)=>Be[Ee],apply:($,Ee,Z)=>Be.then(ie=>{var te;const me=ie&&ie(...Z);return(null===(te=null==Te?void 0:Te.spy)||void 0===te?void 0:te.apply)&&Te.spy.apply(Ce,Z,me),me})})})}),ge=(Ie,We)=>{We.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Te=>{Object.defineProperty(Ie.prototype,Te,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Te))})})};class le{constructor(We){return We}}const oe=new g.OlP("angularfire2.app.options"),de=new g.OlP("angularfire2.app.name");function G(Ie,We,Ze){const we="object"==typeof Ze&&Ze||{};we.name=we.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ue=ee.Z.apps.filter(Be=>Be&&Be.name===we.name)[0]||We.runOutsideAngular(()=>ee.Z.initializeApp(Ie,we));try{JSON.stringify(Ie)!==JSON.stringify(Ue.options)&&H("error",`${Ue.name} Firebase App already initialized with different options${Ye.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new le(Ue)}const H=(Ie,...We)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ie](...We)},ne={provide:le,useFactory:G,deps:[oe,g.R0b,[new g.FiY,de]]};let Ge=(()=>{class Ie{constructor(Ze){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",g.q4F.full,Ze.toString())}static initializeApp(Ze,Te){return{ngModule:Ie,providers:[{provide:oe,useValue:Ze},{provide:de,useValue:Te}]}}}return Ie.\u0275fac=function(Ze){return new(Ze||Ie)(g.LFG(g.Lbi))},Ie.\u0275mod=g.oAB({type:Ie}),Ie.\u0275inj=g.cJS({providers:[ne]}),Ie})();function xe(Ie,We,Ze,Te,we){const[,Ce,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ie)||[];if(Ce)return function Pe(Ie,We){try{return Ie.toString()===We.toString()}catch(Ze){return Ie===We}}(we,Ue)||(fe("error",`${We} was already initialized on the ${Ze} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:we,was:Ue})),Ce;{const Be=Te();return globalThis.\u0275AngularfireInstanceCache.push([Ie,Be,we]),Be}}const Ve=!!Ye.hot,fe=(Ie,...We)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ie](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ye,ve,k)=>{k.d(ve,{q4:()=>Gs,iC:()=>mc,HU:()=>Bf,vb:()=>zg,JM:()=>ja});var g=k(5e3),ee=k(5867),F=k(5861),ue=k(9681),re=k(2090),ge=k(4859),le=k(1877),oe=k(8766);const de="@firebase/installations",G="0.5.9",ne=`w:${G}`,Ge="FIS_v2",We=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(b){return b instanceof re.ZR&&b.code.includes("request-failed")}function Te({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function we(b){return{token:b.token,requestStatus:2,expiresIn:ie(b.expiresIn),creationTime:Date.now()}}function Ce(b,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,F.Z)(function*(b,D){const V=(yield D.json()).error;return We.create("request-failed",{requestName:b,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Be({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function $(b,{refreshToken:D}){const R=Be(b);return R.append("Authorization",function te(b){return`${Ge} ${b}`}(D)),R}function Ee(b){return Z.apply(this,arguments)}function Z(){return(Z=(0,F.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function ie(b){return Number(b.replace("s","000"))}function me(b,D){return ae.apply(this,arguments)}function ae(){return(ae=(0,F.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:R}){const V=Te(b),J=Be(b),se=D.getImmediate({optional:!0});if(se){const yt=yield se.getHeartbeatsHeader();yt&&J.append("x-firebase-client",yt)}const et={method:"POST",headers:J,body:JSON.stringify({fid:R,authVersion:Ge,appId:b.appId,sdkVersion:ne})},tt=yield Ee(()=>fetch(V,et));if(tt.ok){const yt=yield tt.json();return{fid:yt.fid||R,registrationStatus:2,refreshToken:yt.refreshToken,authToken:we(yt.authToken)}}throw yield Ce("Create Installation",tt)})).apply(this,arguments)}function Oe(b){return new Promise(D=>{setTimeout(D,b)})}const Bt=/^[cdef][\w-]{21}$/;function Ke(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const R=function en(b){return function ut(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Bt.test(R)?R:""}catch(b){return""}}function In(b){return`${b.appName}!${b.appId}`}const tn=new Map;function Zt(b,D){const R=In(b);Ot(R,D),function qi(b,D){const R=function gr(){return!ci&&"BroadcastChannel"in self&&(ci=new BroadcastChannel("[Firebase] FID Change"),ci.onmessage=b=>{Ot(b.data.key,b.data.fid)}),ci}();R&&R.postMessage({key:b,fid:D}),function Sr(){0===tn.size&&ci&&(ci.close(),ci=null)}()}(R,D)}function Ot(b,D){const R=tn.get(b);if(R)for(const V of R)V(D)}let ci=null;const $r="firebase-installations-store";let Ki=null;function pt(){return Ki||(Ki=(0,oe.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore($r)}})),Ki}function di(b,D){return vn.apply(this,arguments)}function vn(){return(vn=(0,F.Z)(function*(b,D){const R=In(b),J=(yield pt()).transaction($r,"readwrite"),se=J.objectStore($r),Ne=yield se.get(R);return yield se.put(D,R),yield J.done,(!Ne||Ne.fid!==D.fid)&&Zt(b,D.fid),D})).apply(this,arguments)}function bn(b){return Os.apply(this,arguments)}function Os(){return(Os=(0,F.Z)(function*(b){const D=In(b),V=(yield pt()).transaction($r,"readwrite");yield V.objectStore($r).delete(D),yield V.done})).apply(this,arguments)}function Gr(b,D){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,F.Z)(function*(b,D){const R=In(b),J=(yield pt()).transaction($r,"readwrite"),se=J.objectStore($r),Ne=yield se.get(R),et=D(Ne);return void 0===et?yield se.delete(R):yield se.put(et,R),yield J.done,et&&(!Ne||Ne.fid!==et.fid)&&Zt(b,et.fid),et})).apply(this,arguments)}function Dn(b){return hi.apply(this,arguments)}function hi(){return(hi=(0,F.Z)(function*(b){let D;const R=yield Gr(b.appConfig,V=>{const J=ao(V),se=jt(b,J);return D=se.registrationPromise,se.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function ao(b){return uo(b||{fid:Ke(),registrationStatus:0})}function jt(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(We.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function ot(b,D){return _t.apply(this,arguments)}(b,R);return{installationEntry:R,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:mr(b)}:{installationEntry:D}}function _t(){return(_t=(0,F.Z)(function*(b,D){try{const R=yield me(b,D);return di(b.appConfig,R)}catch(R){throw Ze(R)&&409===R.customData.serverCode?yield bn(b.appConfig):yield di(b.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function mr(b){return fi.apply(this,arguments)}function fi(){return(fi=(0,F.Z)(function*(b){let D=yield Ft(b.appConfig);for(;1===D.registrationStatus;)yield Oe(100),D=yield Ft(b.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:V}=yield Dn(b);return V||R}return D})).apply(this,arguments)}function Ft(b){return Gr(b,D=>{if(!D)throw We.create("installation-not-found");return uo(D)})}function uo(b){return function _r(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function yr(b,D){return U.apply(this,arguments)}function U(){return(U=(0,F.Z)(function*({appConfig:b,heartbeatServiceProvider:D},R){const V=q(b,R),J=$(b,R),se=D.getImmediate({optional:!0});if(se){const yt=yield se.getHeartbeatsHeader();yt&&J.append("x-firebase-client",yt)}const et={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:ne,appId:b.appId}})},tt=yield Ee(()=>fetch(V,et));if(tt.ok)return we(yield tt.json());throw yield Ce("Generate Auth Token",tt)})).apply(this,arguments)}function q(b,{fid:D}){return`${Te(b)}/${D}/authTokens:generate`}function z(b){return be.apply(this,arguments)}function be(){return(be=(0,F.Z)(function*(b,D=!1){let R;const V=yield Gr(b.appConfig,se=>{if(!Et(se))throw We.create("not-registered");const Ne=se.authToken;if(!D&&ln(Ne))return se;if(1===Ne.requestStatus)return R=W(b,D),se;{if(!navigator.onLine)throw We.create("app-offline");const et=Ln(se);return R=Qe(b,et),et}});return R?yield R:V.authToken})).apply(this,arguments)}function W(b,D){return X.apply(this,arguments)}function X(){return(X=(0,F.Z)(function*(b,D){let R=yield Me(b.appConfig);for(;1===R.authToken.requestStatus;)yield Oe(100),R=yield Me(b.appConfig);const V=R.authToken;return 0===V.requestStatus?z(b,D):V})).apply(this,arguments)}function Me(b){return Gr(b,D=>{if(!Et(D))throw We.create("not-registered");return function xr(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Qe(b,D){return dt.apply(this,arguments)}function dt(){return(dt=(0,F.Z)(function*(b,D){try{const R=yield yr(b,D),V=Object.assign(Object.assign({},D),{authToken:R});return yield di(b.appConfig,V),R}catch(R){if(!Ze(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield di(b.appConfig,V)}else yield bn(b.appConfig);throw R}})).apply(this,arguments)}function Et(b){return void 0!==b&&2===b.registrationStatus}function ln(b){return 2===b.requestStatus&&!function vt(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function Ln(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function Ca(){return(Ca=(0,F.Z)(function*(b){const D=b,{installationEntry:R,registrationPromise:V}=yield Dn(D);return V?V.catch(console.error):z(D).catch(console.error),R.fid})).apply(this,arguments)}function Ia(){return(Ia=(0,F.Z)(function*(b,D=!1){const R=b;return yield Vn(R),(yield z(R,D)).token})).apply(this,arguments)}function Vn(b){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,F.Z)(function*(b){const{registrationPromise:D}=yield Dn(b);D&&(yield D)})).apply(this,arguments)}function Lo(b){return We.create("missing-app-config-values",{valueName:b})}const qr="installations",at=b=>{const D=b.getProvider("app").getImmediate(),R=function ir(b){if(!b||!b.options)throw Lo("App Configuration");if(!b.name)throw Lo("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!b.options[R])throw Lo(R);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,ue._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},nn=b=>{const D=b.getProvider("app").getImmediate(),R=(0,ue._getProvider)(D,qr).getImmediate();return{getId:()=>function Tu(b){return Ca.apply(this,arguments)}(R),getToken:J=>function Au(b){return Ia.apply(this,arguments)}(R,J)}};(function zr(){(0,ue._registerComponent)(new ge.wA(qr,at,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("installations-internal",nn,"PRIVATE"))})(),(0,ue.registerVersion)(de,G),(0,ue.registerVersion)(de,G,"esm2017");const Zi="@firebase/remote-config",Tn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Pg{constructor(D,R,V,J){this.client=D,this.storage=R,this.storageCache=V,this.logger=J}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-R,J=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var R=this;return(0,F.Z)(function*(){const[V,J]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(J&&R.isCachedDataFresh(D.cacheMaxAgeMillis,V))return J;D.eTag=J&&J.eTag;const se=yield R.client.fetch(D),Ne=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Ne.push(R.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Ne),se})()}}function vd(b=navigator){return b.languages&&b.languages[0]||b.language}class vr{constructor(D,R,V,J,se,Ne){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=V,this.projectId=J,this.apiKey=se,this.appId=Ne}fetch(D){var R=this;return(0,F.Z)(function*(){const[V,J]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},tt={sdk_version:R.sdkVersion,app_instance_id:V,app_instance_id_token:J,app_id:R.appId,language_code:vd()},yt={method:"POST",headers:et,body:JSON.stringify(tt)},Ht=fetch(Ne,yt),wt=new Promise((er,Xr)=>{D.signal.addEventListener(()=>{const ta=new Error("The operation was aborted.");ta.name="AbortError",Xr(ta)})});let Sn;try{yield Promise.race([Ht,wt]),Sn=yield Ht}catch(er){let Xr="fetch-client-network";throw"AbortError"===er.name&&(Xr="fetch-timeout"),Tn.create(Xr,{originalErrorMessage:er.message})}let ur=Sn.status;const zs=Sn.headers.get("ETag")||void 0;let us,Jr;if(200===Sn.status){let er;try{er=yield Sn.json()}catch(Xr){throw Tn.create("fetch-client-parse",{originalErrorMessage:Xr.message})}us=er.entries,Jr=er.state}if("INSTANCE_STATE_UNSPECIFIED"===Jr?ur=500:"NO_CHANGE"===Jr?ur=304:("NO_TEMPLATE"===Jr||"EMPTY_CONFIG"===Jr)&&(us={}),304!==ur&&200!==ur)throw Tn.create("fetch-status",{httpStatus:ur});return{status:ur,eTag:zs,config:us}})()}}class Og{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,F.Z)(function*(){const V=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:V}){var J=this;return(0,F.Z)(function*(){yield function Us(b,D){return new Promise((R,V)=>{const J=Math.max(D-Date.now(),0),se=setTimeout(R,J);b.addEventListener(()=>{clearTimeout(se),V(Tn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const se=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),se}catch(se){if(!function Ed(b){if(!(b instanceof re.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(se))throw se;const Ne={throttleEndTimeMillis:Date.now()+(0,re.$s)(V),backoffCount:V+1};return yield J.storage.setThrottleMetadata(Ne),J.attemptFetch(D,Ne)}})()}}class wd{constructor(D,R,V,J,se){this.app=D,this._client=R,this._storageCache=V,this._storage=J,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hl(b,D){const R=b.target.error||void 0;return Tn.create(D,{originalErrorMessage:R&&R.message})}const ms="app_namespace_store";class Vg{constructor(D,R,V,J=function Lg(){return new Promise((b,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=V=>{D(Hl(V,"storage-open"))},R.onsuccess=V=>{b(V.target.result)},R.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(ms,{keyPath:"compositeKey"})}}catch(R){D(Tn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=D,this.appName=R,this.namespace=V,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,F.Z)(function*(){const V=yield R.openDbPromise;return new Promise((J,se)=>{const et=V.transaction([ms],"readonly").objectStore(ms),tt=R.createCompositeKey(D);try{const yt=et.get(tt);yt.onerror=Ht=>{se(Hl(Ht,"storage-get"))},yt.onsuccess=Ht=>{const wt=Ht.target.result;J(wt?wt.value:void 0)}}catch(yt){se(Tn.create("storage-get",{originalErrorMessage:yt&&yt.message}))}})})()}set(D,R){var V=this;return(0,F.Z)(function*(){const J=yield V.openDbPromise;return new Promise((se,Ne)=>{const tt=J.transaction([ms],"readwrite").objectStore(ms),yt=V.createCompositeKey(D);try{const Ht=tt.put({compositeKey:yt,value:R});Ht.onerror=wt=>{Ne(Hl(wt,"storage-set"))},Ht.onsuccess=()=>{se()}}catch(Ht){Ne(Tn.create("storage-set",{originalErrorMessage:Ht&&Ht.message}))}})})()}delete(D){var R=this;return(0,F.Z)(function*(){const V=yield R.openDbPromise;return new Promise((J,se)=>{const et=V.transaction([ms],"readwrite").objectStore(ms),tt=R.createCompositeKey(D);try{const yt=et.delete(tt);yt.onerror=Ht=>{se(Hl(Ht,"storage-delete"))},yt.onsuccess=()=>{J()}}catch(yt){se(Tn.create("storage-delete",{originalErrorMessage:yt&&yt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Id{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const R=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),se=yield R;se&&(D.lastFetchStatus=se);const Ne=yield V;Ne&&(D.lastSuccessfulFetchTimestampMillis=Ne);const et=yield J;et&&(D.activeConfig=et)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Ru(){return bd.apply(this,arguments)}function bd(){return(bd=(0,F.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Vo(){(0,ue._registerComponent)(new ge.wA("remote-config",function b(D,{instanceIdentifier:R}){const V=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Tn.create("registration-window");if(!(0,re.hl)())throw Tn.create("indexed-db-unavailable");const{projectId:se,apiKey:Ne,appId:et}=V.options;if(!se)throw Tn.create("registration-project-id");if(!Ne)throw Tn.create("registration-api-key");if(!et)throw Tn.create("registration-app-id");const tt=new Vg(et,V.name,R=R||"firebase"),yt=new Id(tt),Ht=new le.Yd(Zi);Ht.logLevel=le.in.ERROR;const wt=new vr(J,ue.SDK_VERSION,R,se,Ne,et),Sn=new Og(wt,tt),ur=new Pg(Sn,tt,yt,Ht),zs=new wd(V,ur,yt,tt,Ht);return function rn(b){const D=(0,re.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(zs),zs},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Zi,"0.3.8"),(0,ue.registerVersion)(Zi,"0.3.8","esm2017")}();const Dd="/firebase-messaging-sw.js",Er="/firebase-cloud-messaging-push-scope",ho="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Uo="google.c.a.c_id",Td="google.c.a.c_l",Mf="google.c.a.ts",$l="google.c.a.e";var Bo=(()=>{return(b=Bo||(Bo={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Bo;var b})();function Rr(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ad(b){const R=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(R),J=new Uint8Array(V.length);for(let se=0;se<V.length;++se)J[se]=V.charCodeAt(se);return J}const Nr="fcm_token_details_db",pi="fcm_token_object_Store";function Gl(b){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,F.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(Nr))return null;let D=null;return(yield(0,oe.X3)(Nr,5,{upgrade:(V=(0,F.Z)(function*(J,se,Ne,et){var tt;if(se<2||!J.objectStoreNames.contains(pi))return;const yt=et.objectStore(pi),Ht=yield yt.index("fcmSenderId").get(b);if(yield yt.clear(),Ht)if(2===se){const wt=Ht;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;D={token:wt.fcmToken,createTime:null!==(tt=wt.createTime)&&void 0!==tt?tt:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:Rr(wt.vapidKey)}}}else if(3===se){const wt=Ht;D={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Rr(wt.auth),p256dh:Rr(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Rr(wt.vapidKey)}}}else if(4===se){const wt=Ht;D={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Rr(wt.auth),p256dh:Rr(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Rr(wt.vapidKey)}}}}),function(se,Ne,et,tt){return V.apply(this,arguments)})})).close(),yield(0,oe.Lj)(Nr),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),Wl(D)?D:null;var V}),Sd.apply(this,arguments)}function Wl(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ts="firebase-messaging-store";let Rf=null;function sn(){return Rf||(Rf=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(ts)}})),Rf}function Sa(b){return po.apply(this,arguments)}function po(){return(po=(0,F.Z)(function*(b){const D=or(b),V=yield(yield sn()).transaction(ts).objectStore(ts).get(D);if(V)return V;{const J=yield Gl(b.appConfig.senderId);if(J)return yield Qt(b,J),J}})).apply(this,arguments)}function Qt(b,D){return xa.apply(this,arguments)}function xa(){return(xa=(0,F.Z)(function*(b,D){const R=or(b),J=(yield sn()).transaction(ts,"readwrite");return yield J.objectStore(ts).put(D,R),yield J.done,D})).apply(this,arguments)}function Nu(b){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,F.Z)(function*(b){const D=or(b),V=(yield sn()).transaction(ts,"readwrite");yield V.objectStore(ts).delete(D),yield V.done})).apply(this,arguments)}function or({appConfig:b}){return b.appId}const _n=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ns(b,D){return ar.apply(this,arguments)}function ar(){return(ar=(0,F.Z)(function*(b,D){const R=yield $o(b),V=js(D),J={method:"POST",headers:R,body:JSON.stringify(V)};let se;try{se=yield(yield fetch(rs(b.appConfig),J)).json()}catch(Ne){throw _n.create("token-subscribe-failed",{errorInfo:Ne})}if(se.error)throw _n.create("token-subscribe-failed",{errorInfo:se.error.message});if(!se.token)throw _n.create("token-subscribe-no-token");return se.token})).apply(this,arguments)}function go(b,D){return _s.apply(this,arguments)}function _s(){return(_s=(0,F.Z)(function*(b,D){const R=yield $o(b),V=js(D.subscriptionOptions),J={method:"PATCH",headers:R,body:JSON.stringify(V)};let se;try{se=yield(yield fetch(`${rs(b.appConfig)}/${D.token}`,J)).json()}catch(Ne){throw _n.create("token-update-failed",{errorInfo:Ne})}if(se.error)throw _n.create("token-update-failed",{errorInfo:se.error.message});if(!se.token)throw _n.create("token-update-no-token");return se.token})).apply(this,arguments)}function Ma(b,D){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,F.Z)(function*(b,D){const V={method:"DELETE",headers:yield $o(b)};try{const se=yield(yield fetch(`${rs(b.appConfig)}/${D}`,V)).json();if(se.error)throw _n.create("token-unsubscribe-failed",{errorInfo:se.error.message})}catch(J){throw _n.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function rs({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function $o(b){return gt.apply(this,arguments)}function gt(){return(gt=(0,F.Z)(function*({appConfig:b,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function js({p256dh:b,auth:D,endpoint:R,vapidKey:V}){const J={web:{endpoint:R,auth:D,p256dh:b}};return V!==ho&&(J.web.applicationPubKey=V),J}const Kl=6048e5;function Ra(b){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,F.Z)(function*(b){const D=yield Wo(b.swRegistration,b.vapidKey),R={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:Rr(D.getKey("auth")),p256dh:Rr(D.getKey("p256dh"))},V=yield Sa(b.firebaseDependencies);if(V){if(ku(V.subscriptionOptions,R))return Date.now()>=V.createTime+Kl?Yl(b,{token:V.token,createTime:Date.now(),subscriptionOptions:R}):V.token;try{yield Ma(b.firebaseDependencies,V.token)}catch(J){console.warn(J)}return Ae(b.firebaseDependencies,R)}return Ae(b.firebaseDependencies,R)})).apply(this,arguments)}function Pu(b){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,F.Z)(function*(b){const D=yield Sa(b.firebaseDependencies);D&&(yield Ma(b.firebaseDependencies,D.token),yield Nu(b.firebaseDependencies));const R=yield b.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Yl(b,D){return Go.apply(this,arguments)}function Go(){return(Go=(0,F.Z)(function*(b,D){try{const R=yield go(b.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield Qt(b.firebaseDependencies,V),R}catch(R){throw yield Pu(b),R}})).apply(this,arguments)}function Ae(b,D){return kt.apply(this,arguments)}function kt(){return(kt=(0,F.Z)(function*(b,D){const V={token:yield ns(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Qt(b,V),V.token})).apply(this,arguments)}function Wo(b,D){return hn.apply(this,arguments)}function hn(){return(hn=(0,F.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ad(D)})})).apply(this,arguments)}function ku(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function mo(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function gi(b,D){if(!D.notification)return;b.notification={};const R=D.notification.title;R&&(b.notification.title=R);const V=D.notification.body;V&&(b.notification.body=V);const J=D.notification.image;J&&(b.notification.image=J)}(D,b),function Ql(b,D){!D.data||(b.data=D.data)}(D,b),function Jl(b,D){if(!D.fcmOptions)return;b.fcmOptions={};const R=D.fcmOptions.link;R&&(b.fcmOptions.link=R);const V=D.fcmOptions.analytics_label;V&&(b.fcmOptions.analyticsLabel=V)}(D,b),D}function Xl(b){return"object"==typeof b&&!!b&&Uo in b}function xd(b,D){const R=[];for(let V=0;V<b.length;V++)R.push(b.charAt(V)),V<D.length&&R.push(D.charAt(V));return R.join("")}function ys(b){return _n.create("missing-app-config-values",{valueName:b})}xd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wr{constructor(D,R,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Ug(b){if(!b||!b.options)throw ys("App Configuration Object");if(!b.name)throw ys("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=b;for(const V of D)if(!R[V])throw ys(V);return{appName:b.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:R,analyticsProvider:V}}_delete(){return Promise.resolve()}}function mi(b){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,F.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Dd,{scope:Er}),b.swRegistration.update().catch(()=>{})}catch(D){throw _n.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Hs(b,D){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,F.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield mi(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw _n.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function ec(b,D){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,F.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=ho)})).apply(this,arguments)}function tc(){return(tc=(0,F.Z)(function*(b,D){if(!navigator)throw _n.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _n.create("permission-blocked");return yield ec(b,null==D?void 0:D.vapidKey),yield Hs(b,null==D?void 0:D.serviceWorkerRegistration),Ra(b)})).apply(this,arguments)}function Na(b,D,R){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,F.Z)(function*(b,D,R){const V=Bu(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:R[Uo],message_name:R[Td],message_time:R[Mf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bu(b){switch(b){case Bo.NOTIFICATION_CLICKED:return"notification_open";case Bo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Rd(){return(Rd=(0,F.Z)(function*(b,D){const R=D.data;if(!R.isFirebaseMessaging)return;b.onMessageHandler&&R.messageType===Bo.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(mo(R)):b.onMessageHandler.next(mo(R)));const V=R.data;Xl(V)&&"1"===V[$l]&&(yield Na(b,R.messageType,V))})).apply(this,arguments)}const ju="@firebase/messaging",Nd=b=>{const D=new wr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Md(b,D){return Rd.apply(this,arguments)}(D,R)),D},qo=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:V=>function Vu(b,D){return tc.apply(this,arguments)}(D,V)}};function Hu(){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,F.Z)(function*(){try{yield(0,re.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pd(){(0,ue._registerComponent)(new ge.wA("messaging",Nd,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("messaging-internal",qo,"PRIVATE")),(0,ue.registerVersion)(ju,"0.9.13"),(0,ue.registerVersion)(ju,"0.9.13","esm2017")}();const Od="analytics",Bg="firebase_id",vs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vo="https://www.googletagmanager.com/gtag/js",jn=new le.Yd("@firebase/analytics");function kd(b){return Promise.all(b.map(D=>D.catch(R=>R)))}function jg(b,D){const R=document.createElement("script");R.src=`${vo}?l=${b}&id=${D}`,R.async=!0,document.head.appendChild(R)}function zo(b,D,R,V,J,se){return $u.apply(this,arguments)}function $u(){return($u=(0,F.Z)(function*(b,D,R,V,J,se){const Ne=V[J];try{if(Ne)yield D[Ne];else{const tt=(yield kd(R)).find(yt=>yt.measurementId===J);tt&&(yield D[tt.appId])}}catch(et){jn.error(et)}b("config",J,se)})).apply(this,arguments)}function Hg(b,D,R,V,J){return Es.apply(this,arguments)}function Es(){return(Es=(0,F.Z)(function*(b,D,R,V,J){try{let se=[];if(J&&J.send_to){let Ne=J.send_to;Array.isArray(Ne)||(Ne=[Ne]);const et=yield kd(R);for(const tt of Ne){const yt=et.find(wt=>wt.measurementId===tt),Ht=yt&&D[yt.appId];if(!Ht){se=[];break}se.push(Ht)}}0===se.length&&(se=Object.values(D)),yield Promise.all(se),b("event",V,J||{})}catch(se){jn.error(se)}})).apply(this,arguments)}function yn(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(vo))return D;return null}const Ni=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ko=new class is{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Fd(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function ss(b){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,F.Z)(function*(b){var D;const{appId:R,apiKey:V}=b,J={method:"GET",headers:Fd(V)},se=vs.replace("{app-id}",R),Ne=yield fetch(se,J);if(200!==Ne.status&&304!==Ne.status){let et="";try{const tt=yield Ne.json();(null===(D=tt.error)||void 0===D?void 0:D.message)&&(et=tt.error.message)}catch(tt){}throw Ni.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:et})}return Ne.json()})).apply(this,arguments)}function Lt(b){return ht.apply(this,arguments)}function ht(){return(ht=(0,F.Z)(function*(b,D=Ko,R){const{appId:V,apiKey:J,measurementId:se}=b.options;if(!V)throw Ni.create("no-app-id");if(!J){if(se)return{measurementId:se,appId:V};throw Ni.create("no-api-key")}const Ne=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new Ld;return setTimeout((0,F.Z)(function*(){et.abort()}),void 0!==R?R:6e4),Zo({appId:V,apiKey:J,measurementId:se},Ne,et,D)})).apply(this,arguments)}function Zo(b,D,R){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,F.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:R},V,J=Ko){const{appId:se,measurementId:Ne}=b;try{yield rc(V,D)}catch(et){if(Ne)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:se,measurementId:Ne};throw et}try{const et=yield ss(b);return J.deleteThrottleMetadata(se),et}catch(et){if(!ic(et)){if(J.deleteThrottleMetadata(se),Ne)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:se,measurementId:Ne};throw et}const tt=503===Number(et.customData.httpStatus)?(0,re.$s)(R,J.intervalMillis,30):(0,re.$s)(R,J.intervalMillis),yt={throttleEndTimeMillis:Date.now()+tt,backoffCount:R+1};return J.setThrottleMetadata(se,yt),jn.debug(`Calling attemptFetch again in ${tt} millis`),Zo(b,yt,V,J)}})).apply(this,arguments)}function rc(b,D){return new Promise((R,V)=>{const J=Math.max(D-Date.now(),0),se=setTimeout(R,J);b.addEventListener(()=>{clearTimeout(se),V(Ni.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function ic(b){if(!(b instanceof re.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ld{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function sc(){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,F.Z)(function*(){if(!(0,re.hl)())return jn.warn(Ni.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(b){return jn.warn(Ni.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Qo(){return(Qo=(0,F.Z)(function*(b,D,R,V,J,se,Ne){var et;const tt=Lt(b);tt.then(ur=>{R[ur.measurementId]=ur.appId,b.options.measurementId&&ur.measurementId!==b.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${ur.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ur=>jn.error(ur)),D.push(tt);const yt=sc().then(ur=>{if(ur)return V.getId()}),[Ht,wt]=yield Promise.all([tt,yt]);yn()||jg(se,Ht.measurementId),J("js",new Date);const Sn=null!==(et=null==Ne?void 0:Ne.config)&&void 0!==et?et:{};return Sn.origin="firebase",Sn.update=!0,null!=wt&&(Sn[Bg]=wt),J("config",Ht.measurementId,Sn),Ht.measurementId})).apply(this,arguments)}class $s{constructor(D){this.app=D}_delete(){return delete Cr[this.app.options.appId],Promise.resolve()}}let Cr={},Oa=[];const Wu={};let qu,fn,Pi="dataLayer",Oi=!1;function ka(b,D,R){!function oc(){const b=[];if((0,re.ru)()&&b.push("This is a browser extension environment."),(0,re.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((V,J)=>`(${J+1}) ${V}`).join(" "),R=Ni.create("invalid-analytics-context",{errorInfo:D});jn.warn(R.message)}}();const V=b.options.appId;if(!V)throw Ni.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Ni.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cr[V])throw Ni.create("already-exists",{id:V});if(!Oi){!function Eo(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(Pi);const{wrappedGtag:se,gtagCore:Ne}=function $g(b,D,R,V,J){let se=function(...Ne){window[V].push(arguments)};return window[J]&&"function"==typeof window[J]&&(se=window[J]),window[J]=function Gu(b,D,R,V){function se(){return(se=(0,F.Z)(function*(Ne,et,tt){try{"event"===Ne?yield Hg(b,D,R,et,tt):"config"===Ne?yield zo(b,D,R,V,et,tt):b("set",et)}catch(yt){jn.error(yt)}})).apply(this,arguments)}return function J(Ne,et,tt){return se.apply(this,arguments)}}(se,b,D,R),{gtagCore:se,wrappedGtag:window[J]}}(Cr,Oa,Wu,Pi,"gtag");fn=se,qu=Ne,Oi=!0}return Cr[V]=function Jn(b,D,R,V,J,se,Ne){return Qo.apply(this,arguments)}(b,Oa,Wu,D,qu,Pi,R),new $s(b)}function Fa(){return(Fa=(0,F.Z)(function*(b,D,R,V,J){if(J&&J.global)b("event",R,V);else{const se=yield D;b("event",R,Object.assign(Object.assign({},V),{send_to:se}))}})).apply(this,arguments)}function Xo(){return uc.apply(this,arguments)}function uc(){return(uc=(0,F.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(b){return!1}})).apply(this,arguments)}const Vd="@firebase/analytics";!function Ud(){(0,ue._registerComponent)(new ge.wA(Od,(D,{options:R})=>ka(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ue._registerComponent)(new ge.wA("analytics-internal",function b(D){try{const R=D.getProvider(Od).getImmediate();return{logEvent:(V,J,se)=>function Lf(b,D,R,V){b=(0,re.m9)(b),function Co(b,D,R,V,J){return Fa.apply(this,arguments)}(fn,Cr[b.app.options.appId],D,R,V).catch(J=>jn.error(J))}(R,V,J,se)}}catch(R){throw Ni.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ue.registerVersion)(Vd,"0.7.9"),(0,ue.registerVersion)(Vd,"0.7.9","esm2017")}();var dc=k(4408),hc=k(7565);const vi=new class An extends hc.v{}(class ea extends dc.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,R,V):D.flush(this)}});var fc=k(4986),Wg=k(8505),Yr=k(9468),Xn=k(5363);const Gs=new g.GfV("7.3.0"),Ws="__angularfire_symbol__analyticsIsSupportedValue",Ei="__angularfire_symbol__analyticsIsSupported",qs="__angularfire_symbol__remoteConfigIsSupportedValue",ki="__angularfire_symbol__remoteConfigIsSupported",Ba="__angularfire_symbol__messagingIsSupportedValue",Vf="__angularfire_symbol__messagingIsSupported";function ja(b,D,R){if(D){if(1===D.length)return D[0];const se=D.filter(Ne=>Ne.app===R);if(1===se.length)return se[0]}return R.container.getProvider(b).getImmediate({optional:!0})}globalThis[Ei]||(globalThis[Ei]=Xo().then(b=>globalThis[Ws]=b).catch(()=>globalThis[Ws]=!1)),globalThis[Vf]||(globalThis[Vf]=Hu().then(b=>globalThis[Ba]=b).catch(()=>globalThis[Ba]=!1)),globalThis[ki]||(globalThis[ki]=Ru().then(b=>globalThis[qs]=b).catch(()=>globalThis[qs]=!1));const zg=(b,D)=>{const R=D?[D]:(0,ee.C6)(),V=[];return R.forEach(J=>{J.container.getProvider(b).instances.forEach(Ne=>{V.includes(Ne)||V.push(Ne)})}),V};function os(){}class jd{constructor(D,R=vi){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,V){const J=this.zone;return this.delegate.schedule(function(Ne){J.runGuarded(()=>{D.apply(this,[Ne])})},R,V)}}class pc{constructor(D){this.zone=D,this.task=null}call(D,R){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",os,{},os,os)),R.pipe((0,Wg.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Bf=(()=>{class b{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new jd(Zone.current)),this.insideAngular=R.run(()=>new jd(Zone.current,fc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(R){return new(R||b)(g.LFG(g.R0b))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function wi(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function mc(b){return wi(),function as(b){return function(R){return(R=R.lift(new pc(b.ngZone))).pipe((0,Yr.R)(b.outsideAngular),(0,Xn.Q)(b.insideAngular))}}(wi())(b)}},2090:(Ye,ve,k)=>{k.d(ve,{$s:()=>Ft,BH:()=>Ge,DV:()=>Wt,Dv:()=>Os,G6:()=>Be,GJ:()=>Zt,L:()=>oe,LL:()=>ae,Mn:()=>Ce,Pz:()=>Pt,Sg:()=>xe,UG:()=>fe,UI:()=>qi,US:()=>ge,Wj:()=>Dn,Yr:()=>Ue,ZB:()=>H,ZR:()=>me,b$:()=>Ze,cI:()=>Bt,d:()=>Te,dS:()=>ao,eu:()=>Ee,g5:()=>F,gK:()=>Gr,gQ:()=>$r,h$:()=>le,hl:()=>$,hu:()=>ee,jU:()=>Ie,lb:()=>hi,m9:()=>yr,ne:()=>Ki,p$:()=>G,pd:()=>Ps,r3:()=>Ar,ru:()=>We,tV:()=>de,uI:()=>Ve,ug:()=>jt,vZ:()=>ci,w1:()=>we,w9:()=>tn,xO:()=>Sr,xb:()=>Ot,z$:()=>Pe,zI:()=>Z,zd:()=>zi});const ee=function(U,q){if(!U)throw F(q)},F=function(U){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+U)},ue=function(U){const q=[];let z=0;for(let be=0;be<U.length;be++){let W=U.charCodeAt(be);W<128?q[z++]=W:W<2048?(q[z++]=W>>6|192,q[z++]=63&W|128):55296==(64512&W)&&be+1<U.length&&56320==(64512&U.charCodeAt(be+1))?(W=65536+((1023&W)<<10)+(1023&U.charCodeAt(++be)),q[z++]=W>>18|240,q[z++]=W>>12&63|128,q[z++]=W>>6&63|128,q[z++]=63&W|128):(q[z++]=W>>12|224,q[z++]=W>>6&63|128,q[z++]=63&W|128)}return q},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,q){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,be=[];for(let W=0;W<U.length;W+=3){const X=U[W],Me=W+1<U.length,Qe=Me?U[W+1]:0,dt=W+2<U.length,Et=dt?U[W+2]:0;let Ln=(15&Qe)<<2|Et>>6,xr=63&Et;dt||(xr=64,Me||(Ln=64)),be.push(z[X>>2],z[(3&X)<<4|Qe>>4],z[Ln],z[xr])}return be.join("")},encodeString(U,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(U):this.encodeByteArray(ue(U),q)},decodeString(U,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(U):function(U){const q=[];let z=0,be=0;for(;z<U.length;){const W=U[z++];if(W<128)q[be++]=String.fromCharCode(W);else if(W>191&&W<224){const X=U[z++];q[be++]=String.fromCharCode((31&W)<<6|63&X)}else if(W>239&&W<365){const dt=((7&W)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;q[be++]=String.fromCharCode(55296+(dt>>10)),q[be++]=String.fromCharCode(56320+(1023&dt))}else{const X=U[z++],Me=U[z++];q[be++]=String.fromCharCode((15&W)<<12|(63&X)<<6|63&Me)}}return q.join("")}(this.decodeStringToByteArray(U,q))},decodeStringToByteArray(U,q){this.init_();const z=q?this.charToByteMapWebSafe_:this.charToByteMap_,be=[];for(let W=0;W<U.length;){const X=z[U.charAt(W++)],Qe=W<U.length?z[U.charAt(W)]:0;++W;const Et=W<U.length?z[U.charAt(W)]:64;++W;const vt=W<U.length?z[U.charAt(W)]:64;if(++W,null==X||null==Qe||null==Et||null==vt)throw Error();be.push(X<<2|Qe>>4),64!==Et&&(be.push(Qe<<4&240|Et>>2),64!==vt&&be.push(Et<<6&192|vt))}return be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},le=function(U){const q=ue(U);return ge.encodeByteArray(q,!0)},oe=function(U){return le(U).replace(/\./g,"")},de=function(U){try{return ge.decodeString(U,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function G(U){return H(void 0,U)}function H(U,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return q}for(const z in q)!q.hasOwnProperty(z)||!ne(z)||(U[z]=H(U[z],q[z]));return U}function ne(U){return"__proto__"!==U}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,z)=>{this.resolve=q,this.reject=z})}wrapCallback(q){return(z,be)=>{z?this.reject(z):this.resolve(be),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(z):q(z,be))}}}function xe(U,q){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const be=q||"demo-project",W=U.iat||0,X=U.sub||U.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${be}`,aud:be,iat:W,exp:W+3600,auth_time:W,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},U);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(Me)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Ie(){return"object"==typeof self&&self.self===self}function We(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return Pe().indexOf("Electron/")>=0}function we(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ce(){return Pe().indexOf("MSAppHost/")>=0}function Ue(){return!1}function Be(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function Ee(){return new Promise((U,q)=>{try{let z=!0;const be="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(be);W.onsuccess=()=>{W.result.close(),z||self.indexedDB.deleteDatabase(be),U(!0)},W.onupgradeneeded=()=>{z=!1},W.onerror=()=>{var X;q((null===(X=W.error)||void 0===X?void 0:X.message)||"")}}catch(z){q(z)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(q,z,be){super(z),this.code=q,this.customData=be,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(q,z,be){this.service=q,this.serviceName=z,this.errors=be}create(q,...z){const be=z[0]||{},W=`${this.service}/${q}`,X=this.errors[q],Me=X?function Oe(U,q){return U.replace(ut,(z,be)=>{const W=q[be];return null!=W?String(W):`<${be}?>`})}(X,be):"Error";return new me(W,`${this.serviceName}: ${Me} (${W}).`,be)}}const ut=/\{\$([^}]+)}/g;function Bt(U){return JSON.parse(U)}function Pt(U){return JSON.stringify(U)}const Ke=function(U){let q={},z={},be={},W="";try{const X=U.split(".");q=Bt(de(X[0])||""),z=Bt(de(X[1])||""),W=X[2],be=z.d||{},delete z.d}catch(X){}return{header:q,claims:z,data:be,signature:W}},tn=function(U){const z=Ke(U).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},Zt=function(U){const q=Ke(U).claims;return"object"==typeof q&&!0===q.admin};function Ar(U,q){return Object.prototype.hasOwnProperty.call(U,q)}function Wt(U,q){if(Object.prototype.hasOwnProperty.call(U,q))return U[q]}function Ot(U){for(const q in U)if(Object.prototype.hasOwnProperty.call(U,q))return!1;return!0}function qi(U,q,z){const be={};for(const W in U)Object.prototype.hasOwnProperty.call(U,W)&&(be[W]=q.call(z,U[W],W,U));return be}function ci(U,q){if(U===q)return!0;const z=Object.keys(U),be=Object.keys(q);for(const W of z){if(!be.includes(W))return!1;const X=U[W],Me=q[W];if(gr(X)&&gr(Me)){if(!ci(X,Me))return!1}else if(X!==Me)return!1}for(const W of be)if(!z.includes(W))return!1;return!0}function gr(U){return null!==U&&"object"==typeof U}function Sr(U){const q=[];for(const[z,be]of Object.entries(U))Array.isArray(be)?be.forEach(W=>{q.push(encodeURIComponent(z)+"="+encodeURIComponent(W))}):q.push(encodeURIComponent(z)+"="+encodeURIComponent(be));return q.length?"&"+q.join("&"):""}function zi(U){const q={};return U.replace(/^\?/,"").split("&").forEach(be=>{if(be){const[W,X]=be.split("=");q[decodeURIComponent(W)]=decodeURIComponent(X)}}),q}function Ps(U){const q=U.indexOf("?");if(!q)return"";const z=U.indexOf("#",q);return U.substring(q,z>0?z:void 0)}class $r{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,z){z||(z=0);const be=this.W_;if("string"==typeof q)for(let vt=0;vt<16;vt++)be[vt]=q.charCodeAt(z)<<24|q.charCodeAt(z+1)<<16|q.charCodeAt(z+2)<<8|q.charCodeAt(z+3),z+=4;else for(let vt=0;vt<16;vt++)be[vt]=q[z]<<24|q[z+1]<<16|q[z+2]<<8|q[z+3],z+=4;for(let vt=16;vt<80;vt++){const Ln=be[vt-3]^be[vt-8]^be[vt-14]^be[vt-16];be[vt]=4294967295&(Ln<<1|Ln>>>31)}let Et,ln,W=this.chain_[0],X=this.chain_[1],Me=this.chain_[2],Qe=this.chain_[3],dt=this.chain_[4];for(let vt=0;vt<80;vt++){vt<40?vt<20?(Et=Qe^X&(Me^Qe),ln=1518500249):(Et=X^Me^Qe,ln=1859775393):vt<60?(Et=X&Me|Qe&(X|Me),ln=2400959708):(Et=X^Me^Qe,ln=3395469782);const Ln=(W<<5|W>>>27)+Et+dt+ln+be[vt]&4294967295;dt=Qe,Qe=Me,Me=4294967295&(X<<30|X>>>2),X=W,W=Ln}this.chain_[0]=this.chain_[0]+W&4294967295,this.chain_[1]=this.chain_[1]+X&4294967295,this.chain_[2]=this.chain_[2]+Me&4294967295,this.chain_[3]=this.chain_[3]+Qe&4294967295,this.chain_[4]=this.chain_[4]+dt&4294967295}update(q,z){if(null==q)return;void 0===z&&(z=q.length);const be=z-this.blockSize;let W=0;const X=this.buf_;let Me=this.inbuf_;for(;W<z;){if(0===Me)for(;W<=be;)this.compress_(q,W),W+=this.blockSize;if("string"==typeof q){for(;W<z;)if(X[Me]=q.charCodeAt(W),++Me,++W,Me===this.blockSize){this.compress_(X),Me=0;break}}else for(;W<z;)if(X[Me]=q[W],++Me,++W,Me===this.blockSize){this.compress_(X),Me=0;break}}this.inbuf_=Me,this.total_+=z}digest(){const q=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let W=this.blockSize-1;W>=56;W--)this.buf_[W]=255&z,z/=256;this.compress_(this.buf_);let be=0;for(let W=0;W<5;W++)for(let X=24;X>=0;X-=8)q[be]=this.chain_[W]>>X&255,++be;return q}}function Ki(U,q){const z=new pt(U,q);return z.subscribe.bind(z)}class pt{constructor(q,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{q(this)}).catch(be=>{this.error(be)})}next(q){this.forEachObserver(z=>{z.next(q)})}error(q){this.forEachObserver(z=>{z.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,z,be){let W;if(void 0===q&&void 0===z&&void 0===be)throw new Error("Missing Observer.");W=function vn(U,q){if("object"!=typeof U||null===U)return!1;for(const z of q)if(z in U&&"function"==typeof U[z])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:z,complete:be},void 0===W.next&&(W.next=bn),void 0===W.error&&(W.error=bn),void 0===W.complete&&(W.complete=bn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch(Me){}}),this.observers.push(W),X}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,q)}sendOne(q,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{z(this.observers[q])}catch(be){"undefined"!=typeof console&&console.error&&console.error(be)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bn(){}const Os=function(U,q,z,be){let W;if(be<q?W="at least "+q:be>z&&(W=0===z?"none":"no more than "+z),W)throw new Error(U+" failed: Was called with "+be+(1===be?" argument.":" arguments.")+" Expects "+W+".")};function Gr(U,q){return`${U} failed: ${q} argument `}function Dn(U,q,z,be){if((!be||z)&&"function"!=typeof z)throw new Error(Gr(U,q)+"must be a valid function.")}function hi(U,q,z,be){if((!be||z)&&("object"!=typeof z||null===z))throw new Error(Gr(U,q)+"must be a valid context object.")}const ao=function(U){const q=[];let z=0;for(let be=0;be<U.length;be++){let W=U.charCodeAt(be);if(W>=55296&&W<=56319){const X=W-55296;be++,ee(be<U.length,"Surrogate pair missing trail surrogate."),W=65536+(X<<10)+(U.charCodeAt(be)-56320)}W<128?q[z++]=W:W<2048?(q[z++]=W>>6|192,q[z++]=63&W|128):W<65536?(q[z++]=W>>12|224,q[z++]=W>>6&63|128,q[z++]=63&W|128):(q[z++]=W>>18|240,q[z++]=W>>12&63|128,q[z++]=W>>6&63|128,q[z++]=63&W|128)}return q},jt=function(U){let q=0;for(let z=0;z<U.length;z++){const be=U.charCodeAt(z);be<128?q++:be<2048?q+=2:be>=55296&&be<=56319?(q+=4,z++):q+=3}return q};function Ft(U,q=1e3,z=2){const be=q*Math.pow(z,U),W=Math.round(.5*be*(Math.random()-.5)*2);return Math.min(144e5,be+W)}function yr(U){return U&&U._delegate?U._delegate:U}},6042:(Ye,ve,k)=>{var g=k(5e3);let ee=null;function F(){return ee}const le=new g.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function de(){return(0,g.LFG)(H)}()},providedIn:"platform"}),n})();const G=new g.OlP("Location Initialized");let H=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ge(){return new H((0,g.LFG)(le))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,g.LFG)(le).location;return new Ze((0,g.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new g.OlP("appBaseHref");let Ze=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ve(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ve(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe),g.LFG(We,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ve(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ve(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe),g.LFG(We,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Pe(Be(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Ue(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=xe,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(g.LFG(fe),g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ce(){return new we((0,g.LFG)(fe),(0,g.LFG)(oe))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class Ls{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ls(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),co(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{co(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function co(n,e){n.context.$implicit=e.item}let sr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new rn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class rn{constructor(){this.$implicit=null,this.ngIf=null}}function xu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}const Hl=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let ms=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function vr(n,e){return new g.vHH(2100,"")}();return t.replace(Hl,r=>r[0].toUpperCase()+r.substr(1).toLowerCase())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=g.Yjl({name:"titlecase",type:n,pure:!0}),n})(),$l=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function jo(n){return"server"===n}let Wl=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Ho((0,g.LFG)(le),window)}),n})();class Ho{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ts(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ql(this.window.history)||ql(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ql(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class po extends class Sa extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new po)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function xa(){return Qt=Qt||document.querySelector("base"),Qt?Qt.getAttribute("href"):null}();return null==t?null:function Bs(n){Nu=Nu||document.createElement("a"),Nu.setAttribute("href",n);const e=Nu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Da(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Nu,Qt=null;const or=new g.OlP("TRANSITION_ID"),_n=[{provide:g.ip1,useFactory:function zl(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[or,le,g.zs3],multi:!0}];class ns{static init(){(0,g.VLi)(new ns)}addToWindow(e){g.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const i=g.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ar=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const go=new g.OlP("EventManagerPlugins");let _s=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(go),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ma{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Mi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),rs=(()=>{class n extends Mi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach($o),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($o))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function $o(n){F().remove(n)}const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},js=/%COMP%/g;function Go(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Go(n,i,t):(i=i.replace(js,n),t.push(i))}return t}function Ae(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new hn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new gi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case g.ifc.ShadowDom:return new Ql(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Go(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_s),g.LFG(rs),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class hn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=gt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,i&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ae(r)):this.eventManager.addEventListener(e,t,Ae(r))}}class gi extends hn{constructor(e,t,r,i){super(e),this.component=r;const a=Go(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ou(n){return"_ngcontent-%COMP%".replace(js,n)}(i+"-"+r.id),this.hostAttr=function Yl(n){return"_nghost-%COMP%".replace(js,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ql extends hn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Go(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Jl=(()=>{class n extends Ma{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Xl=["alt","control","meta","shift"],Ug={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ys={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},wr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let mi=(()=>{class n extends Ma{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(Xl.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),l+=_+".")}),l+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=l,f}static getEventFullKey(t){let r="",i=function Fu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ys.hasOwnProperty(e)&&(e=ys[e]))}return Ug[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Xl.forEach(a=>{a!=i&&wr[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Vu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Hs(){po.makeCurrent(),ns.init()},multi:!0},{provide:le,useFactory:function ec(){return(0,g.RDi)(document),document},deps:[]}]),tc=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Ri(){return new g.qLn},deps:[]},{provide:go,useClass:Jl,multi:!0,deps:[le,g.R0b,g.Lbi]},{provide:go,useClass:mi,multi:!0,deps:[le]},{provide:Wo,useClass:Wo,deps:[_s,rs,g.AFp]},{provide:g.FYo,useExisting:Wo},{provide:Mi,useExisting:rs},{provide:rs,useClass:rs,deps:[le]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:_s,useClass:_s,deps:[go,g.R0b]},{provide:class sn{},useClass:ar,deps:[]}];let Na=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:or,useExisting:g.AFp},_n]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:tc,imports:[$l,g.hGG]}),n})();"undefined"!=typeof window&&window;var yn=k(8996),ws=k(8306);const{isArray:Ni}=Array,{getPrototypeOf:wo,prototype:Of,keys:is}=Object;function Ko(n){if(1===n.length){const e=n[0];if(Ni(e))return{args:e,keys:null};if(function Fd(n){return n&&"object"==typeof n&&wo(n)===Of}(e)){const t=is(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ss=k(8421),Pr=k(7669),Lt=k(5403),ht=k(4004);const{isArray:Zo}=Array;function rc(n){return(0,ht.U)(e=>function Yo(n,e){return Zo(e)?n(...e):n(e)}(n,e))}function ic(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let sc=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Cs=(()=>{class n extends sc{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Jn=new g.OlP("NgValueAccessor"),Cr={provide:Jn,useExisting:(0,g.Gpc)(()=>Pi),multi:!0},Wu=new g.OlP("CompositionEventMode");let Pi=(()=>{class n extends sc{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Oa(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Wu,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[g._Bn([Cr]),g.qOj]}),n})();const fn=new g.OlP("NgValidators"),Oi=new g.OlP("NgAsyncValidators");function Fa(n){return function _i(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function yi(n){return null}function Io(n){return null!=n}function bs(n){const e=(0,g.QGY)(n)?(0,yn.D)(n):n;return(0,g.CqO)(e),e}function Ua(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function zu(n,e){return e.map(t=>t(n))}function uc(n){return n.map(e=>function Xo(n){return!n.validate}(e)?e:t=>e.validate(t))}function pn(n){return null!=n?function lc(n){if(!n)return null;const e=n.filter(Io);return 0==e.length?null:function(t){return Ua(zu(t,e))}}(uc(n)):null}function Ff(n){return null!=n?function kf(n){if(!n)return null;const e=n.filter(Io);return 0==e.length?null:function(t){return function Ld(...n){const e=(0,Pr.jO)(n),{args:t,keys:r}=Ko(n),i=new ws.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let _=l,w=l;for(let T=0;T<l;T++){let A=!1;(0,ss.Xf)(t[T]).subscribe((0,Lt.x)(a,P=>{A||(A=!0,w--),f[T]=P},()=>_--,void 0,()=>{(!_||!A)&&(w||a.next(r?ic(r,f):f),a.complete())}))}});return e?i.pipe(rc(e)):i}(zu(t,e).map(bs)).pipe((0,ht.U)(Ua))}}(uc(n)):null}function Lf(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Vd(n){return n._rawValidators}function cc(n){return n._rawAsyncValidators}function Ud(n){return n?Array.isArray(n)?n:[n]:[]}function dc(n,e){return Array.isArray(n)?n.includes(e):n===e}function ea(n,e){const t=Ud(e);return Ud(n).forEach(i=>{dc(t,i)||t.push(i)}),t}function hc(n,e){return Ud(e).filter(t=>!dc(n,t))}class An{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pn(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ff(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vi extends An{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Hn extends An{get formDirective(){return null}get path(){return null}}class fc{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Xn=(()=>{class n extends fc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(vi,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),Gs=(()=>{class n extends fc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hn,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function wi(n,e){return[...e.path,n]}function bo(n,e){mc(n,e),e.valueAccessor.writeValue(n.value),function Ha(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&b(n,e)})}(n,e),function D(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function $a(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&b(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function gc(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fi(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),as(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ds(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mc(n,e){const t=Vd(n);null!==e.validator?n.setValidators(Lf(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=cc(n);null!==e.asyncValidator?n.setAsyncValidators(Lf(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Ds(e._rawValidators,i),Ds(e._rawAsyncValidators,i)}function as(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Vd(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=cc(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Ds(e._rawValidators,r),Ds(e._rawAsyncValidators,r),t}function b(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function R(n,e){mc(n,e)}function Ht(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Sn(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const us="VALID",Jr="INVALID",er="PENDING",Xr="DISABLED";function Hd(n){return(Zu(n)?n.validators:n)||null}function $d(n){return Array.isArray(n)?pn(n):n||null}function Ku(n,e){return(Zu(e)?e.asyncValidators:n)||null}function _c(n){return Array.isArray(n)?Ff(n):n||null}function Zu(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const yc=n=>n instanceof vc,Gd=n=>n instanceof jf,Ga=n=>n instanceof Qu;function Yu(n){return yc(n)?n.value:n.getRawValue()}function Wd(n,e){const t=Gd(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function Ey(n,e){Gd(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new g.vHH(1002,"")})}class qd{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=$d(this._rawValidators),this._composedAsyncValidatorFn=_c(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===us}get invalid(){return this.status===Jr}get pending(){return this.status==er}get disabled(){return this.status===Xr}get enabled(){return this.status!==Xr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=$d(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=_c(e)}addValidators(e){this.setValidators(ea(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ea(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hc(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hc(e,this._rawAsyncValidators))}hasValidator(e){return dc(this._rawValidators,e)}hasAsyncValidator(e){return dc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=er,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xr,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=us,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===us||this.status===er)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xr:us}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=er,this._hasOwnPendingAsyncValidator=!0;const t=bs(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function ta(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Gd(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:Ga(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Xr:this.errors?Jr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(er)?er:this._anyControlsHaveStatus(Jr)?Jr:us}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Zu(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vc extends qd{constructor(e=null,t,r){super(Hd(t),Ku(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zu(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Sn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Sn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class jf extends qd{constructor(e,t,r){super(Hd(t),Ku(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ey(this,e),Object.keys(e).forEach(r=>{Wd(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Yu(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Qu extends qd{constructor(e,t,r){super(Hd(t),Ku(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Ey(this,e),e.forEach((r,i)=>{Wd(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Yu(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const wy={provide:Hn,useExisting:(0,g.Gpc)(()=>Do)},Ec=(()=>Promise.resolve(null))();let Do=(()=>{class n extends Hn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new jf({},pn(t),Ff(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ec.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),bo(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ec.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ec.then(()=>{const r=this._findContainer(t.path),i=new jf({});R(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ec.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ec.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Ht(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(fn,10),g.Y36(Oi,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([wy]),g.qOj]}),n})(),zd=(()=>{class n extends Hn{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return wi(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Kg={provide:vi,useExisting:(0,g.Gpc)(()=>Wa)},Hf=(()=>Promise.resolve(null))();let Wa=(()=>{class n extends vi{constructor(t,r,i,a,l){super(),this._changeDetectorRef=l,this.control=new vc,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function wt(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Pi?t=a:function yt(n){return Object.getPrototypeOf(n.constructor)===Cs}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function tt(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bo(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Hf.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;Hf.then(()=>{var a;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(t){return this._parent?wi(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hn,9),g.Y36(fn,10),g.Y36(Oi,10),g.Y36(Jn,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Kg]),g.qOj,g.TTD]}),n})(),Xu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Qg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const Gf=new g.OlP("NgModelWithFormControlWarning"),XE={provide:Hn,useExisting:(0,g.Gpc)(()=>tl)};let tl=(()=>{class n extends Hn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(as(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return bo(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Fi(t.control||null,t,!1),Sn(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Ht(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Fi(r||null,t),yc(i)&&(bo(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);R(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function V(n,e){return as(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mc(this.form,this),this._oldForm&&as(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(fn,10),g.Y36(Oi,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([XE]),g.qOj,g.TTD]}),n})();const Jg={provide:Hn,useExisting:(0,g.Gpc)(()=>qf)};let qf=(()=>{class n extends zd{constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){ew(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hn,13),g.Y36(fn,10),g.Y36(Oi,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[g._Bn([Jg]),g.qOj]}),n})();const by={provide:Hn,useExisting:(0,g.Gpc)(()=>Zd)};let Zd=(()=>{class n extends Hn{constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return wi(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){ew(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hn,13),g.Y36(fn,10),g.Y36(Oi,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[g._Bn([by]),g.qOj]}),n})();function ew(n){return!(n instanceof qf||n instanceof tl||n instanceof Zd)}const Xg={provide:Jn,useExisting:(0,g.Gpc)(()=>na),multi:!0};function Li(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let na=(()=>{class n extends Cs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=Li(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Ic(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&g.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([Xg]),g.qOj]}),n})(),Yd=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Li(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(na,9))},n.\u0275dir=g.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const em={provide:Jn,useExisting:(0,g.Gpc)(()=>za),multi:!0};function zf(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let za=(()=>{class n extends Cs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,l)=>{a._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const l=a;for(let f=0;f<l.length;f++){const w=this._getOptionValue(l[f].value);i.push(w)}}else{const l=r.options;for(let f=0;f<l.length;f++){const _=l[f];if(_.selected){const w=this._getOptionValue(_.value);i.push(w)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function tw(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&g.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([em]),g.qOj]}),n})(),bc=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(zf(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(zf(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(za,9))},n.\u0275dir=g.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),ra=(()=>{class n{constructor(){this._validator=yi}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):yi,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,features:[g.TTD]}),n})();const Xd={provide:fn,useExisting:(0,g.Gpc)(()=>rl),multi:!0};let rl=(()=>{class n extends ra{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function nw(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>Fa}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&g.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([Xd]),g.qOj]}),n})(),sm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Qg]]}),n})(),sw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[sm]}),n})(),il=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gf,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[sm]}),n})(),Yf=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let f,a=null,l=null;return null!=r&&(function ei(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(a=null!=r.validators?r.validators:null,l=null!=r.asyncValidators?r.asyncValidators:null,f=null!=r.updateOn?r.updateOn:void 0):(a=null!=r.validator?r.validator:null,l=null!=r.asyncValidator?r.asyncValidator:null)),new jf(i,{asyncValidators:l,updateOn:f,validators:a})}control(t,r,i){return new vc(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new Qu(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return yc(t)||Gd(t)||Ga(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:il}),n})();const sl=Object.assign(Object.assign({},sl),{production:!0});function nt(...n){const e=(0,Pr.yG)(n);return(0,yn.D)(n,e)}var Vi=k(7579);class Ui extends Vi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var ia=k(4671),xy=k(9672);function rh(n,e,t){n?(0,xy.f)(t,n,e):e()}var Qf=k(576);function Ka(n,e){const t=(0,Qf.m)(n)?n:()=>n,r=i=>i.error(t());return new ws.y(e?i=>e.schedule(r,0,i):r)}const ih=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Za=k(8189);function Zs(...n){return function My(){return(0,Za.J)(1)}()((0,yn.D)(n,(0,Pr.yG)(n)))}function Tc(n){return new ws.y(e=>{(0,ss.Xf)(n()).subscribe(e)})}var ol=k(515),am=k(727),lr=k(4482);function Xf(){return(0,lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Lt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ii extends ws.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new am.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Lt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=am.w0.EMPTY)}return e}refCount(){return Xf()(this)}}function cr(n,e){return(0,lr.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,Lt.x)(r,_=>{null==i||i.unsubscribe();let w=0;const T=a++;(0,ss.Xf)(n(_,T)).subscribe(i=(0,Lt.x)(r,A=>r.next(e?e(_,A,T,w++):A),()=>{i=null,f()}))},()=>{l=!0,f()}))})}var Ac=k(5698);function sh(...n){const e=(0,Pr.yG)(n);return(0,lr.e)((t,r)=>{(e?Zs(n,t,e):Zs(n,t)).subscribe(r)})}function Ys(n,e,t,r,i){return(a,l)=>{let f=t,_=e,w=0;a.subscribe((0,Lt.x)(l,T=>{const A=w++;_=f?n(_,T,A):(f=!0,T),r&&l.next(_)},i&&(()=>{f&&l.next(_),l.complete()})))}}function Ts(n,e){return(0,lr.e)(Ys(n,e,arguments.length>=2,!0))}function Qs(n,e){return(0,lr.e)((t,r)=>{let i=0;t.subscribe((0,Lt.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function To(n){return(0,lr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Lt.x)(t,void 0,void 0,l=>{a=(0,ss.Xf)(n(l,To(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Or=k(5577);function Ya(n,e){return(0,Qf.m)(e)?(0,Or.z)(n,e,1):(0,Or.z)(n,1)}function ep(n){return n<=0?()=>ol.E:(0,lr.e)((e,t)=>{let r=[];e.subscribe((0,Lt.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function um(n=Ry){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,Lt.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ry(){return new ih}function Qa(n){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,Lt.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function h(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qs((i,a)=>n(i,a,r)):ia.y,(0,Ac.q)(1),t?Qa(e):um(()=>new ih))}var p=k(8505);class S{constructor(e,t){this.id=e,this.url=t}}class N extends S{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class K extends S{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class he extends S{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Le extends S{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Je extends S{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ct extends S{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lt extends S{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $n extends S{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bi extends S{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ja{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oh{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class lm{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xa{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ah{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uh{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const St="primary";class np{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function eu(n){return new np(n)}const cm="ngNavigationCancelingError";function Sc(n){const e=Error("NavigationCancelingError: "+n);return e[cm]=!0,e}function CD(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Js(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Py(n[i],e[i]))return!1;return!0}function Py(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function dm(n){return Array.prototype.concat.apply([],n)}function aw(n){return n.length>0?n[n.length-1]:null}function kr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ao(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,yn.D)(Promise.resolve(n)):nt(n)}const uw={exact:function cw(n,e,t){if(!tu(n.segments,e.segments)||!lh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!cw(n.children[r],e.children[r],t))return!1;return!0},subset:ky},Oy={exact:function hm(n,e){return Js(n,e)},subset:function dw(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Py(n[t],e[t]))},ignored:()=>!0};function lw(n,e,t){return uw[t.paths](n.root,e.root,t.matrixParams)&&Oy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ky(n,e,t){return Fy(n,e,e.segments,t)}function Fy(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!tu(i,t)||e.hasChildren()||!lh(i,t,r))}if(n.segments.length===t.length){if(!tu(n.segments,t)||!lh(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ky(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(tu(n.segments,i)&&lh(n.segments,i,r)&&n.children[St])&&Fy(n.children[St],e,a,r)}}function lh(n,e,t){return e.every((r,i)=>Oy[t](n[i].parameters,r.parameters))}class al{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eu(this.queryParams)),this._queryParamMap}toString(){return ID.serialize(this)}}class Vt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,kr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rp(this)}}class ul{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=eu(this.parameters)),this._parameterMap}toString(){return gw(this)}}function tu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class fm{}class ch{parse(e){const t=new xD(e);return new al(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ip(e.root,!0)}`,r=function bD(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${sp(t)}=${sp(i)}`).join("&"):`${sp(t)}=${sp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ly(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ID=new ch;function rp(n){return n.segments.map(e=>gw(e)).join("/")}function ip(n,e){if(!n.hasChildren())return rp(n);if(e){const t=n.children[St]?ip(n.children[St],!1):"",r=[];return kr(n.children,(i,a)=>{a!==St&&r.push(`${a}:${ip(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function fw(n,e){let t=[];return kr(n.children,(r,i)=>{i===St&&(t=t.concat(e(r,i)))}),kr(n.children,(r,i)=>{i!==St&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===St?[ip(n.children[St],!1)]:[`${i}:${ip(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${rp(n)}/${t[0]}`:`${rp(n)}/(${t.join("//")})`}}function pw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sp(n){return pw(n).replace(/%3B/gi,";")}function pm(n){return pw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vy(n){return decodeURIComponent(n)}function Uy(n){return Vy(n.replace(/\+/g,"%20"))}function gw(n){return`${pm(n.path)}${function mw(n){return Object.keys(n).map(e=>`;${pm(e)}=${pm(n[e])}`).join("")}(n.parameters)}`}const DD=/^[^\/()?;=#]+/;function ls(n){const e=n.match(DD);return e?e[0]:""}const TD=/^[^=?&#]+/,AD=/^[^&#]+/;class xD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vt([],{}):new Vt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[St]=new Vt(e,t)),r}parseSegment(){const e=ls(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ul(Vy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ls(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ls(this.remaining);i&&(r=i,this.capture(r))}e[Vy(t)]=Vy(r)}parseQueryParam(e){const t=function _w(n){const e=n.match(TD);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function SD(n){const e=n.match(AD);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Uy(t),a=Uy(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ls(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=St);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[St]:new Vt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class yw{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=gm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=gm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=By(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return By(e,this._root).map(t=>t.value)}}function gm(n,e){if(n===e.value)return e;for(const t of e.children){const r=gm(n,t);if(r)return r}return null}function By(n,e){if(n===e.value)return[e];for(const t of e.children){const r=By(n,t);if(r.length)return r.unshift(e),r}return[]}class nu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function dh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Tt extends yw{constructor(e,t){super(e),this.snapshot=t,up(this,e)}toString(){return this.snapshot.toString()}}function jy(n,e){const t=function vw(n,e){const l=new ap([],{},{},"",{},St,e,null,n.root,-1,{});return new Ew("",new nu(l,[]))}(n,e),r=new Ui([new ul("",{})]),i=new Ui({}),a=new Ui({}),l=new Ui({}),f=new Ui(""),_=new ru(r,i,l,f,a,St,e,t.root);return _.snapshot=t.root,new Tt(new nu(_,[]),t)}class ru{constructor(e,t,r,i,a,l,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(e=>eu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(e=>eu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function op(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function So(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ap{constructor(e,t,r,i,a,l,f,_,w,T,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=eu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ew extends yw{constructor(e,t){super(t),this.url=e,up(this,t)}toString(){return sa(this._root)}}function up(n,e){e.value._routerState=n,e.children.forEach(t=>up(n,t))}function sa(n){const e=n.children.length>0?` { ${n.children.map(sa).join(", ")} } `:"";return`${n.value}${e}`}function lp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Js(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Js(e.params,t.params)||n.params.next(t.params),function ow(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Js(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Js(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function mm(n,e){const t=Js(n.params,e.params)&&function hw(n,e){return tu(n,e)&&n.every((t,r)=>Js(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||mm(n.parent,e.parent))}function _m(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ww(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return _m(n,r,i);return _m(n,r)})}(n,e,t);return new nu(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>_m(n,f)),l}}const r=function UM(n){return new ru(new Ui(n.url),new Ui(n.params),new Ui(n.queryParams),new Ui(n.fragment),new Ui(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>_m(n,a));return new nu(r,i)}}function Mc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Rc(n){return"object"==typeof n&&null!=n&&n.outlets}function cp(n,e,t,r,i){let a={};if(r&&kr(r,(f,_)=>{a[_]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),n===e)return new al(t,a,i);const l=vm(n,e,t);return new al(l,a,i)}function vm(n,e,t){const r={};return kr(n.children,(i,a)=>{r[a]=i===e?t:vm(i,e,t)}),new Vt(n.segments,r)}class MD{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Mc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Rc);if(i&&i!==aw(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $y{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function OD(n,e,t){if(n||(n=new Vt([],{})),0===n.segments.length&&n.hasChildren())return Em(n,e,t);const r=function BM(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(Rc(f))break;const _=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!Cm(_,w,l))return a;r+=2}else{if(!Cm(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Vt(n.segments.slice(0,r.pathIndex),{});return a.children[St]=new Vt(n.segments.slice(r.pathIndex),n.children),Em(a,0,i)}return r.match&&0===i.length?new Vt(n.segments,{}):r.match&&!n.hasChildren()?wm(n,e,t):r.match?Em(n,0,i):wm(n,e,t)}function Em(n,e,t){if(0===t.length)return new Vt(n.segments,{});{const r=function Cw(n){return Rc(n[0])?n[0].outlets:{[St]:n}}(t),i={};return kr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=OD(n.children[l],e,a))}),kr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Vt(n.segments,i)}}function wm(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Rc(a)){const _=Iw(a.outlets);return new Vt(r,_)}if(0===i&&Mc(t[0])){r.push(new ul(n.segments[e].path,bw(t[0]))),i++;continue}const l=Rc(a)?a.outlets[St]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&Mc(f)?(r.push(new ul(l,bw(f))),i+=2):(r.push(new ul(l,{})),i++)}return new Vt(r,{})}function Iw(n){const e={};return kr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=wm(new Vt([],{}),0,t))}),e}function bw(n){const e={};return kr(n,(t,r)=>e[r]=`${t}`),e}function Cm(n,e,t){return n==t.path&&Js(e,t.parameters)}class HM{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=dh(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),kr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=dh(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=dh(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=dh(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new uh(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Xa(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(lp(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),lp(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=function $M(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=f?f.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=_,l.outlet&&l.outlet.activateWith(i,_),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Dw{constructor(e,t){this.routes=e,this.module=t}}function Nc(n){return"function"==typeof n}function hh(n){return n instanceof al}const Pc=Symbol("INITIAL_VALUE");function dp(){return cr(n=>function Ci(...n){const e=(0,Pr.yG)(n),t=(0,Pr.jO)(n),{args:r,keys:i}=Ko(n);if(0===r.length)return(0,yn.D)([],e);const a=new ws.y(function Dc(n,e,t=ia.y){return r=>{rh(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let _=0;_<i;_++)rh(e,()=>{const w=(0,yn.D)(n[_],e);let T=!1;w.subscribe((0,Lt.x)(r,A=>{a[_]=A,T||(T=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>ic(i,l):ia.y));return t?a.pipe(rc(t)):a}(n.map(e=>e.pipe((0,Ac.q)(1),sh(Pc)))).pipe(Ts((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==Pc?i:(a===Pc&&(r=!0),r||!1!==a&&l!==t.length-1&&!hh(a)?i:a),e)},Pc),Qs(e=>e!==Pc),(0,ht.U)(e=>hh(e)?e:!0===e),(0,Ac.q)(1)))}class Tw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Oc,this.attachRef=null}}class Oc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Tw,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Im=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=a||St,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,_=new Gy(t,f,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Oc),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Gy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ru?this.route:e===Oc?this.childContexts:this.parent.get(e,t)}}let Aw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[Im],encapsulation:2}),n})();function iu(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Sw(r,kD(e,r))}}function Sw(n,e){n.children&&iu(n.children,e)}function kD(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function hp(n){const e=n.children&&n.children.map(hp),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==St&&(t.component=Aw),t}function Xs(n){return n.outlet||St}function Wy(n,e){const t=n.filter(r=>Xs(r)===e);return t.push(...n.filter(r=>Xs(r)!==e)),t}const xw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bm(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},xw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||CD)(t,n,e);if(!a)return Object.assign({},xw);const l={};kr(a.posParams,(_,w)=>{l[w]=_.path});const f=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function cl(n,e,t,r,i="corrected"){if(t.length>0&&function ph(n,e,t){return t.some(r=>su(n,e,r)&&Xs(r)!==St)}(n,t,r)){const l=new Vt(e,function qy(n,e,t,r){const i={};i[St]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Xs(a)!==St){const l=new Vt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Xs(a)]=l}return i}(n,e,r,new Vt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function fp(n,e,t){return t.some(r=>su(n,e,r))}(n,t,r)){const l=new Vt(n.segments,function fh(n,e,t,r,i,a){const l={};for(const f of r)if(su(n,t,f)&&!i[Xs(f)]){const _=new Vt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Xs(f)]=_}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Vt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function su(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Mw(n,e,t,r){return!!(Xs(n)===r||r!==St&&su(e,t,n))&&("**"===n.path||bm(e,n,t).matched)}function zy(n,e,t){return 0===e.length&&!n.children[t]}class pp{constructor(e){this.segmentGroup=e||null}}class Dm{constructor(e){this.urlTree=e}}function kc(n){return Ka(new pp(n))}function Ky(n){return Ka(new Dm(n))}class KM{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=cl(this.urlTree.root,[],[],this.config).segmentGroup,t=new Vt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,St).pipe((0,ht.U)(a=>this.createUrlTree(Am(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(To(a=>{if(a instanceof Dm)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof pp?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,St).pipe((0,ht.U)(i=>this.createUrlTree(Am(i),e.queryParams,e.fragment))).pipe(To(i=>{throw i instanceof pp?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Vt([],{[St]:e}):e;return new al(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ht.U)(a=>new Vt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,yn.D)(i).pipe(Ya(a=>{const l=r.children[a],f=Wy(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,ht.U)(_=>({segment:_,outlet:a})))}),Ts((a,l)=>(a[l.outlet]=l.segment,a),{}),function y(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qs((i,a)=>n(i,a,r)):ia.y,ep(1),t?Qa(e):um(()=>new ih))}())}expandSegment(e,t,r,i,a,l){return(0,yn.D)(r).pipe(Ya(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(To(w=>{if(w instanceof pp)return nt(null);throw w}))),h(f=>!!f),To((f,_)=>{if(f instanceof ih||"EmptyError"===f.name)return zy(t,i,a)?nt(new Vt([],{})):kc(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return Mw(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):kc(t):kc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ky(a):this.lineralizeSegments(r,a).pipe((0,Or.z)(l=>{const f=new Vt(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:_,remainingSegments:w,positionalParamSegments:T}=bm(t,i,a);if(!f)return kc(t);const A=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?Ky(A):this.lineralizeSegments(i,A).pipe((0,Or.z)(P=>this.expandSegment(e,t,r,P.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?nt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ht.U)(A=>(r._loadedConfig=A,new Vt(i,{})))):nt(new Vt(i,{}));const{matched:l,consumedSegments:f,remainingSegments:_}=bm(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,Or.z)(T=>{const A=T.module,P=T.routes,{segmentGroup:B,slicedSegments:Y}=cl(t,f,_,P),De=new Vt(B.segments,B.children);if(0===Y.length&&De.hasChildren())return this.expandChildren(A,P,De).pipe((0,ht.U)(Mt=>new Vt(f,Mt)));if(0===P.length&&0===Y.length)return nt(new Vt(f,{}));const je=Xs(r)===a;return this.expandSegment(A,De,P,Y,je?St:a,!0).pipe((0,ht.U)(Dt=>new Vt(f.concat(Dt.segments),Dt.children)))})):kc(t)}getChildConfig(e,t,r){return t.children?nt(new Dw(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?nt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Or.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,ht.U)(a=>(t._loadedConfig=a,a))):function FD(n){return Ka(Sc(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):nt(new Dw([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?nt(i.map(l=>{const f=e.get(l);let _;if(function WM(n){return n&&Nc(n.canLoad)}(f))_=f.canLoad(t,r);else{if(!Nc(f))throw new Error("Invalid CanLoad guard");_=f(t,r)}return Ao(_)})).pipe(dp(),(0,p.b)(l=>{if(!hh(l))return;const f=Sc(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw f.url=l,f}),(0,ht.U)(l=>!0===l)):nt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return nt(r);if(i.numberOfChildren>1||!i.children[St])return Ka(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[St]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new al(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return kr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return kr(t.children,(f,_)=>{l[_]=this.createSegmentGroup(e,f,r,i)}),new Vt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Am(n){const e={};for(const r of Object.keys(n.children)){const a=Am(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Nw(n){if(1===n.numberOfChildren&&n.children[St]){const e=n.children[St];return new Vt(n.segments.concat(e.segments),e.children)}return n}(new Vt(n.segments,e))}class Zy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Sm{constructor(e,t){this.component=e,this.route=t}}function VD(n,e,t){const r=n._root;return Mm(r,e?e._root:null,t,[r.value])}function xm(n,e,t){const r=function UD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Mm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=dh(e);return n.children.forEach(l=>{(function ZM(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function Pw(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!tu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!tu(n.url,e.url)||!Js(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mm(n,e)||!Js(n.queryParams,e.queryParams);default:return!mm(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Zy(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Mm(n,e,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Sm(f.outlet.component,l))}else l&&Rm(e,f,i),i.canActivateChecks.push(new Zy(r)),Mm(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),kr(a,(l,f)=>Rm(l,t.getContext(f),i)),i}function Rm(n,e,t){const r=dh(n),i=n.value;kr(r,(a,l)=>{Rm(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Sm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Fw{}function Lw(n){return new ws.y(e=>e.error(n))}class Vw{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=cl(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,St);if(null===t)return null;const r=new ap([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new nu(r,t),a=new Ew(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=op(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],f=Wy(e,a),_=this.processSegmentGroup(f,l,a);if(null===_)return null;r.push(..._)}const i=Nm(r);return function Uw(n){n.sort((e,t)=>e.value.outlet===St?-1:t.value.outlet===St?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return zy(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Mw(e,t,r,i))return null;let a,l=[],f=[];if("**"===e.path){const B=r.length>0?aw(r).parameters:{};a=new ap(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qy(e),Xs(e),e.component,e,Bw(t),zD(t)+r.length,jw(e))}else{const B=bm(t,e,r);if(!B.matched)return null;l=B.consumedSegments,f=B.remainingSegments,a=new ap(l,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qy(e),Xs(e),e.component,e,Bw(t),zD(t)+l.length,jw(e))}const _=function qD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:T}=cl(t,l,f,_.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===T.length&&w.hasChildren()){const B=this.processChildren(_,w);return null===B?null:[new nu(a,B)]}if(0===_.length&&0===T.length)return[new nu(a,[])];const A=Xs(e)===i,P=this.processSegment(_,w,T,A?St:i);return null===P?null:[new nu(a,P)]}}function oa(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Nm(n){const e=[],t=new Set;for(const r of n){if(!oa(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Nm(r.children);e.push(new nu(r.value,i))}return e.filter(r=>!t.has(r))}function Bw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zD(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Qy(n){return n.data||{}}function jw(n){return n.resolve||{}}function Hw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function gp(n){return cr(e=>{const t=n(e);return t?(0,yn.D)(t).pipe((0,ht.U)(()=>e)):nt(e)})}class ev extends class Xy{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Om=new g.OlP("ROUTES");class JD{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,ht.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new Dw(dm(l.injector.get(Om,void 0,g.XFs.Self|g.XFs.Optional)).map(hp),l)}),To(a=>{throw t._loader$=void 0,a}));return t._loader$=new Ii(i,()=>new Vi.x).pipe(Xf()),t._loader$}loadModuleFactory(e){return Ao(e()).pipe((0,Or.z)(t=>t instanceof g.YKP?nt(t):(0,yn.D)(this.compiler.compileModuleAsync(t))))}}class tv{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function JM(n){throw n}function XD(n,e,t){return e.parse("/")}function nv(n,e){return nt(null)}const $w={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ir=(()=>{class n{constructor(t,r,i,a,l,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Vi.x,this.errorHandler=JM,this.malformedUriErrorHandler=XD,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:nv,afterPreactivation:nv},this.urlHandlingStrategy=new tv,this.routeReuseStrategy=new ev,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(g.h0i),this.console=l.get(g.c2e);const A=l.get(g.R0b);this.isNgZoneEnabled=A instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function xc(){return new al(new Vt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new JD(l,f,P=>this.triggerEvent(new Ja(P)),P=>this.triggerEvent(new oh(P))),this.routerState=jy(this.currentUrlTree,this.rootComponentType),this.transitions=new Ui({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Qs(i=>0!==i.id),(0,ht.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),cr(i=>{let a=!1,l=!1;return nt(i).pipe((0,p.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),cr(f=>{const _=this.browserUrlTree.toString(),w=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return aa(f.source)&&(this.browserUrlTree=f.extractedUrl),nt(f).pipe(cr(A=>{const P=this.transitions.getValue();return r.next(new N(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),P!==this.transitions.getValue()?ol.E:Promise.resolve(A)}),function LD(n,e,t,r){return cr(i=>function Rw(n,e,t,r,i){return new KM(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ht.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,p.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function KD(n,e,t,r,i){return(0,Or.z)(a=>function WD(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new Vw(n,e,t,r,i,a).recognize();return null===l?Lw(new Fw):nt(l)}catch(l){return Lw(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,ht.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,p.b)(A=>{if("eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(B,A)}this.browserUrlTree=A.urlAfterRedirects}const P=new Je(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(P)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:B,source:Y,restoredState:De,extras:je}=f,At=new N(P,this.serializeUrl(B),Y,De);r.next(At);const Dt=jy(B,this.rootComponentType).snapshot;return nt(Object.assign(Object.assign({},f),{targetSnapshot:Dt,urlAfterRedirects:B,extras:Object.assign(Object.assign({},je),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),ol.E}),gp(f=>{const{targetSnapshot:_,id:w,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:P,replaceUrl:B}}=f;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!P,replaceUrl:!!B})}),(0,p.b)(f=>{const _=new ct(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,ht.U)(f=>Object.assign(Object.assign({},f),{guards:VD(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function BD(n,e){return(0,Or.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?nt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Yy(n,e,t,r){return(0,yn.D)(n).pipe((0,Or.z)(i=>function GD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?nt(a.map(f=>{const _=xm(f,e,i);let w;if(function ll(n){return n&&Nc(n.canDeactivate)}(_))w=Ao(_.canDeactivate(n,e,t,r));else{if(!Nc(_))throw new Error("Invalid CanDeactivate guard");w=Ao(_(n,e,t,r))}return w.pipe(h())})).pipe(dp()):nt(!0)}(i.component,i.route,t,e,r)),h(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Or.z)(f=>f&&function GM(n){return"boolean"==typeof n}(f)?function Ow(n,e,t,r){return(0,yn.D)(e).pipe(Ya(i=>Zs(function HD(n,e){return null!==n&&e&&e(new lm(n)),nt(!0)}(i.route.parent,r),function jD(n,e){return null!==n&&e&&e(new ah(n)),nt(!0)}(i.route,r),function kw(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function As(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Tc(()=>nt(l.guards.map(_=>{const w=xm(_,l.node,t);let T;if(function zM(n){return n&&Nc(n.canActivateChild)}(w))T=Ao(w.canActivateChild(r,n));else{if(!Nc(w))throw new Error("Invalid CanActivateChild guard");T=Ao(w(r,n))}return T.pipe(h())})).pipe(dp())));return nt(a).pipe(dp())}(n,i.path,t),function $D(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nt(!0);const i=r.map(a=>Tc(()=>{const l=xm(a,e,t);let f;if(function qM(n){return n&&Nc(n.canActivate)}(l))f=Ao(l.canActivate(e,n));else{if(!Nc(l))throw new Error("Invalid CanActivate guard");f=Ao(l(e,n))}return f.pipe(h())}));return nt(i).pipe(dp())}(n,i.route,t))),h(i=>!0!==i,!0))}(r,a,n,e):nt(f)),(0,ht.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,p.b)(f=>{if(hh(f.guardsResult)){const w=Sc(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw w.url=f.guardsResult,w}const _=new lt(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),Qs(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),gp(f=>{if(f.guards.canActivateChecks.length)return nt(f).pipe((0,p.b)(_=>{const w=new $n(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),cr(_=>{let w=!1;return nt(_).pipe(function ZD(n,e){return(0,Or.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return nt(t);let a=0;return(0,yn.D)(i).pipe(Ya(l=>function Jy(n,e,t,r){return function YD(n,e,t,r){const i=Hw(n);if(0===i.length)return nt({});const a={};return(0,yn.D)(i).pipe((0,Or.z)(l=>function Pm(n,e,t,r){const i=xm(n,e,r);return Ao(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,p.b)(f=>{a[l]=f}))),ep(1),(0,Or.z)(()=>Hw(a).length===i.length?nt(a):ol.E))}(n._resolve,n,e,r).pipe((0,ht.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),op(n,t).resolve),null)))}(l.route,r,n,e)),(0,p.b)(()=>a++),ep(1),(0,Or.z)(l=>a===i.length?nt(t):ol.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,p.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,p.b)(_=>{const w=new Bi(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),gp(f=>{const{targetSnapshot:_,id:w,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:P,replaceUrl:B}}=f;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!P,replaceUrl:!!B})}),(0,ht.U)(f=>{const _=function Hy(n,e,t){const r=_m(n,e._root,t?t._root:void 0);return new Tt(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:_})}),(0,p.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,ht.U)(r=>(new HM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,p.b)({next(){a=!0},complete(){a=!0}}),function E(n){return(0,lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),To(f=>{if(l=!0,function Ny(n){return n&&n[cm]}(f)){const _=hh(f.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new he(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(w),_?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aa(i.source)};this.scheduleNavigation(T,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Le(i.id,this.serializeUrl(i.extractedUrl),f);r.next(_);try{i.resolve(this.errorHandler(f))}catch(w){i.reject(w)}}return ol.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const _=Object.assign({},l);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){iu(t),this.config=t.map(hp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:_}=r,w=i||this.routerState.root,T=_?this.currentUrlTree.fragment:l;let A=null;switch(f){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),function ym(n,e,t,r,i){if(0===t.length)return cp(e.root,e.root,e.root,r,i);const a=function RD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new MD(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return kr(a.outlets,(_,w)=>{f[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new MD(t,e,r)}(t);if(a.toRoot())return cp(e.root,e.root,new Vt([],{}),r,i);const l=function ND(n,e,t){if(n.isAbsolute)return new $y(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new $y(a,a===e.root,0)}const r=Mc(n.commands[0])?0:1;return function PD(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new $y(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),f=l.processChildren?Em(l.segmentGroup,l.index,a.commands):OD(l.segmentGroup,l.index,a.commands);return cp(e.root,l.segmentGroup,f,r,i)}(w,this.currentUrlTree,t,A,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=hh(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Ww(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},$w):!1===r?Object.assign({},Gw):r,hh(t))return lw(this.currentUrlTree,t,i);const a=this.parseUrl(t);return lw(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new K(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var f,_;if(this.disposed)return Promise.resolve(!1);let w,T,A;l?(w=l.resolve,T=l.reject,A=l.promise):A=new Promise((Y,De)=>{w=Y,T=De});const P=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):B=0,this.setTransition({id:P,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:w,reject:T,promise:A,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),A.catch(Y=>Promise.reject(Y))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new he(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function aa(n){return"imperative"!==n}class sv{}class _h{preload(e,t){return nt(null)}}let qw=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new JD(i,r,_=>t.triggerEvent(new Ja(_)),_=>t.triggerEvent(new oh(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qs(t=>t instanceof K),Ya(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,yn.D)(i).pipe((0,Za.J)(),(0,ht.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?nt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Or.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ir),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(sv))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),mp=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof N?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof K&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof tp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new tp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const dl=new g.OlP("ROUTER_CONFIGURATION"),av=new g.OlP("ROUTER_FORROOT_GUARD"),tT=[we,{provide:fm,useClass:ch},{provide:Ir,useFactory:function rT(n,e,t,r,i,a,l={},f,_){const w=new Ir(null,n,e,t,r,i,dm(a));return f&&(w.urlHandlingStrategy=f),_&&(w.routeReuseStrategy=_),function iT(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,w),l.enableTracing&&w.events.subscribe(T=>{var A,P;null===(A=console.group)||void 0===A||A.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(P=console.groupEnd)||void 0===P||P.call(console)}),w},deps:[fm,Oc,we,g.zs3,g.Sil,Om,dl,[class QM{},new g.FiY],[class QD{},new g.FiY]]},Oc,{provide:ru,useFactory:function vh(n){return n.routerState.root},deps:[Ir]},qw,_h,class ov{preload(e,t){return t().pipe(To(()=>nt(null)))}},{provide:dl,useValue:{enableTracing:!1}}];function uv(){return new g.PXZ("Router",Ir)}let zw=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[tT,lv(t),{provide:av,useFactory:yh,deps:[[Ir,new g.FiY,new g.tp0]]},{provide:dl,useValue:r||{}},{provide:fe,useFactory:Kw,deps:[oe,[new g.tBr(We),new g.FiY],dl]},{provide:mp,useFactory:nT,deps:[Ir,Wl,dl]},{provide:sv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:_h},{provide:g.PXZ,multi:!0,useFactory:uv},[cv,{provide:g.ip1,multi:!0,useFactory:sT,deps:[cv]},{provide:Zw,useFactory:oT,deps:[cv]},{provide:g.tb,multi:!0,useExisting:Zw}]]}}static forChild(t){return{ngModule:n,providers:[lv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(av,8),g.LFG(Ir,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function nT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new mp(n,e,t)}function Kw(n,e,t={}){return t.useHash?new Te(n,e):new Ze(n,e)}function yh(n){return"guarded"}function lv(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:Om,multi:!0,useValue:n}]}let cv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Vi.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(Ir),l=this.injector.get(dl);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?nt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(dl),i=this.injector.get(qw),a=this.injector.get(mp),l=this.injector.get(Ir),f=this.injector.get(g.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function sT(n){return n.appInitializer.bind(n)}function oT(n){return n.bootstrapListener.bind(n)}const Zw=new g.OlP("Router Initializer");var _e=k(5861),dv=k(4986),En=k(5813);function km(){return(0,lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Lt.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Qw(n,e=ia.y){return n=null!=n?n:aT,(0,lr.e)((t,r)=>{let i,a=!0;t.subscribe((0,Lt.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function aT(n,e){return n===e}var Xe,ji=k(2011),hv=(k(7092),k(3942)),la=k(9681),ca=k(4859),xo=k(1877),O=k(2090),tR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},hl={},fv=fv||{},bt=tR||self;function _p(){}function Jw(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Hi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Xw="closure_uid_"+(1e9*Math.random()>>>0),eC=0;function tC(n,e,t){return n.call.apply(n.bind,arguments)}function nC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ti(n,e,t){return(ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tC:nC).apply(null,arguments)}function pv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Fr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function da(){this.s=this.s,this.o=this.o}var gv={};da.prototype.s=!1,da.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function nR(n){return Object.prototype.hasOwnProperty.call(n,Xw)&&n[Xw]||(n[Xw]=++eC)}(this);delete gv[n]}},da.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},iC=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function sC(n){return Array.prototype.concat.apply([],arguments)}function mv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Fm(n){return/^[\s\xa0]*$/.test(n)}var br,yp=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function dr(n,e){return-1!=n.indexOf(e)}function _v(n,e){return n<e?-1:n>e?1:0}e:{var oC=bt.navigator;if(oC){var aC=oC.userAgent;if(aC){br=aC;break e}}br=""}function vp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Mo(n){const e={};for(const t in n)e[t]=n[t];return e}var Eh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ni(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Eh.length;a++)t=Eh[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ou(n){return ou[" "](n),n}ou[" "]=_p;var au,n,eo=dr(br,"Opera"),fl=dr(br,"Trident")||dr(br,"MSIE"),Fc=dr(br,"Edge"),pl=Fc||fl,Lc=dr(br,"Gecko")&&!(dr(br.toLowerCase(),"webkit")&&!dr(br,"Edge"))&&!(dr(br,"Trident")||dr(br,"MSIE"))&&!dr(br,"Edge"),wh=dr(br.toLowerCase(),"webkit")&&!dr(br,"Edge");function Vc(){var n=bt.document;return n?n.documentMode:void 0}e:{var gl="",ml=(n=br,Lc?/rv:([^\);]+)(\)|;)/.exec(n):Fc?/Edge\/([\d\.]+)/.exec(n):fl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):wh?/WebKit\/(\S+)/.exec(n):eo?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ml&&(gl=ml?ml[1]:""),fl){var _l=Vc();if(null!=_l&&_l>parseFloat(gl)){au=String(_l);break e}}au=gl}var uC={};var cC=bt.document&&fl&&(Vc()||parseInt(au,10))||void 0,dC=function(){if(!bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{bt.addEventListener("test",_p,e),bt.removeEventListener("test",_p,e)}catch(t){}return n}();function ri(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ch(n,e){if(ri.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Lc){e:{try{ou(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:hC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ch.Z.h.call(this)}}ri.prototype.h=function(){this.defaultPrevented=!0},Fr(Ch,ri);var hC={2:"touch",3:"pen",4:"mouse"};Ch.prototype.h=function(){Ch.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ep="closure_listenable_"+(1e6*Math.random()|0),fC=0;function cT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++fC,this.ca=this.fa=!1}function wp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Cp(n){this.src=n,this.g={},this.h=0}function vv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=rC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(wp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ev(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Cp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Ev(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new cT(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Um="closure_lm_"+(1e6*Math.random()|0),wv={};function Cv(n,e,t,r,i){if(r&&r.once)return hT(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Cv(n,e[a],t,r,i);return null}return t=yC(t),n&&n[Ep]?n.N(e,t,Hi(r)?!!r.capture:!!r,i):pC(n,e,t,!1,r,i)}function pC(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Hi(i)?!!i.capture:!!i,f=mC(n);if(f||(n[Um]=f=new Cp(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function dT(){var e=fT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)dC||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Bm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hT(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)hT(n,e[a],t,r,i);return null}return t=yC(t),n&&n[Ep]?n.O(e,t,Hi(r)?!!r.capture:!!r,i):pC(n,e,t,!0,r,i)}function gC(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)gC(n,e[a],t,r,i);else r=Hi(r)?!!r.capture:!!r,t=yC(t),n&&n[Ep]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ev(a=n.g[e],t,r,i))&&(wp(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=mC(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ev(e,t,r,i)),(t=-1<n?e[n]:null)&&Ip(t))}function Ip(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ep])vv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Bm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mC(e))?(vv(t,n),0==t.h&&(t.src=null,e[Um]=null)):wp(n)}}}function Bm(n){return n in wv?wv[n]:wv[n]="on"+n}function fT(n,e){if(n.ca)n=!0;else{e=new Ch(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ip(n),n=t.call(r,e)}return n}function mC(n){return(n=n[Um])instanceof Cp?n:null}var _C="__closure_events_fn_"+(1e9*Math.random()>>>0);function yC(n){return"function"==typeof n?n:(n[_C]||(n[_C]=function(e){return n.handleEvent(e)}),n[_C])}function Lr(){da.call(this),this.i=new Cp(this),this.P=this,this.I=null}function Vr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ri(e,n);else if(e instanceof ri)e.target=e.target||n;else{var i=e;ni(e=new ri(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Iv(l,r,!0,e)&&i}if(i=Iv(l=e.g=n,r,!0,e)&&i,i=Iv(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Iv(l=e.g=t[a],r,!1,e)&&i}function Iv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var f=l.listener,_=l.ia||l.src;l.fa&&vv(n.i,l),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Fr(Lr,da),Lr.prototype[Ep]=!0,Lr.prototype.removeEventListener=function(n,e,t,r){gC(this,n,e,t,r)},Lr.prototype.M=function(){if(Lr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)wp(t[r]);delete n.g[e],n.h--}}this.I=null},Lr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Lr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var bv=bt.JSON.stringify;function Ih(){var n=wC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Tv,Dv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new gT,n=>n.reset());class gT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function vC(n){bt.setTimeout(()=>{throw n},0)}function bh(n,e){Tv||function EC(){var n=bt.Promise.resolve(void 0);Tv=function(){n.then(mT)}}(),Av||(Tv(),Av=!0),wC.add(n,e)}var Av=!1,wC=new class pT{constructor(){this.h=this.g=null}add(e,t){const r=Dv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function mT(){for(var n;n=Ih();){try{n.h.call(n.g)}catch(t){vC(t)}var e=Dv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Av=!1}function jm(n,e){Lr.call(this),this.h=n||1,this.g=e||bt,this.j=ti(this.kb,this),this.l=Date.now()}function Sv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Hm(n,e,t){if("function"==typeof n)t&&(n=ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:bt.setTimeout(n,e||0)}function CC(n){n.g=Hm(()=>{n.g=null,n.i&&(n.i=!1,CC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fr(jm,Lr),(Xe=jm.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vr(this,"tick"),this.da&&(Sv(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){jm.Z.M.call(this),Sv(this),delete this.g};class IC extends da{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:CC(this)}M(){super.M(),this.g&&(bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dh(n){da.call(this),this.h=n,this.g={}}Fr(Dh,da);var $m=[];function _T(n,e,t,r){Array.isArray(t)||(t&&($m[0]=t.toString()),t=$m);for(var i=0;i<t.length;i++){var a=Cv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Gm(n){vp(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ip(e)},n),n.g={}}function Wm(){this.g=!0}function Uc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Mv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return bv(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}Dh.prototype.M=function(){Dh.Z.M.call(this),Gm(this)},Dh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wm.prototype.Aa=function(){this.g=!1},Wm.prototype.info=function(){};var Bc={},Dp=null;function jc(){return Dp=Dp||new Lr}function qm(n){ri.call(this,Bc.Ma,n)}function zm(n){const e=jc();Vr(e,new qm(e,n))}function bC(n,e){ri.call(this,Bc.STAT_EVENT,n),this.stat=e}function ii(n){const e=jc();Vr(e,new bC(e,n))}function Km(n,e){ri.call(this,Bc.Na,n),this.size=e}function Th(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return bt.setTimeout(function(){n()},e)}Bc.Ma="serverreachability",Fr(qm,ri),Bc.STAT_EVENT="statevent",Fr(bC,ri),Bc.Na="timingevent",Fr(Km,ri);var Tp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ym(){}function Qm(){}Ym.prototype.h=null;var Xm,Ah={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Nv(){ri.call(this,"d")}function Jm(){ri.call(this,"c")}function Sh(){}function xh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Dh(this),this.P=yT,this.W=new jm(n=pl?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new DC}function DC(){this.i=null,this.g="",this.h=!1}Fr(Nv,ri),Fr(Jm,ri),Fr(Sh,Ym),Sh.prototype.g=function(){return new XMLHttpRequest},Sh.prototype.i=function(){return{}},Xm=new Sh;var yT=45e3,Pv={},Mh={};function Rh(n,e,t){n.K=1,n.v=Mp(uu(e)),n.s=t,n.U=!0,Ov(n,null)}function Ov(n,e){n.F=Date.now(),Nh(n),n.A=uu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),RC(t.h,"t",r),n.C=0,t=n.l.H,n.h=new DC,n.g=Qv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new IC(ti(n.Ia,n,n.g),n.O)),_T(n.V,n.g,"readystatechange",n.gb),e=n.H?Mo(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),zm(1),function rR(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),_=0;_<f.length;_++){var w=f[_].split("=");if(1<w.length){var T=w[0];w=w[1];var A=T.split("_");l=2<=A.length&&"type"==A[1]?l+(T+"=")+w+"&":l+(T+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function kv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Fv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=TC(n,t),i==Mh){4==e&&(n.o=4,ii(14),r=!1),Uc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Pv){n.o=4,ii(15),Uc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Uc(n.j,n.m,i,null),Vv(n,i)}kv(n)&&i!=Mh&&i!=Pv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),c_(e),e.L=!0,ii(11))):(Uc(n.j,n.m,t,"[Invalid Chunked Response]"),Oh(n),Ph(n))}function TC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Mh:(t=Number(e.substring(t,r)),isNaN(t)?Pv:(r+=1)+t>e.length?Mh:(e=e.substr(r,t),n.C=r+t,e))}function Nh(n){n.Y=Date.now()+n.P,Lv(n,n.P)}function Lv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Th(ti(n.eb,n),e)}function Ap(n){n.B&&(bt.clearTimeout(n.B),n.B=null)}function Ph(n){0==n.l.G||n.I||GC(n.l,n)}function Oh(n){Ap(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Sv(n.W),Gm(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Vv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||n_(t.i,n)))if(t.I=n.N,!n.J&&n_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Th(ti(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;d_(t),kp(t)}l_(t),ii(18)}if(1>=NC(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else $h(t,11)}else if((n.J||t.g==n)&&d_(t),!Fm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const T=w[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const A=w[4];null!=A&&(t.za=A,t.h.info("SVER="+t.za));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const Y=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var a=r.i;!a.g&&(dr(Y,"spdy")||dr(Y,"quic")||dr(Y,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(r_(a,a.h),a.h=null))}if(r.D){const De=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;De&&(r.sa=De,xn(r.F,r.D,De))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=RT(r,r.H?r.la:null,r.W),l.J){Rp(r.i,l);var f=l,_=r.K;_&&f.setTimeout(_),f.B&&(Ap(f),Nh(f)),r.g=l}else Yv(r);0<t.l.length&&Fp(t)}else"stop"!=w[0]&&"close"!=w[0]||$h(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?$h(t,7):qv(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}zm(4)}catch(w){}}function e_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Jw(n)||"string"==typeof n)iC(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Jw(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function vT(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Jw(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function kh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof kh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function tr(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];yl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)yl(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function yl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=xh.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==du(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const T=du(this.g);var e=this.g.Da();const A=this.g.ba();if(!(3>T)&&(3!=T||pl||this.g&&(this.h.h||this.g.ga()||jC(this.g)))){this.I||4!=T||7==e||zm(8==e||0>=A?3:2),Ap(this);var t=this.g.ba();this.N=t;t:if(kv(this)){var r=jC(this.g);n="";var i=r.length,a=4==du(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Oh(this),Ph(this);var l="";break t}this.h.i=new bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function bp(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fm(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,ii(12),Oh(this),Ph(this);break e}Uc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Vv(this,t)}this.U?(Fv(this,T,l),pl&&this.i&&3==T&&(_T(this.V,this.W,"tick",this.fb),this.W.start())):(Uc(this.j,this.m,l,null),Vv(this,l)),4==T&&Oh(this),this.i&&!this.I&&(4==T?GC(this.l,this):(this.i=!1,Nh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ii(12)):(this.o=0,ii(13)),Oh(this),Ph(this)}}}catch(T){}},Xe.fb=function(){if(this.g){var n=du(this.g),e=this.g.ga();this.C<e.length&&(Ap(this),Fv(this,n,e),this.i&&4!=n&&Nh(this))}},Xe.cancel=function(){this.I=!0,Oh(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function xv(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(zm(3),ii(17)),Oh(this),this.o=2,Ph(this)):Lv(this,this.Y-n)},(Xe=kh.prototype).R=function(){tr(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return tr(this),this.g.concat()},Xe.get=function(n,e){return yl(this.h,n)?this.h[n]:e},Xe.set=function(n,e){yl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var AC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof vl){this.g=void 0!==e?e:n.g,Sp(this,n.j),this.s=n.s,xp(this,n.i),lu(this,n.m),this.l=n.l,e=n.h;var t=new $i;t.i=e.i,e.g&&(t.g=new kh(e.g),t.h=e.h),SC(this,t),this.o=n.o}else n&&(t=String(n).match(AC))?(this.g=!!e,Sp(this,t[1]||"",!0),this.s=t_(t[2]||""),xp(this,t[3]||"",!0),lu(this,t[4]),this.l=t_(t[5]||"",!0),SC(this,t[6]||"",!0),this.o=t_(t[7]||"")):(this.g=!!e,this.h=new $i(null,this.g))}function uu(n){return new vl(n)}function Sp(n,e,t){n.j=t?t_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function xp(n,e,t){n.i=t?t_(e,!0):e}function lu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function SC(n,e,t){e instanceof $i?(n.h=e,function bT(n,e){e&&!n.j&&(cu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Bv(this,r),RC(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Fh(e,ha)),n.h=new $i(e,n.g))}function xn(n,e,t){n.h.set(e,t)}function Mp(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function t_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Uv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Uv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}vl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fh(e,Ro,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fh(e,Ro,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fh(t,"/"==t.charAt(0)?IT:CT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fh(t,No)),n.join("")};var Ro=/[#\/\?@]/g,CT=/[#\?:]/g,IT=/[#\?]/g,ha=/[#\?@]/g,No=/#/g;function $i(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function cu(n){n.g||(n.g=new kh,n.h=0,n.i&&function ET(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Bv(n,e){cu(n),e=Lh(n,e),yl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,yl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&tr(n)))}function MC(n,e){return cu(n),e=Lh(n,e),yl(n.g.h,e)}function RC(n,e,t){Bv(n,e),0<t.length&&(n.i=null,n.g.set(Lh(n,e),mv(t)),n.h+=t.length)}function Lh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Vh(n){this.l=n||DT,n=bt.PerformanceNavigationTiming?0<(n=bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(bt.g&&bt.g.Ea&&bt.g.Ea()&&bt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=$i.prototype).add=function(n,e){cu(this),this.i=null,n=Lh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){cu(this),this.g.forEach(function(t,r){iC(t,function(i){n.call(e,i,r,this)},this)},this)},Xe.T=function(){cu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Xe.R=function(n){cu(this);var e=[];if("string"==typeof n)MC(this,n)&&(e=sC(e,this.g.get(Lh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=sC(e,n[t])}return e},Xe.set=function(n,e){return cu(this),this.i=null,MC(this,n=Lh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var DT=10;function Hv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function NC(n){return n.h?1:n.g?n.g.size:0}function n_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function r_(n,e){n.g?n.g.add(e):n.h=e}function Rp(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function PC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return mv(n.i)}function i_(){}function OC(){this.g=new i_}function $v(n,e,t){const r=t||"";try{e_(n,function(i,a){let l=i;Hi(i)&&(l=bv(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Np(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Uh(n){this.l=n.$b||null,this.j=n.ib||!1}function Pp(n,e){Lr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=o_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vh.prototype.cancel=function(){if(this.i=PC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},i_.prototype.stringify=function(n){return bt.JSON.stringify(n,void 0)},i_.prototype.parse=function(n){return bt.JSON.parse(n,void 0)},Fr(Uh,Ym),Uh.prototype.g=function(){return new Pp(this.l,this.j)},Uh.prototype.i=function(n){return function(){return n}}({}),Fr(Pp,Lr);var o_=0;function Gv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Bh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jh(n)}function jh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Pp.prototype).open=function(n,e){if(this.readyState!=o_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jh(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||bt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bh(this)),this.readyState=o_},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jh(this)),this.g&&(this.readyState=3,jh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==bt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bh(this):jh(this),3==this.readyState&&Gv(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,Bh(this))},Xe.Ta=function(n){this.g&&(this.response=n,Bh(this))},Xe.ha=function(){this.g&&Bh(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Pp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var kC=bt.JSON.parse;function hr(n){Lr.call(this),this.headers=new kh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=FC,this.K=this.L=!1}Fr(hr,Lr);var FC="",TT=/^https?$/i,AT=["POST","PUT"];function xT(n){return"content-type"==n.toLowerCase()}function LC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,VC(n),a_(n)}function VC(n){n.D||(n.D=!0,Vr(n,"complete"),Vr(n,"error"))}function UC(n){if(n.h&&void 0!==fv&&(!n.C[1]||4!=du(n)||2!=n.ba()))if(n.v&&4==du(n))Hm(n.Fa,0,n);else if(Vr(n,"readystatechange"),4==du(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(AC)[1]||null;if(!i&&bt.self&&bt.self.location){var a=bt.self.location.protocol;i=a.substr(0,a.length-1)}r=!TT.test(i?i.toLowerCase():"")}t=r}if(t)Vr(n,"complete"),Vr(n,"success");else{n.m=6;try{var l=2<du(n)?n.g.statusText:""}catch(_){l=""}n.j=l+" ["+n.ba()+"]",VC(n)}}finally{a_(n)}}}function a_(n,e){if(n.g){BC(n);const t=n.g,r=n.C[0]?_p:null;n.g=null,n.C=null,e||Vr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function BC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(bt.clearTimeout(n.A),n.A=null)}function du(n){return n.g?n.g.readyState:0}function jC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case FC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Wv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function MT(n){let e="";return vp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function Op(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function HC(n){this.za=0,this.l=[],this.h=new Wm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Op("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Op("baseRetryDelayMs",5e3,n),this.$a=Op("retryDelaySeedMs",1e4,n),this.Ya=Op("forwardChannelMaxRetries",2,n),this.ra=Op("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Vh(n&&n.concurrentRequestLimit),this.Ca=new OC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function qv(n){if(zv(n),3==n.G){var e=n.V++,t=uu(n.F);xn(t,"SID",n.J),xn(t,"RID",e),xn(t,"TYPE","terminate"),Hh(n,t),(e=new xh(n,n.h,e,void 0)).K=2,e.v=Mp(uu(t)),t=!1,bt.navigator&&bt.navigator.sendBeacon&&(t=bt.navigator.sendBeacon(e.v.toString(),"")),!t&&bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Qv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Nh(e)}h_(n)}function kp(n){n.g&&(c_(n),n.g.cancel(),n.g=null)}function zv(n){kp(n),n.u&&(bt.clearTimeout(n.u),n.u=null),d_(n),n.i.cancel(),n.m&&("number"==typeof n.m&&bt.clearTimeout(n.m),n.m=null)}function u_(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Fp(n)}function Fp(n){Hv(n.i)||n.m||(n.m=!0,bh(n.Ha,n),n.C=0)}function Kv(n,e){var t;t=e?e.m:n.V++;const r=uu(n.F);xn(r,"SID",n.J),xn(r,"RID",t),xn(r,"AID",n.U),Hh(n,r),n.o&&n.s&&Wv(r,n.o,n.s),t=new xh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Zv(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),r_(n.i,t),Rh(t,r,e)}function Hh(n,e){n.j&&e_({},function(t,r){xn(e,r,t)})}function Zv(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ti(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let _=0;_<t;_++){let w=i[_].h;const T=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),f=!1;else try{$v(T,l,"req"+w+"_")}catch(A){r&&r(T)}}if(f){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Yv(n){n.g||n.u||(n.Y=1,bh(n.Ga,n),n.A=0)}function l_(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Th(ti(n.Ga,n),Hc(n,n.A)),n.A++,0))}function c_(n){null!=n.B&&(bt.clearTimeout(n.B),n.B=null)}function El(n){n.g=new xh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=uu(n.oa);xn(e,"RID","rpc"),xn(e,"SID",n.J),xn(e,"CI",n.N?"0":"1"),xn(e,"AID",n.U),Hh(n,e),xn(e,"TYPE","xmlhttp"),n.o&&n.s&&Wv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Mp(uu(e)),t.s=null,t.U=!0,Ov(t,n)}function d_(n){null!=n.v&&(bt.clearTimeout(n.v),n.v=null)}function GC(n,e){var t=null;if(n.g==e){d_(n),c_(n),n.g=null;var r=2}else{if(!n_(n.i,e))return;t=e.D,Rp(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Vr(r=jc(),new Km(r,t,e,i)),Fp(n)}else Yv(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function $C(n,e){return!(NC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Th(ti(n.Ha,n,e),Hc(n,n.C)),n.C++,0)))}(n,e)||2==r&&l_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:$h(n,5);break;case 4:$h(n,10);break;case 3:$h(n,6);break;default:$h(n,2)}}function Hc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function $h(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ti(n.jb,n);t||(t=new vl("//www.google.com/images/cleardot.gif"),bt.location&&"http"==bt.location.protocol||Sp(t,"https"),Mp(t)),function s_(n,e){const t=new Wm;if(bt.Image){const r=new Image;r.onload=pv(Np,t,r,"TestLoadImage: loaded",!0,e),r.onerror=pv(Np,t,r,"TestLoadImage: error",!1,e),r.onabort=pv(Np,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=pv(Np,t,r,"TestLoadImage: timeout",!1,e),bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ii(2);n.G=0,n.j&&n.j.va(e),h_(n),zv(n)}function h_(n){n.G=0,n.I=-1,n.j&&((0!=PC(n.i).length||0!=n.l.length)&&(n.i.i.length=0,mv(n.l),n.l.length=0),n.j.ua())}function RT(n,e,t){let r=function wT(n){return n instanceof vl?uu(n):new vl(n,void 0)}(t);if(""!=r.i)e&&xp(r,e+"."+r.i),lu(r,r.m);else{const i=bt.location;r=function xC(n,e,t,r){var i=new vl(null,void 0);return n&&Sp(i,n),e&&xp(i,e),t&&lu(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&vp(n.aa,function(i,a){xn(r,a,i)}),t=n.sa,(e=n.D)&&t&&xn(r,e,t),xn(r,"VER",n.ma),Hh(n,r),r}function Qv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hr(t&&n.Ba&&!n.qa?new Uh({ib:!0}):n.qa)).L=n.H,e}function Jv(){}function Xv(){if(fl&&!(10<=Number(cC)))throw Error("Environmental error: no available transport.")}function it(n,e){Lr.call(this),this.g=new HC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Fm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gh(this)}function WC(n){Nv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function qC(){Jm.call(this),this.status=1}function Gh(n){this.g=n}(Xe=hr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xm.g(),this.C=function Rv(n){return n.h||(n.h=n.i())}(this.u?this.u:Xm),this.g.onreadystatechange=ti(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void LC(this,a)}n=t||"";const i=new kh(this.headers);r&&e_(r,function(a,l){i.set(l,a)}),r=function lT(n){e:{var e=xT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=bt.FormData&&n instanceof bt.FormData,!(0<=rC(AT,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{BC(this),0<this.B&&((this.K=function ST(n){return fl&&function lC(){return function Lm(n){var e=uC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=yp(String(au)).split("."),t=yp("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=_v(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||_v(0==i[2].length,0==a[2].length)||_v(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ti(this.pa,this)):this.A=Hm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){LC(this,a)}},Xe.pa=function(){void 0!==fv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vr(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Vr(this,"complete"),Vr(this,"abort"),a_(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),a_(this,!0)),hr.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?UC(this):this.cb())},Xe.cb=function(){UC(this)},Xe.ba=function(){try{return 2<du(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),kC(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=HC.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new xh(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=Mo(a),ni(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Zv(this,i,e),xn(t=uu(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),Hh(this,t),this.o&&a&&Wv(t,this.o,a),r_(this.i,i),this.Ra&&xn(t,"TYPE","init"),this.ja?(xn(t,"$req",e),xn(t,"SID","null"),i.$=!0,Rh(i,t,null)):Rh(i,t,e),this.G=2}}else 3==this.G&&(n?Kv(this,n):0==this.l.length||Hv(this.i)||Kv(this))},Xe.Ga=function(){if(this.u=null,El(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Th(ti(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ii(10),kp(this),El(this))},Xe.ab=function(){null!=this.v&&(this.v=null,kp(this),l_(this),ii(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ii(2)):(this.h.info("Failed to ping google.com"),ii(1))},(Xe=Jv.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},Xv.prototype.g=function(n,e){return new it(n,e)},Fr(it,Lr),it.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),bh(ti(n.hb,n,e))),ii(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=RT(n,null,n.W),Fp(n)},it.prototype.close=function(){qv(this.g)},it.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,u_(this.g,e)}else this.v?((e={}).__data__=bv(n),u_(this.g,e)):u_(this.g,n)},it.prototype.M=function(){this.g.j=null,delete this.j,qv(this.g),delete this.g,it.Z.M.call(this)},Fr(WC,Nv),Fr(qC,Jm),Fr(Gh,Jv),Gh.prototype.xa=function(){Vr(this.g,"a")},Gh.prototype.wa=function(n){Vr(this.g,new WC(n))},Gh.prototype.va=function(n){Vr(this.g,new qC(n))},Gh.prototype.ua=function(){Vr(this.g,"b")},Xv.prototype.createWebChannel=Xv.prototype.g,it.prototype.send=it.prototype.u,it.prototype.open=it.prototype.m,it.prototype.close=it.prototype.close,Tp.NO_ERROR=0,Tp.TIMEOUT=8,Tp.HTTP_ERROR=6,Zm.COMPLETE="complete",Qm.EventType=Ah,Ah.OPEN="a",Ah.CLOSE="b",Ah.ERROR="c",Ah.MESSAGE="d",Lr.prototype.listen=Lr.prototype.N,hr.prototype.listenOnce=hr.prototype.O,hr.prototype.getLastError=hr.prototype.La,hr.prototype.getLastErrorCode=hr.prototype.Da,hr.prototype.getStatus=hr.prototype.ba,hr.prototype.getResponseJson=hr.prototype.Qa,hr.prototype.getResponseText=hr.prototype.ga,hr.prototype.send=hr.prototype.ea;var f_=hl.createWebChannelTransport=function(){return new Xv},NT=hl.getStatEventTarget=function(){return jc()},Wh=hl.ErrorCode=Tp,p_=hl.EventType=Zm,Gn=hl.Event=Bc,PT=hl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},zC=hl.FetchXmlHttpFactory=Uh,g_=hl.WebChannel=Qm,OT=hl.XhrIo=hr;const e0="@firebase/firestore";class Ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");let $c="9.8.0";const hu=new xo.Yd("@firebase/firestore");function t0(){return hu.logLevel}function ke(n,...e){if(hu.logLevel<=xo.in.DEBUG){const t=e.map(n0);hu.debug(`Firestore (${$c}): ${n}`,...t)}}function Mn(n,...e){if(hu.logLevel<=xo.in.ERROR){const t=e.map(n0);hu.error(`Firestore (${$c}): ${n}`,...t)}}function Lp(n,...e){if(hu.logLevel<=xo.in.WARN){const t=e.map(n0);hu.warn(`Firestore (${$c}): ${n}`,...t)}}function n0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${$c}) INTERNAL ASSERTION FAILED: `+n;throw Mn(e),new Error(e)}function Ct(n,e){n||st()}function ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ur.UNAUTHENTICATED))}shutdown(){}}class LT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class VT{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wn,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=l;e.enqueueRetryable((0,_e.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wn)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new qh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Ur(e)}}class ZC{constructor(e,t,r){this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class YC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new ZC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class r0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UT{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new r0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ss{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function jT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ss.A=-1;class HT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=jT(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Rt(n,e){return n<e?-1:n>e?1:0}function Vp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $T(n){return n+"\0"}class qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new qn(0,0))}static max(){return new mt(new qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function QC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function s0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class fu{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===fu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends fu{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const GT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends fu{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return GT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class zh{constructor(e){this.fields=e,e.sort(Dr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new fr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fr.EMPTY_BYTE_STRING=new fr("");const qT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wl(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=qT.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gn(n.seconds),nanos:gn(n.nanos)}}function gn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Wc(n){return"string"==typeof n?fr.fromBase64String(n):fr.fromUint8Array(n)}function m_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function JC(n){const e=n.mapValue.fields.__previous_value__;return m_(e)?JC(e):e}function Kh(n){const e=wl(n.mapValue.fields.__local_write_time__.timestampValue);return new qn(e.seconds,e.nanos)}class zT{constructor(e,t,r,i,a,l,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class fa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}function Up(n){return null==n}function qc(n){return 0===n&&1/n==-1/0}function XC(n){return"number"==typeof n&&Number.isInteger(n)&&!qc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Yt.fromString(e))}static fromName(e){return new $e(Yt.fromString(e).popFirst(5))}static empty(){return new $e(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Yt(e.slice()))}}const pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},__={nullValue:"NULL_VALUE"};function zc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?m_(n)?4:l0(n)?9007199254740991:10:st()}function pa(n,e){if(n===e)return!0;const t=zc(n);if(t!==zc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kh(n).isEqual(Kh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=wl(r.timestampValue),l=wl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Wc(n.bytesValue).isEqual(Wc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return gn(r.geoPointValue.latitude)===gn(i.geoPointValue.latitude)&&gn(r.geoPointValue.longitude)===gn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return gn(r.integerValue)===gn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=gn(r.doubleValue),l=gn(i.doubleValue);return a===l?qc(a)===qc(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Vp(n.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(QC(a)!==QC(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!pa(a[f],l[f])))return!1;return!0}(n,e);default:return st()}var i}function Kc(n,e){return void 0!==(n.values||[]).find(t=>pa(t,e))}function Cl(n,e){if(n===e)return 0;const t=zc(n),r=zc(e);if(t!==r)return Rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=gn(i.integerValue||i.doubleValue),f=gn(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return o0(n.timestampValue,e.timestampValue);case 4:return o0(Kh(n),Kh(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Wc(i),f=Wc(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let _=0;_<l.length&&_<f.length;_++){const w=Rt(l[_],f[_]);if(0!==w)return w}return Rt(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Rt(gn(i.latitude),gn(a.latitude));return 0!==l?l:Rt(gn(i.longitude),gn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let _=0;_<l.length&&_<f.length;++_){const w=Cl(l[_],f[_]);if(w)return w}return Rt(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===pu.mapValue&&a===pu.mapValue)return 0;if(i===pu.mapValue)return 1;if(a===pu.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),_=a.fields||{},w=Object.keys(_);f.sort(),w.sort();for(let T=0;T<f.length&&T<w.length;++T){const A=Rt(f[T],w[T]);if(0!==A)return A;const P=Cl(l[f[T]],_[w[T]]);if(0!==P)return P}return Rt(f.length,w.length)}(n.mapValue,e.mapValue);default:throw st()}}function o0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=wl(n),r=wl(e),i=Rt(t.seconds,r.seconds);return 0!==i?i:Rt(t.nanos,r.nanos)}function Zh(n){return a0(n)}function a0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=wl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wc(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=a0(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${a0(r.fields[f])}`;return a+"}"}(n.mapValue):st();var e}function Zc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function u0(n){return!!n&&"integerValue"in n}function Bp(n){return!!n&&"arrayValue"in n}function eI(n){return!!n&&"nullValue"in n}function tI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function y_(n){return!!n&&"mapValue"in n}function Yh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function l0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function KT(n){return"nullValue"in n?__:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zc(fa.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function ZT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zc(fa.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pu:st()}function c0(n,e){const t=Cl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function nI(n,e){const t=Cl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bi{constructor(e){this.value=e}static empty(){return new bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!y_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yh(t)}setAll(e){let t=Dr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=Yh(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());y_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];y_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new bi(Yh(this.value))}}function rI(n){const e=[];return Gc(n.fields,(t,r)=>{const i=new Dr([t]);if(y_(r)){const a=rI(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new zh(e)}class mn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new mn(e,0,mt.min(),mt.min(),bi.empty(),0)}static newFoundDocument(e,t,r){return new mn(e,1,t,mt.min(),r,0)}static newNoDocument(e,t){return new mn(e,2,t,mt.min(),bi.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,mt.min(),bi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function v_(n){return n.fields.find(e=>2===e.kind)}function gu(n){return n.fields.filter(e=>2!==e.kind)}Qh.UNKNOWN_ID=-1;class E_{constructor(e,t){this.fieldPath=e,this.kind=t}}class jp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new jp(0,to.min())}}function w_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=mt.fromTimestamp(1e9===r?new qn(t+1,0):new qn(t,r));return new to(i,$e.empty(),e)}function YT(n){return new to(n.readTime,n.key,-1)}class to{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new to(mt.min(),$e.empty(),-1)}static max(){return new to(mt.max(),$e.empty(),-1)}}function iI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Rt(n.largestBatchId,e.largestBatchId))}class zn{constructor(e,t){this.comparator=e,this.root=t||Br.EMPTY}insert(e,t){return new zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new C_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new C_(this.root,e,this.comparator,!1)}getReverseIterator(){return new C_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new C_(this.root,e,this.comparator,!0)}}class C_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Br.RED,this.left=null!=i?i:Br.EMPTY,this.right=null!=a?a:Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Br(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Br.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1,Br.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Br(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wn{constructor(e){this.comparator=e,this.data=new zn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sI(this.data.getIterator())}getIteratorFrom(e){return new sI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class sI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mu(n){return n.hasNext()?n.getNext():void 0}class QT{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.P=null}}function Yc(n,e=null,t=[],r=[],i=null,a=null,l=null){return new QT(n,e,t,r,i,a,l)}function Po(n){const e=ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Zh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Up(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zh(r)).join(",")),e.P=t}return e.P}function I_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!h0(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!pa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eA(n.startAt,e.startAt)&&eA(n.endAt,e.endAt)}function Hp(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function b_(n,e){return n.filters.filter(t=>t instanceof si&&t.field.isEqual(e))}function oI(n,e,t){let r=__,i=!0;for(const a of b_(n,e)){let l=__,f=!0;switch(a.op){case"<":case"<=":l=KT(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=__}c0({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];c0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function aI(n,e,t){let r=pu,i=!0;for(const a of b_(n,e)){let l=pu,f=!0;switch(a.op){case">=":case">":l=ZT(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=pu}nI({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];nI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class si extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new uI(e,t,r):"array-contains"===t?new Gp(e,r):"in"===t?new XT(e,r):"not-in"===t?new cI(e,r):"array-contains-any"===t?new dI(e,r):new si(e,t,r)}static V(e,t,r){return"in"===t?new lI(e,r):new d0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Cl(t,this.value)):null!==t&&zc(this.value)===zc(t)&&this.v(Cl(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class uI extends si{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class lI extends si{constructor(e,t){super(e,"in",t),this.keys=$p(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class d0 extends si{constructor(e,t){super(e,"not-in",t),this.keys=$p(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $p(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class Gp extends si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bp(t)&&Kc(t.arrayValue,this.value)}}class XT extends si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Kc(this.value.arrayValue,t)}}class cI extends si{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Kc(this.value.arrayValue,t)}}class dI extends si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Kc(this.value.arrayValue,r))}}class Il{constructor(e,t){this.position=e,this.inclusive=t}}class Jh{constructor(e,t="asc"){this.field=e,this.dir=t}}function h0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function hI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?$e.comparator($e.fromName(l.referenceValue),t.key):Cl(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function eA(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pa(n.position[t],e.position[t]))return!1;return!0}class _u{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=_,this.D=null,this.C=null}}function fI(n,e,t,r,i,a,l,f){return new _u(n,e,t,r,i,a,l,f)}function Oo(n){return new _u(n)}function bl(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function gI(n){for(const e of n.filters)if(e.S())return e.field;return null}function D_(n){return null!==n.collectionGroup}function Xh(n){const e=ze(n);if(null===e.D){e.D=[];const t=gI(e),r=bl(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Jh(t)),e.D.push(new Jh(Dr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Jh(Dr.keyField(),a))}}}return e.D}function ko(n){const e=ze(n);if(!e.C)if("F"===e.limitType)e.C=Yc(e.path,e.collectionGroup,Xh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Xh(e))t.push(new Jh(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Il(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Il(e.startAt.position,e.startAt.inclusive):null;e.C=Yc(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function f0(n,e,t){return new _u(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function T_(n,e){return I_(ko(n),ko(e))&&n.limitType===e.limitType}function p0(n){return`${Po(ko(n))}|lt:${n.limitType}`}function Wp(n){return`Query(target=${function JT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Zh(r.value)}`;var r}).join(", ")}]`),Up(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Zh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Zh(t)).join(",")),`Target(${e})`}(ko(n))}; limitType=${n.limitType})`}function g0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):$e.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=hI(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,Xh(t),r)||t.endAt&&!function(i,a,l){const f=hI(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,Xh(t),r)));var t,r}function mI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _I(n){return(e,t)=>{let r=!1;for(const i of Xh(n)){const a=tA(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function tA(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),_=l.data.field(i);return null!==f&&null!==_?Cl(f,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function yI(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function vI(n){return{integerValue:""+n}}function EI(n,e){return XC(e)?vI(e):yI(n,e)}class A_{constructor(){this._=void 0}}function nA(n,e,t){return n instanceof Qc?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Dl?m0(n,e):n instanceof Tl?_0(n,e):function(r,i){const a=ef(r,i),l=wI(a)+wI(r.k);return u0(a)&&u0(r.k)?vI(l):yI(r.M,l)}(n,e)}function rA(n,e,t){return n instanceof Dl?m0(n,e):n instanceof Tl?_0(n,e):t}function ef(n,e){return n instanceof Jc?u0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Qc extends A_{}class Dl extends A_{constructor(e){super(),this.elements=e}}function m0(n,e){const t=y0(e);for(const r of n.elements)t.some(i=>pa(i,r))||t.push(r);return{arrayValue:{values:t}}}class Tl extends A_{constructor(e){super(),this.elements=e}}function _0(n,e){let t=y0(e);for(const r of n.elements)t=t.filter(i=>!pa(i,r));return{arrayValue:{values:t}}}class Jc extends A_{constructor(e,t){super(),this.M=e,this.k=t}}function wI(n){return gn(n.integerValue||n.doubleValue)}function y0(n){return Bp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qp{constructor(e,t){this.field=e,this.transform=t}}class sA{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Al(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class S_{}function v0(n,e,t){n instanceof zp?function(r,i,a){const l=r.value.clone(),f=Kp(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Xc?function(r,i,a){if(!Al(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Kp(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(CI(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function no(n,e,t){var i;n instanceof zp?function(r,i,a){if(!Al(r.precondition,i))return;const l=r.value.clone(),f=Zp(r.fieldTransforms,a,i);l.setAll(f),i.convertToFoundDocument(tf(i),l).setHasLocalMutations()}(n,e,t):n instanceof Xc?function(r,i,a){if(!Al(r.precondition,i))return;const l=Zp(r.fieldTransforms,a,i),f=i.data;f.setAll(CI(r)),f.setAll(l),i.convertToFoundDocument(tf(i),f).setHasLocalMutations()}(n,e,t):Al(n.precondition,i=e)&&i.convertToNoDocument(mt.min())}function oA(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=ef(r.transform,i||null);null!=a&&(null==t&&(t=bi.empty()),t.set(r.field,a))}return t||null}function x_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Vp(t,r,(i,a)=>function iA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Dl&&r instanceof Dl||t instanceof Tl&&r instanceof Tl?Vp(t.elements,r.elements,pa):t instanceof Jc&&r instanceof Jc?pa(t.k,r.k):t instanceof Qc&&r instanceof Qc);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function tf(n){return n.isFoundDocument()?n.version:mt.min()}class zp extends S_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Xc extends S_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function CI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Kp(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,rA(l,f,t[i]))}return r}function Zp(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,nA(a,l,e))}return r}class Yp extends S_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class E0 extends S_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class II{constructor(e){this.count=e}}var nr,qt;function w0(n){switch(n){default:return st();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function bI(n){if(void 0===n)return Mn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case nr.OK:return ce.OK;case nr.CANCELLED:return ce.CANCELLED;case nr.UNKNOWN:return ce.UNKNOWN;case nr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case nr.INTERNAL:return ce.INTERNAL;case nr.UNAVAILABLE:return ce.UNAVAILABLE;case nr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case nr.NOT_FOUND:return ce.NOT_FOUND;case nr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case nr.ABORTED:return ce.ABORTED;case nr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case nr.DATA_LOSS:return ce.DATA_LOSS;default:return st()}}(qt=nr||(nr={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";class Sl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return s0(this.inner)}size(){return this.innerSize}}const iR=new zn($e.comparator);function cs(){return iR}const C0=new zn($e.comparator);function M_(...n){let e=C0;for(const t of n)e=e.insert(t.key,t);return e}function ed(){return new Sl(n=>n.toString(),(n,e)=>n.isEqual(e))}const I0=new zn($e.comparator),aA=new wn($e.comparator);function on(...n){let e=aA;for(const t of n)e=e.add(t);return e}const uA=new wn(Rt);function R_(){return uA}class nf{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,td.createSynthesizedTargetChangeForCurrentChange(e,t)),new nf(mt.min(),r,R_(),cs(),on())}}class td{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new td(fr.EMPTY_BYTE_STRING,t,on(),on(),on())}}class Qp{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class DI{constructor(e,t){this.targetId=e,this.$=t}}class b0{constructor(e,t,r=fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class D0{constructor(){this.B=0,this.L=A0(),this.U=fr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=on(),t=on(),r=on();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new td(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=A0()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class lA{constructor(e){this.nt=e,this.st=new Map,this.it=cs(),this.rt=T0(),this.ot=new wn(Rt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(Hp(a))if(0===r){const l=new $e(a.path);this.ct(t,l,mn.newNoDocument(l,mt.min()))}else Ct(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const f=this.wt(l);if(f){if(a.current&&Hp(f.target)){const _=new $e(f.target.path);null!==this.it.get(_)||this.It(l,_)||this.ct(l,_,mn.newNoDocument(_,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=on();this.rt.forEach((a,l)=>{let f=!0;l.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new nf(e,t,this.ot,this.it,r);return this.it=cs(),this.rt=T0(),this.ot=new wn(Rt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new D0,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new wn(Rt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new D0),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function T0(){return new zn($e.comparator)}function A0(){return new zn($e.comparator)}const cA={asc:"ASCENDING",desc:"DESCENDING"},TI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class dA{constructor(e,t){this.databaseId=e,this.N=t}}function Tr(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nd(n,e){return n.N?e.toBase64():e.toUint8Array()}function hA(n,e){return Tr(n,e.toTimestamp())}function jr(n){return Ct(!!n),mt.fromTimestamp(function(e){const t=wl(e);return new qn(t.seconds,t.nanos)}(n))}function AI(n,e){return(t=n,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function rf(n){const e=Yt.fromString(n);return Ct(LI(e)),e}function Jp(n,e){return AI(n.databaseId,e.path)}function ro(n,e){const t=rf(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(SI(t))}function S0(n,e){return AI(n.databaseId,e)}function x0(n){const e=rf(n);return 4===e.length?Yt.emptyPath():SI(e)}function Xp(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SI(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function N_(n,e,t){return{name:Jp(n,e),fields:t.value.mapValue.fields}}function M0(n,e,t){const r=ro(n,e.name),i=jr(e.updateTime),a=new bi({mapValue:{fields:e.fields}}),l=mn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function rd(n,e){let t;if(e instanceof zp)t={update:N_(n,e.key,e.value)};else if(e instanceof Yp)t={delete:Jp(n,e.key)};else if(e instanceof Xc)t={update:N_(n,e.key,e.data),updateMask:FI(e.fieldMask)};else{if(!(e instanceof E0))return st();t={verify:Jp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Qc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Dl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Tl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Jc)return{fieldPath:a.field.canonicalString(),increment:l.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:hA(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function MI(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?pr.updateTime(jr(i.updateTime)):void 0!==i.exists?pr.exists(i.exists):pr.none():pr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(Ct("REQUEST_TIME"===l.setToServerValue),f=new Qc):"appendMissingElements"in l?f=new Dl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new Tl(l.removeAllFromArray.values||[]):"increment"in l?f=new Jc(a,l.increment):st();const _=Dr.fromServerFormat(l.fieldPath);return new qp(_,f)}(n,i)):[];var i;if(e.update){const i=ro(n,e.update.name),a=new bi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new zh((e.updateMask.fieldPaths||[]).map(w=>Dr.fromServerFormat(w)));return new Xc(i,a,l,t,r)}return new zp(i,a,t,r)}if(e.delete){const i=ro(n,e.delete);return new Yp(i,t)}if(e.verify){const i=ro(n,e.verify);return new E0(i,t)}return st()}function NI(n,e){return{documents:[S0(n,e.path)]}}function R0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=S0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=S0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(T=>function(A){if("=="===A.op){if(tI(A.value))return{unaryFilter:{field:tg(A.field),op:"IS_NAN"}};if(eI(A.value))return{unaryFilter:{field:tg(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(tI(A.value))return{unaryFilter:{field:tg(A.field),op:"IS_NOT_NAN"}};if(eI(A.value))return{unaryFilter:{field:tg(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tg(A.field),op:P0(A.op),value:A.value}}}(T));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:tg((T=w).field),direction:N0(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.N||Up(w)?w:{value:w});var w,f,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function eg(n){let e=x0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=OI(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new Jh(sf((A=T).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(T){let A;return A="object"==typeof T?T.value:T,Up(A)?null:A}(t.limit));let _=null;var T;t.startAt&&(_=new Il((T=t.startAt).values||[],!!T.before));let w=null;return t.endAt&&(w=function(T){return new Il(T.values||[],!T.before)}(t.endAt)),fI(e,i,l,a,f,"F",_,w)}function OI(n){return n?void 0!==n.unaryFilter?[kI(n)]:void 0!==n.fieldFilter?[fA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>OI(e)).reduce((e,t)=>e.concat(t)):st():[]}function N0(n){return cA[n]}function P0(n){return TI[n]}function tg(n){return{fieldPath:n.canonicalString()}}function sf(n){return Dr.fromServerFormat(n.fieldPath)}function fA(n){return si.create(sf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function kI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=sf(n.unaryFilter.field);return si.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=sf(n.unaryFilter.field);return si.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=sf(n.unaryFilter.field);return si.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=sf(n.unaryFilter.field);return si.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function FI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function LI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Di(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=UI(e)),e=VI(n.get(t),e);return UI(e)}function VI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function UI(n){return n+"\x01\x01"}function ga(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Yt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&st(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:st()}a=l+2}return new Yt(r)}const O0=["userId","batchId"];function O_(n,e){return[n,Di(e)]}function k0(n,e,t){return[n,Di(e),t]}const BI={},jI=["prefixPath","collectionGroup","readTime","documentId"],HI=["prefixPath","collectionGroup","documentId"],pA=["collectionGroup","readTime","prefixPath","documentId"],gA=["canonicalId","targetId"],sR=["targetId","path"],$I=["path","targetId"],oR=["collectionId","parent"],aR=["indexId","uid"],uR=["uid","sequenceNumber"],lR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cR=["indexId","uid","orderedDocumentKey"],dR=["userId","collectionPath","documentId"],hR=["userId","collectionPath","largestBatchId"],fR=["userId","collectionGroup","largestBatchId"],ng=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pR=[...ng,"documentOverlays"],F0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],L0=[...F0,"indexConfiguration","indexState","indexEntries"],V0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class of{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Wn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new af(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=B0(r.target.error);this.At.reject(new af(e,i))}}static open(e,t,r,i){try{return new of(t,e.transaction(i,r))}catch(a){throw new af(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _A(t)}}class io{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===io.Vt((0,O.z$)())&&Mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),id(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,O.hl)())return!1;if(io.St())return!0;const e=(0,O.z$)(),t=io.Vt(e),r=0<t&&t<10,i=io.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new af(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new af(e,f))},a.onupgradeneeded=l=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.Pt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,_e.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.Nt(e);const _=of.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(T=>(_.bt(),T)).catch(T=>(_.abort(T),pe.reject(T))).toPromise();return w.catch(()=>{}),yield _.Rt,w}catch(_){const w="FirebaseError"!==_.name&&f<3;if(ke("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),a.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mA{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return id(this.Ft.delete())}}class af extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function uf(n){return"IndexedDbTransactionError"===n.name}class _A{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),id(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),id(this.store.add(e))}get(e){return id(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),id(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),id(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new pe((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,l,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new pe((r,i)=>{t.onerror=a=>{const l=B0(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}Kt(e,t){const r=[];return new pe((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const _=new mA(f),w=t(f.primaryKey,f.value,_);if(w instanceof pe){const T=w.catch(A=>(_.done(),pe.reject(A)));r.push(T)}_.isDone?i():null===_.Lt?f.continue():f.continue(_.Lt)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function id(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=B0(r.target.error);t(i)}})}let k_=!1;function B0(n){const e=io.Vt((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return k_||(k_=!0,setTimeout(()=>{throw r},0)),r}}return n}class yA extends U0{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function oi(n,e){const t=ze(n);return io.xt(t.Ht,e)}class GI{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&v0(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&no(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&no(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(mt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),on())}isEqual(e){return this.batchId===e.batchId&&Vp(this.mutations,e.mutations,(t,r)=>x_(t,r))&&Vp(this.baseMutations,e.baseMutations,(t,r)=>x_(t,r))}}class j0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=I0;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new j0(e,t,r,i)}}class H0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xl{constructor(e,t,r,i,a=mt.min(),l=mt.min(),f=fr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new xl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vA{constructor(e){this.Jt=e}}function F_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:L_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Jp(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Tr(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ai(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:ai(e.version)}}var i,a;return r}function L_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ai(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sd(n){const e=new qn(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function Ml(n,e){const t=(e.baseMutations||[]).map(a=>MI(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>MI(n.Jt,a)),i=qn.fromMillis(e.localWriteTimeMs);return new GI(e.batchId,i,t,r)}function rg(n){const e=sd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?sd(n.lastLimboFreeSnapshotVersion):mt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=ko(Oo(x0(i.documents[0])))):r=ko(eg(n.query)),new xl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,fr.fromBase64String(n.resumeToken))}function WI(n,e){const t=ai(e.snapshotVersion),r=ai(e.lastLimboFreeSnapshotVersion);let i;i=Hp(e.target)?NI(n.Jt,e.target):R0(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Po(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ig(n){const e=eg({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?f0(e,e.limit,"L"):e}function V_(n,e){return new H0(e.largestBatchId,MI(n.Jt,e.overlayMutation))}function $0(n,e){const t=e.path.lastSegment();return[n,Di(e.path.popLast()),t]}class wA{getBundleMetadata(e,t){return G0(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:sd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return G0(e).put({bundleId:(r=t).id,createTime:ai(jr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return qI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:ig(i.bundledQuery),readTime:sd(i.readTime)};var i})}saveNamedQuery(e,t){return qI(e).put({name:(r=t).name,readTime:ai(jr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function G0(n){return oi(n,"bundles")}function qI(n){return oi(n,"namedQueries")}class W0{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new W0(e,t.uid||"")}getOverlay(e,t){return sg(e).get($0(this.userId,t)).next(r=>r?V_(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new H0(t,l);i.push(this.Xt(e,f))}),pe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Di(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(sg(e).Qt("collectionPathOverlayIndex",f))}),pe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=ed(),a=Di(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return sg(e).qt("collectionPathOverlayIndex",l).next(f=>{for(const _ of f){const w=V_(this.M,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=ed();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sg(e).Wt({index:"collectionGroupOverlayIndex",range:f},(_,w,T)=>{const A=V_(this.M,w);a.size()<i||A.largestBatchId===l?(a.set(A.getKey(),A),l=A.largestBatchId):T.done()}).next(()=>a)}Xt(e,t){return sg(e).put(function(r,i,a){const[l,f,_]=$0(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:rd(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function sg(n){return oi(n,"documentOverlays")}class yu{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(gn(e.integerValue));else if("doubleValue"in e){const r=gn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),qc(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Wc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?l0(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function od(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function q0(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=od(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}yu.fe=new yu;class zI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=q0(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=q0(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class CA{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class gR{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class og{constructor(){this.De=new zI,this.Ce=new CA(this.De),this.xe=new gR(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ad{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ad(this.indexId,this.documentKey,this.arrayValue,r)}}function ud(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=z0(n.arrayValue,e.arrayValue),0!==t?t:(t=z0(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function z0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class IA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=v_(e);if(void 0!==t&&!this.Be(t))return!1;const r=gu(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class bA{constructor(){this.qe=new KI}addToCollectionParentIndex(e,t){return this.qe.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(to.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class KI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wn(Yt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wn(Yt.comparator)).toArray()}}const lf=new Uint8Array(0);class ZI{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new KI,this.Ge=new Sl(r=>Po(r),(r,i)=>I_(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:Di(i)};return YI(e).put(a)}return pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$T(t),""],!1,!0);return YI(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(ga(l.parent))}return r})}addFieldIndex(e,t){const r=ug(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=ug(e),i=cf(e),a=ag(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ag(e);let i=!0;const a=new Map;return pe.forEach(this.Qe(t),l=>this.je(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=on();const f=[];return pe.forEach(a,(_,w)=>{var T;ke("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Mt=>`${Mt.fieldPath}:${Mt.kind}`).join(",")}`} to execute ${Po(t)}`);const A=function(Mt,xt){const Kt=v_(xt);if(void 0===Kt)return null;for(const un of b_(Mt,Kt.fieldPath))switch(un.op){case"array-contains-any":return un.value.arrayValue.values||[];case"array-contains":return[un.value]}return null}(w,_),P=function(Mt,xt){const Kt=new Map;for(const un of gu(xt))for(const fs of b_(Mt,un.fieldPath))switch(fs.op){case"==":case"in":Kt.set(un.fieldPath.canonicalString(),fs.value);break;case"not-in":case"!=":return Kt.set(un.fieldPath.canonicalString(),fs.value),Array.from(Kt.values())}return null}(w,_),B=function(Mt,xt){const Kt=[];let un=!0;for(const fs of gu(xt)){const zE=0===fs.kind?oI(Mt,fs.fieldPath,Mt.startAt):aI(Mt,fs.fieldPath,Mt.startAt);Kt.push(zE.value),un&&(un=zE.inclusive)}return new Il(Kt,un)}(w,_),Y=function(Mt,xt){const Kt=[];let un=!0;for(const fs of gu(xt)){const zE=0===fs.kind?aI(Mt,fs.fieldPath,Mt.endAt):oI(Mt,fs.fieldPath,Mt.endAt);Kt.push(zE.value),un&&(un=zE.inclusive)}return new Il(Kt,un)}(w,_),De=this.We(_,w,B),je=this.We(_,w,Y),At=this.ze(_,w,P),Dt=this.He(_.indexId,A,De,B.inclusive,je,Y.inclusive,At);return pe.forEach(Dt,Mt=>r.Gt(Mt,t.limit).next(xt=>{xt.forEach(Kt=>{const un=$e.fromSegments(Kt.documentKey);l.has(un)||(l=l.add(un),f.push(un))})}))}).next(()=>f)}return pe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,a,l,f){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),T=[];for(let A=0;A<_;++A){const P=t?this.Je(t[A/w]):lf,B=this.Ye(e,P,r[A%w],i),Y=this.Xe(e,P,a[A%w],l),De=f.map(je=>this.Ye(e,P,je,!0));T.push(...this.createRange(B,Y,De))}return T}Ye(e,t,r,i){const a=new ad(e,$e.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new ad(e,$e.empty(),t,r);return i?a.ke():a}je(e,t){const r=new IA(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.$e(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;return pe.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let f=new wn(Dr.comparator),_=!1;for(const w of l.filters){const T=w;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?_=!0:f=f.add(T.field))}for(const w of l.orderBy)w.field.isKeyField()||(f=f.add(w.field));return f.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new og;for(const i of gu(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);yu.fe.Zt(a,l)}return r.Se()}Je(e){const t=new og;return yu.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new og;return yu.fe.Zt(Zc(this.databaseId,t),r.Ne(function(i){const a=gu(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new og);let a=0;for(const l of gu(e)){const f=r[a++];for(const _ of i)if(this.en(t,l.fieldPath)&&Bp(f))i=this.nn(i,l,f);else{const w=_.Ne(l.kind);yu.fe.Zt(f,w)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const _=new og;_.seed(f.Se()),yu.fe.Zt(l,_.Ne(t.kind)),a.push(_)}return a}en(e,t){return!!e.filters.find(r=>r instanceof si&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ug(e),i=cf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return pe.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{l.push(function(w,T){const A=T?new jp(T.sequenceNumber,new to(sd(T.readTime),new $e(ga(T.documentKey)),T.largestBatchId)):jp.empty(),P=w.fields.map(([B,Y])=>new E_(Dr.fromServerFormat(B),Y));return new Qh(w.indexId,w.collectionGroup,P,A)}(f,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Rt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ug(e),a=cf(e);return this.rn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>pe.forEach(f,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:ai((P=r).readTime),documentKey:Di(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?pe.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),pe.forEach(f,_=>this.on(e,i,_).next(w=>{const T=this.un(a,_);return w.isEqual(T)?pe.resolve():this.an(e,a,_,w,T)}))))})}cn(e,t,r,i){return ag(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return ag(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=ag(e);let a=new wn(ud);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(l,f)=>{a=a.add(new ad(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}un(e,t){let r=new wn(ud);const i=this.Ze(t,e);if(null==i)return r;const a=v_(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Bp(l))for(const f of l.arrayValue.values||[])r=r.add(new ad(t.indexId,e.key,this.Je(f),i))}else r=r.add(new ad(t.indexId,e.key,lf,i));return r}an(e,t,r,i,a){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,_,w,T,A){const P=f.getIterator(),B=_.getIterator();let Y=mu(P),De=mu(B);for(;Y||De;){let je=!1,At=!1;if(Y&&De){const Dt=w(Y,De);Dt<0?At=!0:Dt>0&&(je=!0)}else null!=Y?At=!0:je=!0;je?(T(De),De=mu(B)):At?(A(Y),Y=mu(P)):(Y=mu(P),De=mu(B))}}(i,a,ud,f=>{l.push(this.cn(e,t,r,f))},f=>{l.push(this.hn(e,t,r,f))}),pe.waitFor(l)}rn(e){let t=1;return cf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>ud(l,f)).filter((l,f,_)=>!f||0!==ud(l,_[f-1]));const i=[];i.push(e);for(const l of r){const f=ud(l,e),_=ud(l,t);if(0===f)i[0]=e.ke();else if(f>0&&_<0)i.push(l),i.push(l.ke());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,lf,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,lf,[]]));return a}getMinOffset(e,t){let r;return pe.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?(!r||iI(a.indexState.offset,r)<0)&&(r=a.indexState.offset):r=to.min()})).next(()=>r)}}function YI(n){return oi(n,"collectionParents")}function ag(n){return oi(n,"indexEntries")}function ug(n){return oi(n,"indexConfiguration")}function cf(n){return oi(n,"indexState")}const U_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gi(e,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function QI(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const _=r.Wt({range:l},(T,A,P)=>(f++,P.delete()));a.push(_.next(()=>{Ct(1===f)}));const w=[];for(const T of t.mutations){const A=k0(e,T.key.path,t.batchId);a.push(i.delete(A)),w.push(T.key)}return pe.waitFor(a).next(()=>w)}function lg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(41943040,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);class B_{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new B_(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rl(e).Wt({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=cg(e),l=Rl(e);return l.add({}).next(f=>{Ct("number"==typeof f);const _=new GI(f,t,r,i),w=function(P,B,Y){const De=Y.baseMutations.map(At=>rd(P.Jt,At)),je=Y.mutations.map(At=>rd(P.Jt,At));return{userId:B,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:De,mutations:je}}(this.M,this.userId,_),T=[];let A=new wn((P,B)=>Rt(P.canonicalString(),B.canonicalString()));for(const P of i){const B=k0(this.userId,P.key.path,f);A=A.add(P.key.path.popLast()),T.push(l.put(w)),T.push(a.put(B,BI))}return A.forEach(P=>{T.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[f]=_.keys()}),pe.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return Rl(e).get(t).next(r=>r?(Ct(r.userId===this.userId),Ml(this.M,r)):null)}fn(e,t){return this.ln[t]?pe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Rl(e).Wt({index:"userMutationsIndex",range:i},(l,f,_)=>{f.userId===this.userId&&(Ct(f.batchId>=r),a=Ml(this.M,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Rl(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rl(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Ml(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=O_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return cg(e).Wt({range:i},(l,f,_)=>{const[w,T,A]=l,P=ga(T);if(w===this.userId&&t.path.isEqual(P))return Rl(e).get(A).next(B=>{if(!B)throw st();Ct(B.userId===this.userId),a.push(Ml(this.M,B))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Rt);const i=[];return t.forEach(a=>{const l=O_(this.userId,a.path),f=IDBKeyRange.lowerBound(l),_=cg(e).Wt({range:f},(w,T,A)=>{const[P,B,Y]=w,De=ga(B);P===this.userId&&a.path.isEqual(De)?r=r.add(Y):A.done()});i.push(_)}),pe.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=O_(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new wn(Rt);return cg(e).Wt({range:l},(_,w,T)=>{const[A,P,B]=_,Y=ga(P);A===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(f=f.add(B)):T.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Rl(e).get(a).next(l=>{if(null===l)throw st();Ct(l.userId===this.userId),r.push(Ml(this.M,l))}))}),pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return QI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return cg(e).Wt({range:r},(a,l,f)=>{if(a[0]===this.userId){const _=ga(a[1]);i.push(_)}else f.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return JI(e,this.userId,t)}wn(e){return DA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function JI(n,e,t){const r=O_(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return cg(n).Wt({range:a,jt:!0},(f,_,w)=>{const[T,A,P]=f;T===e&&A===i&&(l=!0),w.done()}).next(()=>l)}function Rl(n){return oi(n,"mutations")}function cg(n){return oi(n,"documentMutations")}function DA(n){return oi(n,"mutationQueues")}class Nl{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Nl(0)}static yn(){return new Nl(-1)}}class TA{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Nl(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>mt.fromTimestamp(new qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>df(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return df(e).Wt((l,f)=>{const _=rg(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>pe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return df(e).Wt((r,i)=>{const a=rg(i);t(a)})}pn(e){return XI(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}In(e,t){return XI(e).put("targetGlobalKey",t)}Tn(e,t){return df(e).put(WI(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Po(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return df(e).Wt({range:i,index:"queryTargetsIndex"},(l,f,_)=>{const w=rg(f);I_(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=ld(e);return t.forEach(l=>{const f=Di(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=ld(e);return pe.forEach(t,a=>{const l=Di(a.path);return pe.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=ld(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ld(e);let a=on();return i.Wt({range:r,jt:!0},(l,f,_)=>{const w=ga(l[1]),T=new $e(w);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=Di(t.path),i=IDBKeyRange.bound([r],[$T(r)],!1,!0);let a=0;return ld(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,f],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}Et(e,t){return df(e).get(t).next(r=>r?rg(r):null)}}function df(n){return oi(n,"targets")}function XI(n){return oi(n,"targetGlobal")}function ld(n){return oi(n,"targetDocuments")}function hf(n){return eb.apply(this,arguments)}function eb(){return eb=(0,_e.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==V0)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),eb.apply(this,arguments)}function AA([n,e],[t,r]){const i=Rt(n,t);return 0===i?Rt(e,r):i}class mR{constructor(e){this.An=e,this.buffer=new wn(AA),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();AA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SA{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){uf(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield hf(i)}yield t.Sn(e)}))}}class j_{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(Ss.A);const r=new mR(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(U_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U_):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,l,f,_,w;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,l=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),t0()<=xo.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${A} documents in `+(w-_)+`ms\nTotal Duration: ${w-T}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class xA{constructor(e,t){this.db=e,this.garbageCollector=new j_(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return H_(e,r)}removeReference(e,t,r){return H_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return H_(e,t)}On(e,t){return function(r,i){let a=!1;return DA(r).zt(l=>JI(r,l,i).next(f=>(f&&(a=!0),pe.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(l,f)=>{if(f<=t){const _=this.On(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,mt.min()),ld(e).delete([0,Di(l.path)])))});i.push(_)}}).next(()=>pe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return H_(e,t)}Mn(e,t){const r=ld(e);let i,a=Ss.A;return r.Wt({index:"documentTargetsIndex"},([l,f],{path:_,sequenceNumber:w})=>{0===l?(a!==Ss.A&&t(new $e(ga(i)),a),a=w,i=_):a=Ss.A}).next(()=>{a!==Ss.A&&t(new $e(ga(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function H_(n,e){return ld(n).put((r=n.currentSequenceNumber,{targetId:0,path:Di(e.path),sequenceNumber:r}));var r}class K0{constructor(){this.changes=new Sl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cd{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return vu(e).put(r)}removeEntry(e,t,r){return vu(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],L_(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=mn.newInvalidDocument(t);return vu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(dg(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:mn.newInvalidDocument(t)};return vu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(dg(t))},(i,a)=>{r={document:this.$n(t,a),size:lg(a)}}).next(()=>r)}getEntries(e,t){let r=cs();return this.Ln(e,t,(i,a)=>{const l=this.$n(i,a);r=r.insert(i,l)}).next(()=>r)}Un(e,t){let r=cs(),i=new zn($e.comparator);return this.Ln(e,t,(a,l)=>{const f=this.$n(a,l);r=r.insert(a,f),i=i.insert(a,lg(l))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return pe.resolve();let i=new wn(W_);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(dg(i.first()),dg(i.last())),l=i.getIterator();let f=l.getNext();return vu(e).Wt({index:"documentKeyIndex",range:a},(_,w,T)=>{const A=$e.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&W_(f,A)<0;)r(f,null),f=l.getNext();f&&f.isEqual(A)&&(r(f,w),f=l.hasNext()?l.getNext():null),f?T.Ut(dg(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),L_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vu(e).qt(IDBKeyRange.bound(i,a,!0)).next(l=>{let f=cs();for(const _ of l){const w=this.$n($e.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(w.key,w)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=cs();const l=G_(t,r),f=G_(t,to.max());return vu(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(_,w,T)=>{const A=this.$n($e.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(A.key,A),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new tb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $_(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Fn(e,t){return $_(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function EA(n,e){let t;if(e.document)t=M0(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),i=sd(e.noDocument.readTime);t=mn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=$e.fromSegments(e.unknownDocument.path),i=sd(e.unknownDocument.version);t=mn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new qn(r[0],r[1]);return mt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return mn.newInvalidDocument(e)}}class tb extends K0{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Sl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new wn((a,l)=>Rt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const _=F_(this.Kn.M,l);i=i.add(a.path.popLast()),r+=lg(_)-f.size,t.push(this.Kn.addEntry(e,a,_))}else if(r-=f.size,this.trackRemovals){const _=F_(this.Kn.M,l.convertToNoDocument(mt.min()));t.push(this.Kn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,l)=>{this.Gn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function $_(n){return oi(n,"remoteDocumentGlobal")}function vu(n){return oi(n,"remoteDocumentsV14")}function dg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function G_(n,e){const t=e.documentKey.path.toArray();return[n,L_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function W_(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Rt(t[a],r[a]),i)return i;return i=Rt(t.length,r.length),i||(i=Rt(t[t.length-2],r[r.length-2]),i||Rt(t[t.length-1],r[r.length-1]))}class q_{constructor(e){this.M=e}kt(e,t,r,i){const a=new of("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O0,{unique:!0}),f.createObjectStore("documentMutations"),MA(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=pe.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),MA(e)),l=l.next(()=>function(f){const _=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,_){return _.store("mutations").qt().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O0,{unique:!0});const T=_.store("mutations"),A=w.map(P=>T.put(P));return pe.waitFor(A)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Qn(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(l=l.next(()=>this.Wn(a))),r<8&&i>=8&&(l=l.next(()=>this.zn(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Hn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:dR});_.createIndex("collectionPathOverlayIndex",hR,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",fR,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:jI});_.createIndex("documentKeyIndex",HI),_.createIndex("collectionGroupIndex",pA)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:aR}).createIndex("sequenceNumberIndex",uR,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:lR}).createIndex("documentKeyIndex",cR,{unique:!1})}(e)})),l}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=lg(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>pe.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(f=>pe.forEach(f,_=>{Ct(_.userId===a.userId);const w=Ml(this.M,_);return QI(e,a.userId,w).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((l,f)=>{const _=new Yt(l),w=[0,Di(_)];a.push(t.get(w).next(T=>T?pe.resolve():t.put({targetId:0,path:Di(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>pe.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:oR});const r=t.store("collectionParents"),i=new KI,a=l=>{if(i.add(l)){const f=l.lastSegment(),_=l.popLast();return r.put({collectionId:f,parent:Di(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,f)=>{const _=new Yt(l);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,f,_],w)=>{const T=ga(f);return a(T.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=rg(i),l=WI(this.M,a);return t.put(l)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,l)=>{const f=t.store("remoteDocumentsV14"),_=(w=l,w.document?new $e(Yt.fromString(w.document.name).popFirst(5)):w.noDocument?$e.fromSegments(w.noDocument.path):w.unknownDocument?$e.fromSegments(w.unknownDocument.path):st()).path.toArray();var w;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(T))}).next(()=>pe.waitFor(i))}}function MA(n){n.createObjectStore("targetDocuments",{keyPath:sR}).createIndex("documentTargetsIndex",$I,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gA,{unique:!0}),n.createObjectStore("targetGlobal")}const nb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rb{constructor(e,t,r,i,a,l,f,_,w,T,A=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=l,this.document=f,this.Xn=w,this.Zn=T,this.ts=A,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!rb.vt())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xA(this,i),this.hs=t+"main",this.M=new vA(_),this.ls=new io(this.hs,this.ts,new q_(this.M)),this.fs=new TA(this.referenceDelegate,this.M),this.ds=new cd(this.M),this._s=new wA,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===T&&Mn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,nb);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ss(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(uf(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return z_(e).get("owner").next(t=>pe.resolve(this.Ps(t)))}Vs(e){return hg(e).delete(this.clientId)}vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=oi(r,"clientMetadata");return i.qt().next(a=>{const l=e.Ds(a,18e5),f=a.filter(_=>-1===l.indexOf(_));return pe.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?pe.resolve(!0):z_(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,nb);return!1}}return!(!this.networkEnabled||!this.inForeground)||hg(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new yA(t,Ss.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>hg(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return B_.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new ZI(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return W0.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(l=this.ts)?L0:13===l?F0:12===l?pR:11===l?ng:void st();var l;let f;return this.ls.runTransaction(e,i,a,_=>(f=new yA(_,this.es?this.es.next():Ss.A),"readwrite-primary"===t?this.Es(f).next(w=>!!w||this.As(f)).next(w=>{if(!w)throw Mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Re(ce.FAILED_PRECONDITION,V0);return r(f)}).next(w=>this.bs(f).next(()=>w)):this.$s(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}$s(e){return z_(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,nb)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return z_(e).put("owner",t)}static vt(){return io.vt()}Rs(e){const t=z_(e);return t.get("owner").next(r=>this.Ps(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Mn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function z_(n){return oi(n,"owner")}function hg(n){return oi(n,"clientMetadata")}function Z0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class RA{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):D_(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let i=M_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=M_();return this.indexManager.getCollectionParents(e,i).next(l=>pe.forEach(l,f=>{const _=(w=t,T=f.child(i),new _u(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,T;return this.zs(e,_,r).next(w=>{w.forEach((T,A)=>{a=a.insert(T,A)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const f of l.mutations){const _=f.key;let w=i.get(_);null==w&&(w=mn.newInvalidDocument(_),i=i.insert(_,w)),no(f,w,l.localWriteTime),w.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,l)=>{g0(t,l)||(i=i.remove(a))}),i))}}class Y0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=on(),i=on();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Y0(e,t.fromCache,r,i)}}class ib{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(a=>a||this.ei(e,t,i,r)).next(a=>a||this.ni(e,t))}ti(e,t){return pe.resolve(null)}ei(e,t,r,i){return function pI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(mt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(a=>{const l=this.si(t,a);return this.ii(t,l,r,i)?this.ni(e,t):(t0()<=xo.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wp(t)),this.ri(e,l,t,w_(i,-1)))})}si(e,t){let r=new wn(_I(e));return t.forEach((i,a)=>{g0(e,a)&&(r=r.add(a))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ni(e,t){return t0()<=xo.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Wp(t)),this.Zs.Qs(e,t,to.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class sb{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new zn(Rt),this.ai=new Sl(a=>Po(a),I_),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new RA(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Q0(n,e,t,r){return new sb(n,e,t,r)}function J0(n,e){return X0.apply(this,arguments)}function X0(){return X0=(0,_e.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.li(e),t.Bs.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let _=on();for(const w of i){l.push(w.batchId);for(const T of w.mutations)_=_.add(T.key)}for(const w of a){f.push(w.batchId);for(const T of w.mutations)_=_.add(T.key)}return t.fi.Ks(r,_).next(w=>({di:w,removedBatchIds:l,addedBatchIds:f}))})})}),X0.apply(this,arguments)}function NA(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.hi.newChangeBuffer({trackRemovals:!0});return function(l,f,_,w){const T=_.batch,A=T.keys();let P=pe.resolve();return A.forEach(B=>{P=P.next(()=>w.getEntry(f,B)).next(Y=>{const De=_.docVersions.get(B);Ct(null!==De),Y.version.compareTo(De)<0&&(T.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),w.addEntry(Y)))})}),P.next(()=>l.Bs.removeMutationBatch(f,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function eE(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function tE(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const f=[];e.targetChanges.forEach((w,T)=>{const A=i.get(T);if(!A)return;f.push(t.fs.removeMatchingKeys(a,w.removedDocuments,T).next(()=>t.fs.addMatchingKeys(a,w.addedDocuments,T)));let P=A.withSequenceNumber(a.currentSequenceNumber);var B,Y,De;e.targetMismatches.has(T)?P=P.withResumeToken(fr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),i=i.insert(T,P),Y=P,De=w,(0===(B=A).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||De.addedDocuments.size+De.modifiedDocuments.size+De.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(a,P))});let _=cs();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),f.push(PA(a,l,e.documentUpdates).next(w=>{_=w})),!r.isEqual(mt.min())){const w=t.fs.getLastRemoteSnapshotVersion(a).next(T=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(w)}return pe.waitFor(f).next(()=>l.apply(a)).next(()=>t.fi.Gs(a,_)).next(()=>_)}).then(a=>(t.ui=i,a))}function PA(n,e,t){let r=on();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=cs();return t.forEach((l,f)=>{const _=i.get(l);f.isNoDocument()&&f.version.isEqual(mt.min())?(e.removeEntry(l,f.readTime),a=a.insert(l,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),a=a.insert(l,f)):ke("LocalStore","Ignoring outdated watch update for ",l,". Current version:",_.version," Watch version:",f.version)}),a})}function ob(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Pl(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,pe.resolve(i)):t.fs.allocateTargetId(r).next(l=>(i=new xl(e,l,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function ff(n,e,t){return nE.apply(this,arguments)}function nE(){return nE=(0,_e.Z)(function*(n,e,t){const r=ze(n),i=r.ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!uf(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),nE.apply(this,arguments)}function rE(n,e,t){const r=ze(n);let i=mt.min(),a=on();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,_,w){const T=ze(f),A=T.ai.get(w);return void 0!==A?pe.resolve(T.ui.get(A)):T.fs.getTargetData(_,w)}(r,l,ko(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(l,f.targetId).next(_=>{a=_})}).next(()=>r.oi.Qs(l,e,t?i:mt.min(),t?a:on())).next(f=>(ub(r,mI(e),f),{documents:f,_i:a})))}function OA(n,e){const t=ze(n),r=ze(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(l=>l?l.target:null))}function ab(n,e){const t=ze(n),r=t.ci.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,w_(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ub(t,e,i),i))}function ub(n,e,t){let r=mt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ci.set(e,r)}function lb(){return lb=(0,_e.Z)(function*(n,e,t,r){const i=ze(n);let a=on(),l=cs();for(const w of t){const T=e.wi(w.metadata.name);w.document&&(a=a.add(T));const A=e.mi(w);A.setReadTime(e.gi(w.metadata.readTime)),l=l.insert(T,A)}const f=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield Pl(i,(w=r,ko(Oo(Yt.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>PA(w,f,l).next(T=>(f.apply(w),T)).next(T=>i.fs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.fs.addMatchingKeys(w,a,_.targetId)).next(()=>i.fi.Gs(w,T)).next(()=>T)))}),lb.apply(this,arguments)}function yR(n,e){return cb.apply(this,arguments)}function cb(){return cb=(0,_e.Z)(function*(n,e,t=on()){const r=yield Pl(n,ko(ig(e.bundledQuery))),i=ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=jr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i._s.saveNamedQuery(a,e);const f=r.withResumeToken(fr.EMPTY_BYTE_STRING,l);return i.ui=i.ui.insert(f.targetId,f),i.fs.updateTargetData(a,f).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),cb.apply(this,arguments)}class vR{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return pe.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:jr(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:ig(r.bundledQuery),readTime:jr(r.readTime)}),pe.resolve();var r}}class kA{constructor(){this.overlays=new zn($e.comparator),this.Ii=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ii.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=ed(),a=t.length+1,l=new $e(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const _=f.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new zn((w,T)=>w-T);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let T=a.get(w.largestBatchId);null===T&&(T=ed(),a=a.insert(w.largestBatchId,T)),T.set(w.getKey(),w)}}const f=ed(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,T)=>f.set(w,T)),!(f.size()>=i)););return pe.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new H0(t,r));let a=this.Ii.get(t);void 0===a&&(a=on(),this.Ii.set(t,a)),this.Ii.set(t,a.add(r.key))}}class db{constructor(){this.Ti=new wn(ui.Ei),this.Ai=new wn(ui.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new ui(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new ui(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new $e(new Yt([])),r=new ui(t,e),i=new ui(t,e+1),a=[];return this.Ai.forEachInRange([r,i],l=>{this.Pi(l),a.push(l.key)}),a}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new $e(new Yt([])),r=new ui(t,e),i=new ui(t,e+1);let a=on();return this.Ai.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new ui(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ui{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return $e.comparator(e.key,t.key)||Rt(e.Ci,t.Ci)}static Ri(e,t){return Rt(e.Ci,t.Ci)||$e.comparator(e.key,t.key)}}class ER{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new wn(ui.Ei)}checkEmpty(e){return pe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.xi;this.xi++;const l=new GI(a,t,r,i);this.Bs.push(l);for(const f of i)this.Ni=this.Ni.add(new ui(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return pe.resolve(l)}lookupMutationBatch(e,t){return pe.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),a=i<0?0:i;return pe.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return pe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ui(t,0),i=new ui(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],l=>{const f=this.ki(l.Ci);a.push(f)}),pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Rt);return t.forEach(i=>{const a=new ui(i,0),l=new ui(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([a,l],f=>{r=r.add(f.Ci)})}),pe.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;$e.isDocumentKey(a)||(a=a.child(""));const l=new ui(new $e(a),0);let f=new wn(Rt);return this.Ni.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(_.Ci)),!0)},l),pe.resolve(this.Oi(f))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return pe.forEach(t.mutations,i=>{const a=new ui(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new ui(t,0),i=this.Ni.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return pe.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class wR{constructor(e){this.$i=e,this.docs=new zn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let r=cs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():mn.newInvalidDocument(i))}),pe.resolve(r)}getAllFromCollection(e,t,r){let i=cs();const a=new $e(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:f,value:{document:_}}=l.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||iI(YT(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return pe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}Bi(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new s(this)}getSize(e){return pe.resolve(this.size)}}class s extends K0{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class o{constructor(e){this.persistence=e,this.Li=new Sl(t=>Po(t),I_),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new db,this.targetCount=0,this.Ki=Nl.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),pe.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Nl(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Tn(t),pe.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Li.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Li.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),pe.waitFor(a).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),pe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.qi.containsKey(t))}}class u{constructor(e,t){this.Gi={},this.overlays={},this.es=new Ss(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new o(this),this.indexManager=new bA,this.ds=new wR(r=>this.referenceDelegate.Qi(r)),this.M=new vA(t),this._s=new vR(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new ER(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new c(this.es.next());return this.referenceDelegate.ji(),r(i).next(a=>this.referenceDelegate.Wi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}zi(e,t){return pe.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class c extends U0{constructor(e){super(),this.currentSequenceNumber=e}}class d{constructor(e){this.persistence=e,this.Hi=new db,this.Ji=null}static Yi(e){return new d(e)}get Xi(){if(this.Ji)return this.Ji;throw st()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Xi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Xi,r=>{const i=$e.fromPath(r);return this.Zi(e,i).next(a=>{a||t.removeEntry(i,mt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return pe.or([()=>pe.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function m(n,e){return`firestore_clients_${n}_${e}`}function v(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function C(n,e){return`firestore_targets_${n}_${e}`}class I{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Re(i.error.code,i.error.message))),l?new I(e,t,i.state,a):(Mn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class x{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Re(r.error.code,r.error.message))),a?new x(e,r.state,i):(Mn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class M{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=R_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=XC(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new M(e,a):(Mn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class L{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new L(t.clientId,t.onlineState):(Mn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class j{constructor(){this.activeTargetIds=R_()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new zn(Rt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=m(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new j),this.dr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const a=e.getItem(m(e.persistenceKey,i));if(a){const l=M.tr(i,a);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(C(this.persistenceKey,e));if(r){const i=x.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(C(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Mn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(a){let l=Ss.A;if(null!=a)try{const f=JSON.parse(a);Ct("number"==typeof f),l=f}catch(f){Mn("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Ss.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new I(this.currentUser,e,t,r),a=v(this.persistenceKey,this.currentUser,e);this.setItem(a,i.er())}Ar(e){const t=v(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=C(this.persistenceKey,e),a=new x(e,t,r);this.setItem(i,a.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return M.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return I.tr(new Ur(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return x.tr(i,t)}pr(e){return L.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),l=[],f=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.Lr(l,f).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=R_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class ye{constructor(){this.Ur=new j,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new j,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fe{Kr(e){}shutdown(){}}class He{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const rt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Se{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class ft extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const l=this.ho(e,t);ke("RestConnection","Sending: ",l,r);const f={};return this.lo(f,i,a),this.fo(e,l,f,r).then(_=>(ke("RestConnection","Received: ",_),_),_=>{throw Lp("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,i,a){return this.co(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$c,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.uo}/v1/${t}:${rt[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const f=new OT;f.listenOnce(p_.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Wh.NO_ERROR:const w=f.getResponseJson();ke("Connection","XHR received:",JSON.stringify(w)),a(w);break;case Wh.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),l(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const T=f.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',T,"response text:",f.getResponseText()),T>0){const A=f.getResponseJson().error;if(A&&A.status&&A.message){const P=function(B){const Y=B.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Y)>=0?Y:ce.UNKNOWN}(A.status);l(new Re(P,A.message))}else l(new Re(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=f_(),l=NT(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new zC({})),this.lo(f.initMessageHeaders,t,r),(0,O.uI)()||(0,O.b$)()||(0,O.d)()||(0,O.w1)()||(0,O.Mn)()||(0,O.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");ke("Connection","Creating WebChannel: "+_,f);const w=a.createWebChannel(_,f);let T=!1,A=!1;const P=new Se({Jr:Y=>{A?ke("Connection","Not sending because WebChannel is closed:",Y):(T||(ke("Connection","Opening WebChannel transport."),w.open(),T=!0),ke("Connection","WebChannel sending:",Y),w.send(Y))},Yr:()=>w.close()}),B=(Y,De,je)=>{Y.listen(De,At=>{try{je(At)}catch(Dt){setTimeout(()=>{throw Dt},0)}})};return B(w,g_.EventType.OPEN,()=>{A||ke("Connection","WebChannel transport opened.")}),B(w,g_.EventType.CLOSE,()=>{A||(A=!0,ke("Connection","WebChannel transport closed"),P.ro())}),B(w,g_.EventType.ERROR,Y=>{A||(A=!0,Lp("Connection","WebChannel transport errored:",Y),P.ro(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),B(w,g_.EventType.MESSAGE,Y=>{var De;if(!A){const je=Y.data[0];Ct(!!je);const At=je,Dt=At.error||(null===(De=At[0])||void 0===De?void 0:De.error);if(Dt){ke("Connection","WebChannel received error:",Dt);const Mt=Dt.status;let xt=function(un){const fs=nr[un];if(void 0!==fs)return bI(fs)}(Mt),Kt=Dt.message;void 0===xt&&(xt=ce.INTERNAL,Kt="Unknown error status: "+Mt+" with message "+Dt.message),A=!0,P.ro(new Re(xt,Kt)),w.close()}else ke("Connection","WebChannel received:",je),P.oo(je)}}),B(l,Gn.STAT_EVENT,Y=>{Y.stat===PT.PROXY?ke("Connection","Detected buffering proxy"):Y.stat===PT.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.io()},0),P}}function Ut(){return"undefined"!=typeof window?window:null}function Jt(){return"undefined"!=typeof document?document:null}function li(n){return new dA(n,!0)}class Eu{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class K_{constructor(e,t,r,i,a,l,f,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Eu(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,_e.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,_e.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Mn(t.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iE extends K_{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function P_(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),i=e.targetChange.targetIds||[],a=function(_,w){return _.N?(Ct(void 0===w||"string"==typeof w),fr.fromBase64String(w||"")):(Ct(void 0===w||w instanceof Uint8Array),fr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(_){const w=void 0===_.code?ce.UNKNOWN:bI(_.code);return new Re(w,_.message||"")}(l);t=new b0(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=ro(n,r.document.name),a=jr(r.document.updateTime),l=new bi({mapValue:{fields:r.document.fields}}),f=mn.newFoundDocument(i,a,l);t=new Qp(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=ro(n,r.document),a=r.readTime?jr(r.readTime):mt.min(),l=mn.newNoDocument(i,a);t=new Qp([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ro(n,r.document);t=new Qp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,a=new II(r.count||0);t=new DI(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return mt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?mt.min():a.readTime?jr(a.readTime):mt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Xp(this.M),t.addTarget=function(i,a){let l;const f=a.target;return l=Hp(f)?{documents:NI(i,f)}:{query:R0(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=nd(i,a.resumeToken):a.snapshotVersion.compareTo(mt.min())>0&&(l.readTime=Tr(i,a.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function PI(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Xp(this.M),t.removeTarget=e,this.Lo(t)}}class sE extends K_{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function RI(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let a=jr(r.updateTime?r.updateTime:i);return a.isEqual(mt.min())&&(a=jr(i)),new sA(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.tu(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Xp(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rd(this.M,r))};this.Lo(t)}}class oE extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ce.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So._o(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ce.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class aE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Mn(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class uE{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr(f=>{r.enqueueAndForget((0,_e.Z)(function*(){var _;pf(l)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,_e.Z)(function*(w){const T=ze(w);T.wu.add(4),yield Ol(T),T.yu.set("Unknown"),T.wu.delete(4),yield dd(T)}),function(w){return _.apply(this,arguments)})(l))}))}),this.yu=new aE(r,i)}}function dd(n){return fg.apply(this,arguments)}function fg(){return fg=(0,_e.Z)(function*(n){if(pf(n))for(const e of n.mu)yield e(!0)}),fg.apply(this,arguments)}function Ol(n){return FA.apply(this,arguments)}function FA(){return FA=(0,_e.Z)(function*(n){for(const e of n.mu)yield e(!1)}),FA.apply(this,arguments)}function hb(n,e){const t=ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),UA(t)?VA(t):Y_(t).Mo()&&LA(t,e))}function lE(n,e){const t=ze(n),r=Y_(t);t._u.delete(e),r.Mo()&&CR(t,e),0===t._u.size&&(r.Mo()?r.$o():pf(t)&&t.yu.set("Unknown"))}function LA(n,e){n.pu.Z(e.targetId),Y_(n).Ho(e)}function CR(n,e){n.pu.Z(e),Y_(n).Jo(e)}function VA(n){n.pu=new lA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Y_(n).start(),n.yu.au()}function UA(n){return pf(n)&&!Y_(n).ko()&&n._u.size>0}function pf(n){return 0===ze(n).wu.size}function IR(n){n.pu=void 0}function Lk(n){return BA.apply(this,arguments)}function BA(){return BA=(0,_e.Z)(function*(n){n._u.forEach((e,t)=>{LA(n,e)})}),BA.apply(this,arguments)}function Vk(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,_e.Z)(function*(n,e){IR(n),UA(n)?(n.yu.lu(e),VA(n)):n.yu.set("Unknown")}),jA.apply(this,arguments)}function Uk(n,e,t){return HA.apply(this,arguments)}function HA(){return HA=(0,_e.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof b0&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i._u.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i._u.delete(f),i.pu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fb(n,r)}else if(e instanceof Qp?n.pu.ut(e):e instanceof DI?n.pu._t(e):n.pu.ht(e),!t.isEqual(mt.min()))try{const r=yield eE(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.pu.yt(a);return l.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const w=i._u.get(_);w&&i._u.set(_,w.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const _=i._u.get(f);if(!_)return;i._u.set(f,_.withResumeToken(fr.EMPTY_BYTE_STRING,_.snapshotVersion)),CR(i,f);const w=new xl(_.target,f,1,_.sequenceNumber);LA(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield fb(n,r)}var r}),HA.apply(this,arguments)}function fb(n,e,t){return $A.apply(this,arguments)}function $A(){return $A=(0,_e.Z)(function*(n,e,t){if(!uf(e))throw e;n.wu.add(1),yield Ol(n),n.yu.set("Offline"),t||(t=()=>eE(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield dd(n)}))}),$A.apply(this,arguments)}function bR(n,e){return e().catch(t=>fb(n,t,e))}function Z_(n){return GA.apply(this,arguments)}function GA(){return GA=(0,_e.Z)(function*(n){const e=ze(n),t=gf(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Bk(e);)try{const i=yield ob(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,jk(e,i)}catch(i){yield fb(e,i)}DR(e)&&TR(e)}),GA.apply(this,arguments)}function Bk(n){return pf(n)&&n.du.length<10}function jk(n,e){n.du.push(e);const t=gf(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function DR(n){return pf(n)&&!gf(n).ko()&&n.du.length>0}function TR(n){gf(n).start()}function Hk(n){return WA.apply(this,arguments)}function WA(){return WA=(0,_e.Z)(function*(n){gf(n).nu()}),WA.apply(this,arguments)}function $k(n){return qA.apply(this,arguments)}function qA(){return qA=(0,_e.Z)(function*(n){const e=gf(n);for(const t of n.du)e.Zo(t.mutations)}),qA.apply(this,arguments)}function Gk(n,e,t){return zA.apply(this,arguments)}function zA(){return zA=(0,_e.Z)(function*(n,e,t){const r=n.du.shift(),i=j0.from(r,e,t);yield bR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Z_(n)}),zA.apply(this,arguments)}function Wk(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,_e.Z)(function*(n,e){var t;e&&gf(n).Xo&&(yield(t=(0,_e.Z)(function*(r,i){if(w0(a=i.code)&&a!==ce.ABORTED){const l=r.du.shift();gf(r).Fo(),yield bR(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Z_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),DR(n)&&TR(n)}),KA.apply(this,arguments)}function AR(n,e){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,_e.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=pf(t);t.wu.add(3),yield Ol(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield dd(t)}),ZA.apply(this,arguments)}function YA(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,_e.Z)(function*(n,e){const t=ze(n);e?(t.wu.delete(2),yield dd(t)):e||(t.wu.add(2),yield Ol(t),t.yu.set("Unknown"))}),QA.apply(this,arguments)}function Y_(n){return n.Iu||(n.Iu=function(e,t,r){const i=ze(e);return i.iu(),new iE(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Lk.bind(null,n),eo:Vk.bind(null,n),zo:Uk.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Fo(),UA(n)?VA(n):n.yu.set("Unknown")):(yield n.Iu.stop(),IR(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function gf(n){return n.Tu||(n.Tu=function(e,t,r){const i=ze(e);return i.iu(),new sE(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Hk.bind(null,n),eo:Wk.bind(null,n),eu:$k.bind(null,n),tu:Gk.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Tu.Fo(),yield Z_(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class JA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new JA(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Q_(n,e){if(Mn("AsyncQueue",`${e}: ${n}`),uf(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class J_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=M_(),this.sortedSet=new zn(this.comparator)}static emptySet(e){return new J_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof J_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new J_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class SR{constructor(){this.Eu=new zn($e.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):st():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class X_{constructor(e,t,r,i,a,l,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new X_(e,t,J_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&T_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class qk{constructor(){this.Ru=void 0,this.listeners=[]}}class zk{constructor(){this.queries=new Sl(e=>p0(e),T_),this.onlineState="Unknown",this.bu=new Set}}function XA(n,e){return eS.apply(this,arguments)}function eS(){return eS=(0,_e.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new qk),i)try{a.Ru=yield t.onListen(r)}catch(l){const f=Q_(l,`Initialization of query '${Wp(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.Vu(a.Ru)&&rS(t)}),eS.apply(this,arguments)}function tS(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,_e.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),nS.apply(this,arguments)}function Kk(n,e){const t=ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Vu(i)&&(r=!0);l.Ru=i}}r&&rS(t)}function Zk(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function rS(n){n.bu.forEach(e=>{e.next()})}class iS{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new X_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=X_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Yk{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class xR{constructor(e){this.M=e}wi(e){return ro(this.M,e)}mi(e){return e.metadata.exists?M0(this.M,e.document,!1):mn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return jr(e)}}class Qk{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=MR(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Yt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new xR(this.M);for(const i of e)if(i.metadata.queries){const a=r.wi(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||on()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function _R(n,e,t,r){return lb.apply(this,arguments)}(e.localStore,new xR(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield yR(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function MR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class RR{constructor(e){this.key=e}}class NR{constructor(e){this.key=e}}class PR{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=on(),this.mutatedKeys=on(),this.Gu=_I(e),this.Qu=new J_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new SR,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,A)=>{const P=i.get(T),B=g0(this.query,A)?A:null,Y=!!P&&this.mutatedKeys.has(P.key),De=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let je=!1;P&&B?P.data.isEqual(B.data)?Y!==De&&(r.track({type:3,doc:B}),je=!0):this.Hu(P,B)||(r.track({type:2,doc:B}),je=!0,(_&&this.Gu(B,_)>0||w&&this.Gu(B,w)<0)&&(f=!0)):!P&&B?(r.track({type:0,doc:B}),je=!0):P&&!B&&(r.track({type:1,doc:P}),je=!0,(_||w)&&(f=!0)),je&&(B?(l=l.add(B),a=De?a.add(T):a.delete(T)):(l=l.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Qu:l,zu:r,ii:f,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((w,T)=>function(A,P){const B=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return B(A)-B(P)}(w.type,T.type)||this.Gu(w.doc,T.doc)),this.Ju(r);const l=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,_=f!==this.qu;return this.qu=f,0!==a.length||_?{snapshot:new X_(this.query,e.Qu,i,a,e.mutatedKeys,0===f,_,!1),Xu:l}:{Xu:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new SR,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=on(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new NR(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new RR(r))}),t}ta(e){this.Uu=e._i,this.Ku=on();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return X_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Jk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Xk{constructor(e){this.key=e,this.na=!1}}class e1{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sa={},this.ia=new Sl(f=>p0(f),T_),this.ra=new Map,this.oa=new Set,this.ua=new zn($e.comparator),this.aa=new Map,this.ca=new db,this.ha={},this.la=new Map,this.fa=Nl.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function t1(n,e){return sS.apply(this,arguments)}function sS(){return sS=(0,_e.Z)(function*(n,e){const t=SS(n);let r,i;const a=t.ia.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ea();else{const l=yield Pl(t.localStore,ko(e));t.isPrimaryClient&&hb(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield oS(t,e,r,"current"===f)}return i}),sS.apply(this,arguments)}function oS(n,e,t,r){return aS.apply(this,arguments)}function aS(){return aS=(0,_e.Z)(function*(n,e,t,r){n._a=(T,A,P)=>{return(B=(0,_e.Z)(function*(Y,De,je,At){let Dt=De.view.Wu(je);Dt.ii&&(Dt=yield rE(Y.localStore,De.query,!1).then(({documents:Kt})=>De.view.Wu(Kt,Dt)));const Mt=At&&At.targetChanges.get(De.targetId),xt=De.view.applyChanges(Dt,Y.isPrimaryClient,Mt);return _S(Y,De.targetId,xt.Xu),xt.snapshot}),function(Y,De,je,At){return B.apply(this,arguments)})(n,T,A,P);var B};const i=yield rE(n.localStore,e,!0),a=new PR(e,i._i),l=a.Wu(i.documents),f=td.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(l,n.isPrimaryClient,f);_S(n,t,_.Xu);const w=new Jk(e,t,a);return n.ia.set(e,w),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),aS.apply(this,arguments)}function n1(n,e){return uS.apply(this,arguments)}function uS(){return uS=(0,_e.Z)(function*(n,e){const t=ze(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(a=>!T_(a,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ff(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),lE(t.remoteStore,r.targetId),ey(t,r.targetId)}).catch(hf))):(ey(t,r.targetId),yield ff(t.localStore,r.targetId,!0))}),uS.apply(this,arguments)}function lS(){return lS=(0,_e.Z)(function*(n,e,t){const r=xS(n);try{const i=yield function(a,l){const f=ze(a),_=qn.now(),w=l.reduce((A,P)=>A.add(P.key),on());let T;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>f.fi.Ks(A,w).next(P=>{T=P;const B=[];for(const Y of l){const De=oA(Y,T.get(Y.key));null!=De&&B.push(new Xc(Y.key,De,rI(De.value.mapValue),pr.exists(!0)))}return f.Bs.addMutationBatch(A,_,B,l)})).then(A=>(A.applyToLocalDocumentSet(T),{batchId:A.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let _=a.ha[a.currentUser.toKey()];_||(_=new zn(Rt)),_=_.insert(l,f),a.ha[a.currentUser.toKey()]=_}(r,i.batchId,t),yield hd(r,i.changes),yield Z_(r.remoteStore)}catch(i){const a=Q_(i,"Failed to persist write");t.reject(a)}}),lS.apply(this,arguments)}function OR(n,e){return cS.apply(this,arguments)}function cS(){return cS=(0,_e.Z)(function*(n,e){const t=ze(n);try{const r=yield tE(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.aa.get(a);l&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.na=!0:i.modifiedDocuments.size>0?Ct(l.na):i.removedDocuments.size>0&&(Ct(l.na),l.na=!1))}),yield hd(t,r,e)}catch(r){yield hf(r)}}),cS.apply(this,arguments)}function kR(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((a,l)=>{const f=l.view.Pu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=ze(a);f.onlineState=l;let _=!1;f.queries.forEach((w,T)=>{for(const A of T.listeners)A.Pu(l)&&(_=!0)}),_&&rS(f)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function i1(n,e,t){return dS.apply(this,arguments)}function dS(){return dS=(0,_e.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),a=i&&i.key;if(a){let l=new zn($e.comparator);l=l.insert(a,mn.newNoDocument(a,mt.min()));const f=on().add(a),_=new nf(mt.min(),new Map,new wn(Rt),l,f);yield OR(r,_),r.ua=r.ua.remove(a),r.aa.delete(e),yS(r)}else yield ff(r.localStore,e,!1).then(()=>ey(r,e,t)).catch(hf)}),dS.apply(this,arguments)}function s1(n,e){return hS.apply(this,arguments)}function hS(){return hS=(0,_e.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const i=yield NA(t.localStore,e);mS(t,r,null),gS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hd(t,i)}catch(i){yield hf(i)}}),hS.apply(this,arguments)}function o1(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,_e.Z)(function*(n,e,t){const r=ze(n);try{const i=yield function(a,l){const f=ze(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return f.Bs.lookupMutationBatch(_,l).next(T=>(Ct(null!==T),w=T.keys(),f.Bs.removeMutationBatch(_,T))).next(()=>f.Bs.performConsistencyCheck(_)).next(()=>f.fi.Ks(_,w))})}(r.localStore,e);mS(r,e,t),gS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hd(r,i)}catch(i){yield hf(i)}}),fS.apply(this,arguments)}function pS(){return pS=(0,_e.Z)(function*(n,e){const t=ze(n);pf(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=ze(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=Q_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),pS.apply(this,arguments)}function gS(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function mS(n,e,t){const r=ze(n);let i=r.ha[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function ey(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||FR(n,r)})}function FR(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(lE(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),yS(n))}function _S(n,e,t){for(const r of t)r instanceof RR?(n.ca.addReference(r.key,e),u1(n,r)):r instanceof NR?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||FR(n,r.key)):st()}function u1(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oa.add(r),yS(n))}function yS(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new $e(Yt.fromString(e)),r=n.fa.next();n.aa.set(r,new Xk(t)),n.ua=n.ua.insert(t,r),hb(n.remoteStore,new xl(ko(Oo(t.path)),r,2,Ss.A))}}function hd(n,e,t){return vS.apply(this,arguments)}function vS(){return vS=(0,_e.Z)(function*(n,e,t){const r=ze(n),i=[],a=[],l=[];var f;r.ia.isEmpty()||(r.ia.forEach((f,_)=>{l.push(r._a(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const T=Y0.Ys(_.targetId,w);a.push(T)}}))}),yield Promise.all(l),r.sa.zo(i),yield(f=(0,_e.Z)(function*(_,w){const T=ze(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>pe.forEach(w,P=>pe.forEach(P.Hs,B=>T.persistence.referenceDelegate.addReference(A,P.targetId,B)).next(()=>pe.forEach(P.Js,B=>T.persistence.referenceDelegate.removeReference(A,P.targetId,B)))))}catch(A){if(!uf(A))throw A;ke("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const P=A.targetId;if(!A.fromCache){const B=T.ui.get(P),De=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);T.ui=T.ui.insert(P,De)}}}),function(_,w){return f.apply(this,arguments)})(r.localStore,a))}),vS.apply(this,arguments)}function l1(n,e){return ES.apply(this,arguments)}function ES(){return ES=(0,_e.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield J0(t.localStore,e);t.currentUser=e,(i=t).la.forEach(l=>{l.forEach(f=>{f.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hd(t,r.di)}var i}),ES.apply(this,arguments)}function c1(n,e){const t=ze(n),r=t.aa.get(e);if(r&&r.na)return on().add(r.key);{let i=on();const a=t.ra.get(e);if(!a)return i;for(const l of a){const f=t.ia.get(l);i=i.unionWith(f.view.ju)}return i}}function d1(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,_e.Z)(function*(n,e){const t=ze(n),r=yield rE(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&_S(t,e.targetId,i.Xu),i}),wS.apply(this,arguments)}function h1(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,_e.Z)(function*(n,e){const t=ze(n);return ab(t.localStore,e).then(r=>hd(t,r))}),CS.apply(this,arguments)}function f1(n,e,t,r){return IS.apply(this,arguments)}function IS(){return IS=(0,_e.Z)(function*(n,e,t,r){const i=ze(n),a=yield function(l,f){const _=ze(l),w=ze(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>w.fn(T,f).next(A=>A?_.fi.Ks(T,A):pe.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Z_(i.remoteStore):"acknowledged"===t||"rejected"===t?(mS(i,e,r||null),gS(i,e),f=e,ze(ze(i.localStore).Bs)._n(f)):st(),yield hd(i,a)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),IS.apply(this,arguments)}function bS(){return bS=(0,_e.Z)(function*(n,e){const t=ze(n);if(SS(t),xS(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield LR(t,r.toArray());t.da=!0,yield YA(t.remoteStore,!0);for(const a of i)hb(t.remoteStore,a)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(ey(t,l),ff(t.localStore,l,!0))),lE(t.remoteStore,l)}),yield i,yield LR(t,r),function(a){const l=ze(a);l.aa.forEach((f,_)=>{lE(l.remoteStore,_)}),l.ca.Si(),l.aa=new Map,l.ua=new zn($e.comparator)}(t),t.da=!1,yield YA(t.remoteStore,!1)}}),bS.apply(this,arguments)}function LR(n,e,t){return DS.apply(this,arguments)}function DS(){return DS=(0,_e.Z)(function*(n,e,t){const r=ze(n),i=[],a=[];for(const l of e){let f;const _=r.ra.get(l);if(_&&0!==_.length){f=yield Pl(r.localStore,ko(_[0]));for(const w of _){const T=r.ia.get(w),A=yield d1(r,T);A.snapshot&&a.push(A.snapshot)}}else{const w=yield OA(r.localStore,l);f=yield Pl(r.localStore,w),yield oS(r,VR(w),l,!1)}i.push(f)}return r.sa.zo(a),i}),DS.apply(this,arguments)}function VR(n){return fI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g1(n){const e=ze(n);return ze(ze(e.localStore).persistence).Fs()}function m1(n,e,t,r){return TS.apply(this,arguments)}function TS(){return TS=(0,_e.Z)(function*(n,e,t,r){const i=ze(n);if(i.da)return void ke("SyncEngine","Ignoring unexpected query state notification.");const a=i.ra.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield ab(i.localStore,mI(a[0])),f=nf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield hd(i,l,f);break}case"rejected":yield ff(i.localStore,e,!0),ey(i,e,r);break;default:st()}}),TS.apply(this,arguments)}function _1(n,e,t){return AS.apply(this,arguments)}function AS(){return AS=(0,_e.Z)(function*(n,e,t){const r=SS(n);if(r.da){for(const i of e){if(r.ra.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const a=yield OA(r.localStore,i),l=yield Pl(r.localStore,a);yield oS(r,VR(a),l.targetId,!1),hb(r.remoteStore,l)}for(const i of t)r.ra.has(i)&&(yield ff(r.localStore,i,!1).then(()=>{lE(r.remoteStore,i),ey(r,i)}).catch(hf))}}),AS.apply(this,arguments)}function SS(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i1.bind(null,e),e.sa.zo=Kk.bind(null,e.eventManager),e.sa.wa=Zk.bind(null,e.eventManager),e}function xS(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o1.bind(null,e),e}class UR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=li(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Q0(this.persistence,new ib,e.initialUser,this.M)}ya(e){return new u(d.Yi,this.M)}ga(e){return new ye}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class BR extends UR{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield xS(r.Ta.syncEngine),yield Z_(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Q0(this.persistence,new ib,e.initialUser,this.M)}pa(e){return new SA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Z0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new rb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ut(),Jt(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new ye}}class v1 extends BR{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof Q&&(r.sharedClientState.syncEngine={$r:f1.bind(null,i),Br:m1.bind(null,i),Lr:_1.bind(null,i),Fs:g1.bind(null,i),Fr:h1.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,_e.Z)(function*(l){yield function p1(n,e){return bS.apply(this,arguments)}(r.Ta.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}ga(e){const t=Ut();if(!Q.vt(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Z0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Q(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class MS{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>kR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=l1.bind(null,r.syncEngine),yield YA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new zk}createDatastore(e){const t=li(e.databaseInfo.databaseId),r=new ft(e.databaseInfo);return new oE(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>kR(this.syncEngine,f,0),l=He.vt()?new He:new Fe,new uE(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,_,w){const T=new e1(r,i,a,l,f,_);return w&&(T.da=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=ze(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Ol(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jR(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class pb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class E1{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Wn,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const a=yield e.Sa(i);return new Yk(JSON.parse(a),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,_e.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class w1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(a,l){const f=ze(a),_=Xp(f.M)+"/documents",w={documents:l.map(B=>Jp(f.M,B))},T=yield f._o("BatchGetDocuments",_,w),A=new Map;T.forEach(B=>{const Y=function xI(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=ro(t,r.found.name),a=jr(r.found.updateTime),l=new bi({mapValue:{fields:r.found.fields}});return mn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=ro(t,r.missing),a=jr(r.readTime);return mn.newNoDocument(i,a)}(n,e):st()}(f.M,B);A.set(Y.key.toString(),Y)});const P=[];return l.forEach(B=>{const Y=A.get(B.toString());Ct(!!Y),P.push(Y)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=$e.fromPath(i);e.mutations.push(new E0(a,e.precondition(a)))}),yield(r=(0,_e.Z)(function*(i,a){const l=ze(i),f=Xp(l.M)+"/documents",_={writes:a.map(w=>rd(l.M,w))};yield l.co("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?pr.updateTime(t):pr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pr.updateTime(t)}return pr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class C1{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new Eu(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,_e.Z)(function*(){const t=new w1(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ma(a)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Up(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!w0(t)}return!1}}class I1{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ur.UNAUTHENTICATED,this.clientId=HT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,_e.Z)(function*(f){ke("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Q_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function HR(n,e){return RS.apply(this,arguments)}function RS(){return RS=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(a){r.isEqual(a)||(yield J0(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),RS.apply(this,arguments)}function $R(n,e){return NS.apply(this,arguments)}function NS(){return NS=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield PS(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>AR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>AR(e.remoteStore,a)),n.onlineComponents=e}),NS.apply(this,arguments)}function PS(n){return OS.apply(this,arguments)}function OS(){return OS=(0,_e.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield HR(n,new UR)),n.offlineComponents}),OS.apply(this,arguments)}function gb(n){return kS.apply(this,arguments)}function kS(){return kS=(0,_e.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield $R(n,new MS)),n.onlineComponents}),kS.apply(this,arguments)}function GR(n){return PS(n).then(e=>e.persistence)}function FS(n){return PS(n).then(e=>e.localStore)}function WR(n){return gb(n).then(e=>e.remoteStore)}function LS(n){return gb(n).then(e=>e.syncEngine)}function ty(n){return VS.apply(this,arguments)}function VS(){return VS=(0,_e.Z)(function*(n){const e=yield gb(n),t=e.eventManager;return t.onListen=t1.bind(null,e.syncEngine),t.onUnlisten=n1.bind(null,e.syncEngine),t}),VS.apply(this,arguments)}function qR(n,e,t={}){const r=new Wn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,f,_){const w=new pb({next:A=>{a.enqueueAndForget(()=>tS(i,T));const P=A.docs.has(l);!P&&A.fromCache?_.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&A.fromCache&&f&&"server"===f.source?_.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),T=new iS(Oo(l.path),w,{includeMetadataChanges:!0,ku:!0});return XA(i,T)}(yield ty(n),n.asyncQueue,e,t,r)})),r.promise}function zR(n,e,t={}){const r=new Wn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,f,_){const w=new pb({next:A=>{a.enqueueAndForget(()=>tS(i,T)),A.fromCache&&"server"===f.source?_.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),T=new iS(l,w,{includeMetadataChanges:!0,ku:!0});return XA(i,T)}(yield ty(n),n.asyncQueue,e,t,r)})),r.promise}const KR=new Map;function US(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZR(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YR(n){if(!$e.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QR(n){if($e.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mb(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function JR(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class XR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ZR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XR({}),this._settingsFrozen=!1,e instanceof fa?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new FT;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new YC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=KR.get(e);t&&(ke("ComponentProvider","Removing Datastore"),KR.delete(e),t.terminate())}(this),Promise.resolve()}}class Fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class ds{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ds(this.firestore,e,this._query)}}class kl extends ds{constructor(e,t,r){super(e,t,Oo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new $e(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function eN(n,e,...t){if(n=(0,O.m9)(n),US("collection","path",e),n instanceof cE){const r=Yt.fromString(e,...t);return QR(r),new kl(n,null,r)}{if(!(n instanceof Fn||n instanceof kl))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return QR(r),new kl(n.firestore,null,r)}}function _b(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=HT.R()),US("doc","path",e),n instanceof cE){const r=Yt.fromString(e,...t);return YR(r),new Fn(n,null,new $e(r))}{if(!(n instanceof Fn||n instanceof kl))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return YR(r),new Fn(n.firestore,n instanceof kl?n.converter:null,new $e(r))}}function tN(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof Fn||n instanceof kl)&&(e instanceof Fn||e instanceof kl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function nN(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof ds&&e instanceof ds&&n.firestore===e.firestore&&T_(n._query,e._query)&&n.converter===e.converter}class O1{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Eu(this,"async_queue_retry"),this.Qa=()=>{const t=Jt();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Jt();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Jt();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Wn;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,_e.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!uf(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Mn("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=JA.createAndSchedule(this,e,t,r,a=>this.Ha(a));return this.La.push(i),i}ja(){this.Ua&&st()}verifyOperationInProgress(){}Ja(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function BS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class k1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends cE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new O1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||rN(this),this._firestoreClient.terminate()}}function Hr(n){return n._firestoreClient||rN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new zT(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new I1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function iN(n,e,t){const r=new Wn;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield HR(n,t),yield $R(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function sN(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fl(fr.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fl(fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pg{constructor(e){this._methodName=e}}class yb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const W1=/^__.*__$/;class q1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms):new zp(e,this.data,t,this.fieldTransforms)}}class oN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class vb{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new vb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Cb(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(aN(this.ec)&&W1.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class z1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||li(e)}lc(e,t,r,i=!1){return new vb({ec:e,methodName:t,hc:r,path:Dr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function gg(n){const e=n._freezeSettings(),t=li(n._databaseId);return new z1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Eb(n,e,t,r,i,a={}){const l=n.lc(a.merge||a.mergeFields?2:0,e,t,i);GS("Data must be an object, but it was:",l,r);const f=cN(r,l);let _,w;if(a.merge)_=new zh(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const T=[];for(const A of a.mergeFields){const P=WS(e,A,t);if(!l.contains(P))throw new Re(ce.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);hN(T,P)||T.push(P)}_=new zh(T),w=l.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,w=l.fieldTransforms;return new q1(new bi(f),_,w)}class dE extends pg{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dE}}function uN(n,e,t){return new vb({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class jS extends pg{_toFieldTransform(e){return new qp(e.path,new Qc)}isEqual(e){return e instanceof jS}}class K1 extends pg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=uN(this,e,!0),r=this.fc.map(a=>mg(a,t)),i=new Dl(r);return new qp(e.path,i)}isEqual(e){return this===e}}class Z1 extends pg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=uN(this,e,!0),r=this.fc.map(a=>mg(a,t)),i=new Tl(r);return new qp(e.path,i)}isEqual(e){return this===e}}class Y1 extends pg{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Jc(e.M,EI(e.M,this.dc));return new qp(e.path,t)}isEqual(e){return this===e}}function HS(n,e,t,r){const i=n.lc(1,e,t);GS("Data must be an object, but it was:",i,r);const a=[],l=bi.empty();Gc(r,(_,w)=>{const T=wb(e,_,t);w=(0,O.m9)(w);const A=i.oc(T);if(w instanceof dE)a.push(T);else{const P=mg(w,A);null!=P&&(a.push(T),l.set(T,P))}});const f=new zh(a);return new oN(l,f,i.fieldTransforms)}function $S(n,e,t,r,i,a){const l=n.lc(1,e,t),f=[WS(e,r,t)],_=[i];if(a.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)f.push(WS(e,a[P])),_.push(a[P+1]);const w=[],T=bi.empty();for(let P=f.length-1;P>=0;--P)if(!hN(w,f[P])){const B=f[P];let Y=_[P];Y=(0,O.m9)(Y);const De=l.oc(B);if(Y instanceof dE)w.push(B);else{const je=mg(Y,De);null!=je&&(w.push(B),T.set(B,je))}}const A=new zh(w);return new oN(T,A,l.fieldTransforms)}function lN(n,e,t,r=!1){return mg(t,n.lc(r?4:3,e))}function mg(n,e){if(dN(n=(0,O.m9)(n)))return GS("Unsupported field value:",e,n),cN(n,e);if(n instanceof pg)return function(t,r){if(!aN(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=mg(l,r.uc(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return EI(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=qn.fromDate(t);return{timestampValue:Tr(r.M,i)}}if(t instanceof qn){const i=new qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tr(r.M,i)}}if(t instanceof yb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fl)return{bytesValue:nd(r.M,t._byteString)};if(t instanceof Fn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ac(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:AI(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${mb(t)}`)}(n,e)}function cN(n,e){const t={};return s0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gc(n,(r,i)=>{const a=mg(i,e.sc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function dN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qn||n instanceof yb||n instanceof Fl||n instanceof Fn||n instanceof pg)}function GS(n,e,t){if(!dN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=mb(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function WS(n,e,t){if((e=(0,O.m9)(e))instanceof fd)return e._internalPath;if("string"==typeof e)return wb(n,e);throw Cb("Field path arguments must be of type string or ",n,!1,void 0,t)}const Q1=new RegExp("[~\\*/\\[\\]]");function wb(n,e,t){if(e.search(Q1)>=0)throw Cb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fd(...e.split("."))._internalPath}catch(r){throw Cb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cb(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Re(ce.INVALID_ARGUMENT,f+n+_)}function hN(n,e){return n.some(t=>t.isEqual(e))}class hE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new J1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ib("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class J1 extends hE{data(){return super.data()}}function Ib(n,e){return"string"==typeof e?wb(n,e):e instanceof fd?e._internalPath:e._delegate._internalPath}class _g{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pd extends hE{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ib("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class fE extends pd{data(e={}){return super.data(e)}}class mf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _g(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fE(this._firestore,this._userDataWriter,r.key,r,new _g(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new fE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new _g(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new fE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new _g(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:X1(l.type),doc:f,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function X1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function fN(n,e){return n instanceof pd&&e instanceof pd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mf&&e instanceof mf&&n._firestore===e._firestore&&nN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function pN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pE{}function _f(n,...e){for(const t of e)n=t._apply(n);return n}class eF extends pE{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=gg(e.firestore),r=function(i,a,l,f,_,w,T){let A;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){EN(T,w);const B=[];for(const Y of T)B.push(vN(f,i,Y));A={arrayValue:{values:B}}}else A=vN(f,i,T)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||EN(T,w),A=lN(l,"where",T,"in"===w||"not-in"===w);const P=si.create(_,w,A);return function(B,Y){if(Y.S()){const je=gI(B);if(null!==je&&!je.isEqual(Y.field))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${je.toString()}' and '${Y.field.toString()}'`);const At=bl(B);null!==At&&wN(0,Y.field,At)}const De=function(je,At){for(const Dt of je.filters)if(At.indexOf(Dt.op)>=0)return Dt.op;return null}(B,function(je){switch(je){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==De)throw new Re(ce.INVALID_ARGUMENT,De===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${De.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ds(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new _u(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class nF extends pE{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Jh(i,a);return function(f,_){if(null===bl(f)){const w=gI(f);null!==w&&wN(0,w,_.field)}}(r,l),l}(e._query,this._c,this.gc);return new ds(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new _u(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class gN extends pE{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new ds(e.firestore,e.converter,f0(e._query,this.yc,this.Ic))}}class mN extends pE{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=yN(e,this.type,this.Tc,this.Ec);return new ds(e.firestore,e.converter,(i=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class _N extends pE{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=yN(e,this.type,this.Tc,this.Ec);return new ds(e.firestore,e.converter,(i=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function yN(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof hE)return function(i,a,l,f,_){if(!f)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const T of Xh(i))if(T.field.isKeyField())w.push(Zc(a,f.key));else{const A=f.data.field(T.field);if(m_(A))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const P=T.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(A)}return new Il(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=gg(n.firestore);return function(a,l,f,_,w,T){const A=a.explicitOrderBy;if(w.length>A.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let B=0;B<w.length;B++){const Y=w[B];if(A[B].field.isKeyField()){if("string"!=typeof Y)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Y}`);if(!D_(a)&&-1!==Y.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Y}' contains a slash.`);const De=a.path.child(Yt.fromString(Y));if(!$e.isDocumentKey(De))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${De}' is not because it contains an odd number of segments.`);const je=new $e(De);P.push(Zc(l,je))}else{const De=lN(f,_,Y);P.push(De)}}return new Il(P,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function vN(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!D_(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!$e.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zc(n,new $e(r))}if(t instanceof Fn)return Zc(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mb(t)}.`)}function EN(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function wN(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const cF={maxAttempts:5};class qS{convertValue(e,t="none"){switch(zc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Gc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new yb(gn(e.latitude),gn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=JC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Kh(e));default:return null}}convertTimestamp(e){const t=wl(e);return new qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);Ct(LI(r));const i=new fa(r.get(1),r.get(3)),a=new $e(r.popFirst(5));return i.isEqual(t)||Mn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function bb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class dF extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}class CN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gg(e)}set(e,t,r){this._verifyNotCommitted();const i=yf(e,this._firestore),a=bb(i.converter,t,r),l=Eb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,pr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=yf(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof fd?$S(this._dataReader,"WriteBatch.update",a._key,t,r,i):HS(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yf(e,this._firestore);return this._mutations=this._mutations.concat(new Yp(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yf(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class yg extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}function IN(n,e,t){n=Xt(n,Fn);const r=Xt(n.firestore,Kn),i=bb(n.converter,e,t);return ny(r,[Eb(gg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,pr.none())])}function bN(n,e,t,...r){n=Xt(n,Fn);const i=Xt(n.firestore,Kn),a=gg(i);let l;return l="string"==typeof(e=(0,O.m9)(e))||e instanceof fd?$S(a,"updateDoc",n._key,e,t,r):HS(a,"updateDoc",n._key,e),ny(i,[l.toMutation(n._key,pr.exists(!0))])}function DN(n,...e){var t,r,i;n=(0,O.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||BS(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(BS(e[l])){const A=e[l];e[l]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[l+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[l+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,w,T;if(n instanceof Fn)w=Xt(n.firestore,Kn),T=Oo(n._key.path),_={next:A=>{e[l]&&e[l](zS(w,n,A))},error:e[l+1],complete:e[l+2]};else{const A=Xt(n,ds);w=Xt(A.firestore,Kn),T=A._query;const P=new yg(w);_={next:B=>{e[l]&&e[l](new mf(w,P,A,B))},error:e[l+1],complete:e[l+2]},pN(n._query)}return function(A,P,B,Y){const De=new pb(Y),je=new iS(P,De,B);return A.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return XA(yield ty(A),je)})),()=>{De.Aa(),A.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return tS(yield ty(A),je)}))}}(Hr(w),T,f,_)}function ny(n,e){return function(t,r){const i=new Wn;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function r1(n,e,t){return lS.apply(this,arguments)}(yield LS(t),r,i)})),i.promise}(Hr(n),e)}function zS(n,e,t){const r=t.docs.get(e._key),i=new yg(n);return new pd(n,i,e._key,r,new _g(t.hasPendingWrites,t.fromCache),e.converter)}class wF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gg(e)}get(e){const t=yf(e,this._firestore),r=new dF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const a=i[0];if(a.isFoundDocument())return new hE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new hE(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=yf(e,this._firestore),a=bb(i.converter,t,r),l=Eb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=yf(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof fd?$S(this._dataReader,"Transaction.update",a._key,t,r,i):HS(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=yf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yf(e,this._firestore),r=new yg(this._firestore);return super.get(e).then(i=>new pd(this._firestore,r,t._key,i._document,new _g(!1,!1),t.converter))}}function KS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function AN(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function SN(){if(!function WT(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){$c=la.SDK_VERSION,(0,la._registerComponent)(new ca.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Kn(i,new VT(t.getProvider("auth-internal")),new UT(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,la.registerVersion)(e0,"3.4.9",n),(0,la.registerVersion)(e0,"3.4.9","esm2017")}();class gE{constructor(e){this._delegate=e}static fromBase64String(e){return SN(),new gE(Fl.fromBase64String(e))}static fromUint8Array(e){return AN(),new gE(Fl.fromUint8Array(e))}toBase64(){return SN(),this._delegate.toBase64()}toUint8Array(){return AN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ZS(n){return function MF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class RF{enableIndexedDbPersistence(e,t){return function L1(n,e){sN(n=Xt(n,Kn));const t=Hr(n),r=n._freezeSettings(),i=new MS;return iN(t,i,new BR(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function V1(n){sN(n=Xt(n,Kn));const e=Hr(n),t=n._freezeSettings(),r=new MS;return iN(e,r,new v1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function U1(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!io.vt())return Promise.resolve();const i=r+"main";yield io.delete(i)}),function(r){return t.apply(this,arguments)})(Z0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class xN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function N1(n,e,t,r={}){var i;const a=(n=Xt(n,cE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Lp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=Ur.MOCK_USER;else{l=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ur(_)}n._authCredentials=new LT(new qh(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function j1(n){return function b1(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield GR(n),t=yield WR(n);return e.setNetworkEnabled(!0),function(r){const i=ze(r);return i.wu.delete(0),dd(i)}(t)}))}(Hr(n=Xt(n,Kn)))}(this._delegate)}disableNetwork(){return function H1(n){return function D1(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield GR(n),t=yield WR(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const a=ze(i);a.wu.add(0),yield Ol(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Hr(n=Xt(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ZR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function B1(n){return function(e){const t=new Wn;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function a1(n,e){return pS.apply(this,arguments)}(yield LS(e),t)})),t.promise}(Hr(n=Xt(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function EF(n,e){return function S1(n,e){const t=new pb(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield ty(n),i=t,ze(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield ty(n),i=t,void ze(r).bu.delete(i);var r,i}))}}(Hr(n=Xt(n,Kn)),BS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ry(this,eN(this._delegate,e))}catch(t){throw xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ma(this,_b(this._delegate,e))}catch(t){throw xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ms(this,function P1(n,e){if(n=Xt(n,cE),US("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ds(n,null,(t=e,new _u(Yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function CF(n,e,t){n=Xt(n,Kn);const r=Object.assign(Object.assign({},cF),t);return function(i){if(i.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function x1(n,e,t){const r=new Wn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const i=yield(a=n,gb(a).then(l=>l.datastore));var a;new C1(n.asyncQueue,i,t,e,r).run()})),r.promise}(Hr(n),i=>e(new wF(n,i)),r)}(this._delegate,t=>e(new MN(this,t)))}batch(){return Hr(this._delegate),new RN(new CN(this._delegate,e=>ny(this._delegate,e)))}loadBundle(e){return function $1(n,e){const t=Hr(n=Xt(n,Kn)),r=new k1;return function M1(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return jR(_,w);if(_ instanceof ArrayBuffer)return jR(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new E1(_,l);var _}(t,li(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function y1(n,e,t){const r=ze(n);var i;(i=(0,_e.Z)(function*(a,l,f){try{const _=yield l.getMetadata();if(yield function(P,B){const Y=ze(P),De=jr(B.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",je=>Y._s.getBundleMetadata(je,B.id)).then(je=>!!je&&je.createTime.compareTo(De)>=0)}(a.localStore,_))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(MR(_));const w=new Qk(_,a.localStore,l.M);let T=yield l.ma();for(;T;){const P=yield w.Fu(T);P&&f._updateProgress(P),T=yield l.ma()}const A=yield w.complete();return yield hd(a,A.Lu,void 0),yield function(P,B){const Y=ze(P);return Y.persistence.runTransaction("Save bundle","readwrite",De=>Y._s.saveBundleMetadata(De,B))}(a.localStore,_),f._completeWith(A.progress),Promise.resolve(A.Bu)}catch(_){return Lp("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var P}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield LS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function G1(n,e){return function R1(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield FS(n),e)}))}(Hr(n=Xt(n,Kn)),e).then(t=>t?new ds(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ms(this,t):null)}}class Db extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new gE(new Fl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ma.forKey(t,this.firestore,null)}}class MN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Db(e)}get(e){const t=Eg(e);return this._delegate.get(t).then(r=>new mE(this._firestore,new pd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Eg(e);return r?(KS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Eg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Eg(e);return this._delegate.delete(t),this}}class RN{constructor(e){this._delegate=e}set(e,t,r){const i=Eg(e);return r?(KS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Eg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Eg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new fE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _E(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=vg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new vg(e,new Db(e),t),i.set(t,a)),a}}vg.INSTANCES=new WeakMap;class ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Db(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ma(t,new Fn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new ma(t,new Fn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ry(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ry(this.firestore,eN(this._delegate,e))}catch(t){throw xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof Fn&&tN(this._delegate,e)}set(e,t){t=KS("DocumentReference.set",t);try{return t?IN(this._delegate,e,t):IN(this._delegate,e)}catch(r){throw xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?bN(this._delegate,e):bN(this._delegate,e,t,...r)}catch(i){throw xs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function yF(n){return ny(Xt(n.firestore,Kn),[new Yp(n._key,pr.none())])}(this._delegate)}onSnapshot(...e){const t=NN(e),r=PN(e,i=>new mE(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return DN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function fF(n){n=Xt(n,Fn);const e=Xt(n.firestore,Kn),t=Hr(e),r=new yg(e);return function T1(n,e){const t=new Wn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const f=yield function(_,w){const T=ze(_);return T.persistence.runTransaction("read document","readonly",A=>T.fi.Ls(A,w))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=Q_(f,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield FS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new pd(e,r,n._key,i,new _g(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function pF(n){n=Xt(n,Fn);const e=Xt(n.firestore,Kn);return qR(Hr(e),n._key,{source:"server"}).then(t=>zS(e,n,t))}(this._delegate):function hF(n){n=Xt(n,Fn);const e=Xt(n.firestore,Kn);return qR(Hr(e),n._key).then(t=>zS(e,n,t))}(this._delegate),t.then(r=>new mE(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ma(this.firestore,this._delegate.withConverter(e?vg.getInstance(this.firestore,e):null))}}function xs(n,e,t){return n.message=n.message.replace(e,t),n}function NN(n){for(const e of n)if("object"==typeof e&&!ZS(e))return e;return{}}function PN(n,e){var t,r;let i;return i=ZS(n[0])?n[0]:ZS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fN(this._delegate,e._delegate)}}class _E extends mE{data(e){const t=this._delegate.data(e);return function KC(n,e){n||st()}(void 0!==t),t}}class Ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Db(e)}where(e,t,r){try{return new Ms(this.firestore,_f(this._delegate,function tF(n,e,t){const r=e,i=Ib("where",n);return new eF(i,r,t)}(e,t,r)))}catch(i){throw xs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ms(this.firestore,_f(this._delegate,function rF(n,e="asc"){const t=e,r=Ib("orderBy",n);return new nF(r,t)}(e,t)))}catch(r){throw xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ms(this.firestore,_f(this._delegate,function iF(n){return JR("limit",n),new gN("limit",n,"F")}(e)))}catch(t){throw xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ms(this.firestore,_f(this._delegate,function sF(n){return JR("limitToLast",n),new gN("limitToLast",n,"L")}(e)))}catch(t){throw xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ms(this.firestore,_f(this._delegate,function oF(...n){return new mN("startAt",n,!0)}(...e)))}catch(t){throw xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ms(this.firestore,_f(this._delegate,function aF(...n){return new mN("startAfter",n,!1)}(...e)))}catch(t){throw xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ms(this.firestore,_f(this._delegate,function uF(...n){return new _N("endBefore",n,!1)}(...e)))}catch(t){throw xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ms(this.firestore,_f(this._delegate,function lF(...n){return new _N("endAt",n,!0)}(...e)))}catch(t){throw xs(t,"endAt()","Query.endAt()")}}isEqual(e){return nN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function mF(n){n=Xt(n,ds);const e=Xt(n.firestore,Kn),t=Hr(e),r=new yg(e);return function A1(n,e){const t=new Wn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const f=yield rE(i,a,!0),_=new PR(a,f._i),w=_.Wu(f.documents),T=_.applyChanges(w,!1);l.resolve(T.snapshot)}catch(f){const _=Q_(f,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield FS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new mf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function _F(n){n=Xt(n,ds);const e=Xt(n.firestore,Kn),t=Hr(e),r=new yg(e);return zR(t,n._query,{source:"server"}).then(i=>new mf(e,r,n,i))}(this._delegate):function gF(n){n=Xt(n,ds);const e=Xt(n.firestore,Kn),t=Hr(e),r=new yg(e);return pN(n._query),zR(t,n._query).then(i=>new mf(e,r,n,i))}(this._delegate),t.then(r=>new YS(this.firestore,new mf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=NN(e),r=PN(e,i=>new YS(this.firestore,new mf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return DN(this._delegate,t,r)}withConverter(e){return new Ms(this.firestore,this._delegate.withConverter(e?vg.getInstance(this.firestore,e):null))}}class PF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _E(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class YS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _E(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new PF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _E(this._firestore,r))})}isEqual(e){return fN(this._delegate,e._delegate)}}class ry extends Ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ma(this.firestore,e):null}doc(e){try{return new ma(this.firestore,void 0===e?_b(this._delegate):_b(this._delegate,e))}catch(t){throw xs(t,"doc()","CollectionReference.doc()")}}add(e){return function vF(n,e){const t=Xt(n.firestore,Kn),r=_b(n),i=bb(n.converter,e);return ny(t,[Eb(gg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ma(this.firestore,t))}isEqual(e){return tN(this._delegate,e._delegate)}withConverter(e){return new ry(this.firestore,this._delegate.withConverter(e?vg.getInstance(this.firestore,e):null))}}function Eg(n){return Xt(n,Fn)}class QS{constructor(...e){this._delegate=new fd(...e)}static documentId(){return new QS(Dr.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof fd&&this._delegate._internalPath.isEqual(e._internalPath)}}class wg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function bF(){return new jS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new wg(e)}static delete(){const e=function IF(){return new dE("deleteField")}();return e._methodName="FieldValue.delete",new wg(e)}static arrayUnion(...e){const t=function DF(...n){return new K1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new wg(t)}static arrayRemove(...e){const t=function TF(...n){return new Z1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new wg(t)}static increment(e){const t=function AF(n){return new Y1("increment",n)}(e);return t._methodName="FieldValue.increment",new wg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OF={Firestore:xN,GeoPoint:yb,Timestamp:qn,Blob:gE,Transaction:MN,WriteBatch:RN,DocumentReference:ma,DocumentSnapshot:mE,Query:Ms,QueryDocumentSnapshot:_E,QuerySnapshot:YS,CollectionReference:ry,FieldPath:QS,FieldValue:wg,setLogLevel:function NF(n){!function kT(n){hu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function FF(n){(function kF(n,e){n.INTERNAL.registerComponent(new ca.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},OF)))})(n,(e,t)=>new xN(e,t,new RF)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(hv.Z);var JS=k(6451),Tb=k(5363),LF=k(6063);class VF extends Vi.x{constructor(e=1/0,t=1/0,r=LF.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)f=_;f&&r.splice(0,f+1)}}}var ON=k(3099);function kN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,ON.B)({connector:()=>new VF(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function FN(n,e){return(0,Qf.m)(e)?cr(()=>n,e):cr(()=>n)}var XS=k(9468);k(5867);const VN=new Map,$F={activated:!1,tokenObservers:[]},GF={initialized:!1,enabled:!1};function Ti(n){return VN.get(n)||$F}function wu(n,e){VN.set(n,e)}function Sb(){return GF}class ZF{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function YF(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Rs=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function BN(n){if(!Ti(n).activated)throw Rs.create("use-before-activation",{appName:n.name})}function rx(n,e){return ix.apply(this,arguments)}function ix(){return ix=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(A){throw Rs.create("fetch-network-error",{originalErrorMessage:A.message})}if(200!==l.status)throw Rs.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(A){throw Rs.create("fetch-parse-error",{originalErrorMessage:A.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Rs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(_[1]),T=Date.now();return{token:f.token,expireTimeMillis:T+w,issuedAtTimeMillis:T}}),ix.apply(this,arguments)}function tL(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const yE="firebase-app-check-store";let Rb=null;function HN(){return Rb||(Rb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Rs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(yE,{keyPath:"compositeKey"})}}catch(t){e(Rs.create("storage-open",{originalErrorMessage:t.message}))}}),Rb)}function sx(){return sx=(0,_e.Z)(function*(n,e){const r=(yield HN()).transaction(yE,"readwrite"),a=r.objectStore(yE).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;f(Rs.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),sx.apply(this,arguments)}const vE=new xo.Yd("@firebase/app-check");function qN(n,e){return(0,O.hl)()?function sL(n,e){return function $N(n,e){return sx.apply(this,arguments)}(function WN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zN(){return Sb().enabled}function KN(){return lx.apply(this,arguments)}function lx(){return lx=(0,_e.Z)(function*(){const n=Sb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),lx.apply(this,arguments)}const dL={error:"UNKNOWN_ERROR"};function hL(n){return O.US.encodeString(JSON.stringify(n),!1)}function Nb(n){return cx.apply(this,arguments)}function cx(){return cx=(0,_e.Z)(function*(n,e=!1){const t=n.app;BN(t);const r=Ti(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Pb(_)&&(i=_)}if(!e&&i&&Pb(i))return{token:i.token};let f,l=!1;if(zN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rx(tL(t,yield KN()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),l=!0);const _=yield r.exchangeTokenPromise;return yield qN(t,_),wu(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),l=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?vE.warn(_.message):vE.error(_),a=_}return i?(f={token:i.token},wu(t,Object.assign(Object.assign({},r),{token:i})),yield qN(t,i)):f=pL(a),l&&YN(t,f),f}),cx.apply(this,arguments)}function hx(n,e){const t=Ti(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),wu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ZN(n){const{app:e}=n,t=Ti(e);let r=t.tokenRefresher;r||(r=function fL(n){const{app:e}=n;return new ZF((0,_e.Z)(function*(){let r;if(r=Ti(e).token?yield Nb(n,!0):yield Nb(n),r.error)throw r.error}),()=>!0,()=>{const t=Ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),wu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function YN(n,e){const t=Ti(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Pb(n){return n.expireTimeMillis-Date.now()>0}function pL(n){return{token:hL(dL),error:n}}class gL{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ti(this.app);for(const t of e)hx(this.app,t.next);return Promise.resolve()}}const iP="app-check-internal";!function xL(){(0,la._registerComponent)(new ca.wA("app-check",n=>function mL(n,e){return new gL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(iP).initialize()})),(0,la._registerComponent)(new ca.wA(iP,n=>function _L(n){return{getToken:e=>Nb(n,e),addTokenListener:e=>function dx(n,e,t,r){const{app:i}=n,a=Ti(i),l={next:t,error:r,type:e};if(wu(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&Pb(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),ZN(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>ZN(n))}(n,"INTERNAL",e),removeTokenListener:e=>hx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,la.registerVersion)("@firebase/app-check","0.5.8")}();class kb{constructor(){return(0,En.vb)("app-check")}}"undefined"!=typeof window&&window;var OL=k(127);const _x=new g.OlP("angularfire2.auth.use-emulator"),yx=new g.OlP("angularfire2.auth.settings"),vx=new g.OlP("angularfire2.auth.tenant-id"),Ex=new g.OlP("angularfire2.auth.langugage-code"),wx=new g.OlP("angularfire2.auth.use-device-language"),Cx=new g.OlP("angularfire.auth.persistence"),Ix=(n,e,t,r,i,a,l,f)=>(0,ji.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,T]of Object.entries(l))_.settings[w]=T;return f&&_.setPersistence(f),_},[t,r,i,a,l,f]);let iy=(()=>{class n{constructor(t,r,i,a,l,f,_,w,T,A,P,B){const Y=new Vi.x,De=nt(void 0).pipe((0,Tb.Q)(l.outsideAngular),cr(()=>a.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,7092)))),(0,ht.U)(()=>(0,ji.on)(t,a,r)),(0,ht.U)(je=>Ix(je,a,f,w,T,A,_,P)),kN({bufferSize:1,refCount:!1}));if(jo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nt(null);else{De.pipe(h()).subscribe();const At=De.pipe(cr(xt=>xt.getRedirectResult().then(Kt=>Kt,()=>null)),En.iC,kN({bufferSize:1,refCount:!1})),Dt=De.pipe(cr(xt=>new ws.y(Kt=>({unsubscribe:a.runOutsideAngular(()=>xt.onAuthStateChanged(un=>Kt.next(un),un=>Kt.error(un),()=>Kt.complete()))})))),Mt=De.pipe(cr(xt=>new ws.y(Kt=>({unsubscribe:a.runOutsideAngular(()=>xt.onIdTokenChanged(un=>Kt.next(un),un=>Kt.error(un),()=>Kt.complete()))}))));this.authState=At.pipe(FN(Dt),(0,XS.R)(l.outsideAngular),(0,Tb.Q)(l.insideAngular)),this.user=At.pipe(FN(Mt),(0,XS.R)(l.outsideAngular),(0,Tb.Q)(l.insideAngular)),this.idToken=this.user.pipe(cr(xt=>xt?(0,yn.D)(xt.getIdToken()):nt(null))),this.idTokenResult=this.user.pipe(cr(xt=>xt?(0,yn.D)(xt.getIdTokenResult()):nt(null))),this.credential=(0,JS.T)(At,Y,this.authState.pipe(Qs(xt=>!xt))).pipe((0,ht.U)(xt=>(null==xt?void 0:xt.user)?xt:null),(0,XS.R)(l.outsideAngular),(0,Tb.Q)(l.insideAngular))}return(0,ji.pX)(this,De,a,{spy:{apply:(je,At,Dt)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&Dt.then(Mt=>Y.next(Mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ji.Dh),g.LFG(ji.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(En.HU),g.LFG(_x,8),g.LFG(yx,8),g.LFG(vx,8),g.LFG(Ex,8),g.LFG(wx,8),g.LFG(Cx,8),g.LFG(kb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function oP(n,e){return function FL(n,e=dv.z){return new ws.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function bx(n,e){return oP(n,e).pipe((0,ht.U)(t=>({payload:t,type:"query"})))}function Fb(n,e){return bx(n,e).pipe(sh(void 0),km(),(0,ht.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const _=i.find(T=>T.doc.ref.isEqual(l.ref)),w=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function aP(n,e,t){return Fb(n,t).pipe(Ts((r,i)=>function VL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function UL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Dx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Dx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Dx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Qw(),(0,ht.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Dx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function uP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class lP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Fb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ht.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(sh(void 0),km(),Qs(([r,i])=>i.length>0||!r),(0,ht.U)(([r,i])=>i),En.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ts((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uP(e);return aP(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return bx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),En.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(En.iC)}add(e){return this.ref.add(e)}doc(e){return new cP(this.ref.doc(e),this.afs)}}class cP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=dP(r,t);return new lP(i,a,this.afs)}snapshotChanges(){return function LL(n,e){return oP(n,e).pipe(sh(void 0),km(),(0,ht.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,yn.D)(this.ref.get(e)).pipe(En.iC)}}class BL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Fb(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qs(t=>t.length>0),En.iC):Fb(this.query,this.afs.schedulers.outsideAngular).pipe(En.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ts((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uP(e);return aP(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return bx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),En.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(En.iC)}}const jL=new g.OlP("angularfire2.enableFirestorePersistence"),HL=new g.OlP("angularfire2.firestore.persistenceSettings"),$L=new g.OlP("angularfire2.firestore.settings"),GL=new g.OlP("angularfire2.firestore.use-emulator");function dP(n,e=(t=>t)){return{query:e(n),ref:n}}let Tx=(()=>{class n{constructor(t,r,i,a,l,f,_,w,T,A,P,B,Y,De,je,At,Dt){this.schedulers=_;const Mt=(0,ji.on)(t,f,r),xt=T;A&&Ix(Mt,f,P,Y,De,je,B,At),[this.firestore,this.persistenceEnabled$]=(0,ji.cc)(`${Mt.name}.firestore`,"AngularFirestore",Mt.name,()=>{const Kt=f.runOutsideAngular(()=>Mt.firestore());if(a&&Kt.settings(a),xt&&Kt.useEmulator(...xt),i&&!jo(l)){const un=()=>{try{return(0,yn.D)(Kt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(fs){return"undefined"!=typeof console&&console.warn(fs),nt(!1)}};return[Kt,f.runOutsideAngular(un)]}return[Kt,nt(!1)]},[a,xt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=dP(i,r),f=this.schedulers.ngZone.run(()=>a);return new lP(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new BL(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new cP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ji.Dh),g.LFG(ji.xv,8),g.LFG(jL,8),g.LFG($L,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(En.HU),g.LFG(HL,8),g.LFG(GL,8),g.LFG(iy,8),g.LFG(_x,8),g.LFG(yx,8),g.LFG(vx,8),g.LFG(Ex,8),g.LFG(wx,8),g.LFG(Cx,8),g.LFG(kb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WL=(()=>{class n{constructor(t){this.firestore=t}getIdentite(){return this.firestore.collection("identites").snapshotChanges()}createIdentite(t){return this.firestore.collection("identites").add(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Tx))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ax=(()=>{class n{constructor(t,r,i,a){this.afAuth=t,this.router=r,this.ngZone=i,this.afs=a}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["info-administratives"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(iy),g.LFG(Ir),g.LFG(g.R0b),g.LFG(Tx))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qL(n,e){1&n&&(g.TgZ(0,"div",15),g._UZ(1,"input",16,17)(3,"input",18,19),g.qZA())}function zL(n,e){if(1&n&&(g.TgZ(0,"option",20),g._uU(1),g.qZA()),2&n){const t=e.$implicit;g.Q6J("value",t),g.xp6(1),g.hij(" ",t," ")}}function KL(n,e){if(1&n&&(g.TgZ(0,"option",20),g._uU(1),g.qZA()),2&n){const t=e.$implicit;g.Q6J("value",t),g.xp6(1),g.hij(" ",t," ")}}function ZL(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div"),g._UZ(1,"input",21,22),g.TgZ(3,"p"),g._uU(4,"Type Entit\xe9 "),g.qZA(),g.TgZ(5,"select",23,24),g.NdJ("ngModelChange",function(i){return g.CHM(t),g.oxw().selectedTypeEntite=i}),g.YNc(7,KL,2,2,"option",12),g.qZA()()}if(2&n){const t=g.oxw();g.xp6(5),g.Q6J("ngModel",t.selectedTypeEntite),g.xp6(2),g.Q6J("ngForOf",t.entites)}}function YL(n,e){if(1&n&&(g.TgZ(0,"div"),g._UZ(1,"input",25,26),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.MGl("placeholder","Nom ",t.selectedTypeEntite,"")}}let QL=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.identiteService=r,this.route=i,this.authService=a,this.afAuth=l,this.fonctions=["Directeur d'unit\xe9 et/ou Responsable administratif","Directeur d'une \xe9quipe","Directeur d'un d\xe9partement","Directeur d'un groupe/d'un axe"],this.entites=["Unit\xe9 compl\xe8te","\xc9quipe","Axe","D\xe9partement"],this.loggedWithLink=!1,this.identite={nom:"",prenom:"",email:"",fonction:"",numEntite:"",typeEntite:"",nomsTypeEntite:""}}ngOnChanges(t){throw new Error("Method not implemented.")}ngOnInit(){this.user=this.afAuth.authState,console.log("USer : "+this.user);const t=this.router.url;console.log("URL : "+t),this.confirmSignIn(t)}onSubmit(t){console.log(t.value),console.log(t.valid),console.log(this.fonctions[1]),console.log("SELECTED"+this.selectedFonction),this.identiteService.createIdentite(t.value),this.router.navigate(["/ontologie"])}confirmSignIn(t){var r=this;return(0,_e.Z)(function*(){try{if(r.afAuth.isSignInWithEmailLink(t)){r.loggedWithLink=!0;let i=window.localStorage.getItem("emailForSignIn");console.log("CLOOOOOOOOOOOOOOL "+i),r.identite.email=i,i||(i=window.prompt("Please provide your email for confirmation")),yield r.afAuth.signInWithEmailLink(i,t),window.localStorage.removeItem("emailForSignIn")}}catch(i){r.errorMessage=i.message}})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ir),g.Y36(WL),g.Y36(ru),g.Y36(Ax),g.Y36(iy))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-info-adm"]],inputs:{inputNumber:"inputNumber"},features:[g.TTD],decls:22,vars:5,consts:[[1,"mainscreen"],[1,"card"],[1,"leftside"],["src","https://images.unsplash.com/photo-1586769852836-bc069f19e1b6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80","alt","",1,"product"],[1,"rightside"],["action","#",3,"ngSubmit"],["infoForm","ngForm"],["class","identite",4,"ngIf"],["type","text","name","email","ngModel","","placeholder","Votre Email","required","",1,"inputbox"],["email","ngModel"],["name","fonction","ngModel","","id","fonction","required","",1,"inputbox",3,"ngModel","ngModelChange"],["fonction","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["type","submit",1,"button"],[1,"identite"],["type","text","name","name","ngModel","","placeholder","Votre Nom","required","",1,"inputbox"],["name","ngModel"],["type","text","name","name2","ngModel","","placeholder","Votre Pr\xe9nom","required","",1,"inputbox"],["name2","ngModel"],[3,"value"],["type","text","name","numEntite","ngModel","","placeholder","Num\xe9ro de l\u2019unit\xe9","required","",1,"inputbox"],["numEntite","ngModel"],["name","typeEntite","ngModel","","id","typeEntite","required","",1,"inputbox",3,"ngModel","ngModelChange"],["typeEntite","ngModel"],["type","text","name","nomsTypeEntite","ngModel","","required","",1,"inputbox",3,"placeholder"],["nomsTypeEntite","ngModel"]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g._UZ(3,"img",3),g.qZA(),g.TgZ(4,"div",4)(5,"form",5,6),g.NdJ("ngSubmit",function(){g.CHM(i);const l=g.MAs(6);return r.onSubmit(l)}),g.TgZ(7,"h1"),g._uU(8,"Enqu\xeate: Champs de comp\xe9tences des instituts au sein du CNRS "),g.qZA(),g.YNc(9,qL,5,0,"div",7),g._UZ(10,"input",8,9),g.TgZ(12,"p"),g._uU(13,"Fonction"),g.qZA(),g.TgZ(14,"select",10,11),g.NdJ("ngModelChange",function(l){return r.selectedFonction=l}),g.YNc(16,zL,2,2,"option",12),g.qZA(),g.YNc(17,ZL,8,2,"div",13),g.YNc(18,YL,3,1,"div",13),g._UZ(19,"p"),g.TgZ(20,"button",14),g._uU(21,"Etape Suivante"),g.qZA()()()()()}2&t&&(g.xp6(9),g.Q6J("ngIf",r.loggedWithLink),g.xp6(5),g.Q6J("ngModel",r.selectedFonction),g.xp6(2),g.Q6J("ngForOf",r.fonctions),g.xp6(1),g.Q6J("ngIf",r.selectedFonction===r.fonctions[0]),g.xp6(1),g.Q6J("ngIf",void 0!==r.selectedFonction&&r.selectedFonction!==r.fonctions[0]||void 0!==r.selectedTypeEntite&&r.selectedTypeEntite!==r.entites[0]))},directives:[Xu,Gs,Do,sr,Pi,Xn,Wa,rl,na,Bn,Yd,bc],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif!important;margin:0;padding:0;box-sizing:border-box}.mainscreen[_ngcontent-%COMP%]{min-height:100vh;width:100%;display:flex;flex-direction:column;background:linear-gradient(#8cd7fa,#c0d9e7,#f9fafc)}.card[_ngcontent-%COMP%]{width:60rem;margin:auto;background:white;position:center;align-self:center;border-radius:1.5rem;box-shadow:4px 3px 20px #3535358c;display:flex;flex-direction:row}.leftside[_ngcontent-%COMP%]{background:#e9e9e9;width:25rem;display:inline-flex;align-items:center;justify-content:center;border-top-left-radius:1.5rem;border-bottom-left-radius:1.5rem}.product[_ngcontent-%COMP%]{object-fit:cover;width:30em;height:30em;border-radius:70%}.rightside[_ngcontent-%COMP%]{background-color:#fff;width:35rem;border-bottom-right-radius:1.5rem;border-top-right-radius:1.5rem;padding:1rem 2rem 3rem 3rem}p[_ngcontent-%COMP%]{display:block;font-size:1.1rem;font-weight:400;margin:.8rem 0}.inputbox[_ngcontent-%COMP%]{color:#030303;width:100%;padding:.5rem;border:none;border-bottom:1.5px solid #ccc;margin-bottom:1rem;border-radius:.3rem;font-family:Roboto,sans-serif;color:#615a5a;font-size:1.1rem;font-weight:500;outline:none}.identite[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:.6rem}.button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#333a75 0%,#298096 100%);padding:15px;border:none;border-radius:20px;color:#fff;font-weight:400;font-size:1.2rem;margin-top:10px;margin-left:25%;width:50%;letter-spacing:.11rem;outline:none}.button[_ngcontent-%COMP%]:hover{transform:scale(1.05) translateY(-3px);box-shadow:3px 3px 6px #38373785}@media only screen and (max-width: 1000px){.card[_ngcontent-%COMP%]{flex-direction:column;width:auto}.leftside[_ngcontent-%COMP%]{width:100%;border-radius:0}.rightside[_ngcontent-%COMP%]{width:auto;border-bottom-left-radius:1.5rem;padding:.5rem 3rem 3rem 2rem;border-radius:0}}"]}),n})(),JL=(()=>{class n{constructor(t){this.firestore=t}getConclusion(){return this.firestore.collection("conclusions").snapshotChanges()}addConclusion(t){return this.firestore.collection("conclusions").add(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Tx))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),XL=(()=>{class n{constructor(t,r,i){this.router=t,this.conclusionService=r,this.route=i}ngOnInit(){}onSubmit(t){this.conclusionService.addConclusion(t.value),this.router.navigate(["/"])}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ir),g.Y36(JL),g.Y36(ru))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-conclusion"]],decls:13,vars:0,consts:[[1,"mainscreen"],[1,"card"],[1,"rightside"],["action","#",3,"ngSubmit"],["conclucionForm","ngForm"],[2,"margin-top","5%","margin-left","10%"],[1,"conclusion"],["name","Conclusion","ngModel","","placeholder","Avez-vous des commentaires?","required","","rows","12","cols","100",1,"textarea"],["name","ngModel"],["type","submit",1,"button"]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3,4),g.NdJ("ngSubmit",function(){g.CHM(i);const l=g.MAs(4);return r.onSubmit(l)}),g.TgZ(5,"h1",5),g._uU(6,"Conclusion "),g.qZA(),g.TgZ(7,"div",6)(8,"textarea",7,8),g._uU(10,"                    "),g.qZA()(),g.TgZ(11,"button",9),g._uU(12,"Soumettre l'enqu\xeate"),g.qZA()()()()()}},directives:[Xu,Gs,Do,Pi,Xn,Wa,rl],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif!important;margin:0;padding:0;box-sizing:border-box}.mainscreen[_ngcontent-%COMP%]{min-height:100vh;width:100%;display:flex;flex-direction:column;background:linear-gradient(#8cd7fa,#c0d9e7,#f9fafc)}.card[_ngcontent-%COMP%]{width:60rem;margin:auto;background:white;position:center;align-self:center;border-radius:1.5rem;box-shadow:4px 3px 20px #3535358c;display:flex;flex-direction:row}.rightside[_ngcontent-%COMP%]{background-color:#fff;width:35rem;padding:1rem 2rem 3rem 3rem;border-radius:1.5rem}p[_ngcontent-%COMP%]{display:block;font-size:1.1rem;font-weight:400;margin:.8rem 0}.inputbox[_ngcontent-%COMP%]{color:#030303;width:100%;padding:.5rem;border:none;border-bottom:1.5px solid #ccc;margin-bottom:1rem;border-radius:.3rem;font-family:Roboto,sans-serif;color:#615a5a;font-size:1.1rem;font-weight:500;outline:none}.conclusion[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:.6rem}.button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#333a75 0%,#298096 100%);padding:15px;border:none;border-radius:20px;color:#fff;font-weight:400;font-size:1.2rem;margin-top:10px;margin-left:50%;margin-bottom:2%;width:50%;letter-spacing:.11rem;outline:none}.button[_ngcontent-%COMP%]:hover{transform:scale(1.05) translateY(-3px);box-shadow:3px 3px 6px #38373785}.textarea[_ngcontent-%COMP%]{padding:15px;border-radius:20px;margin-left:10%;margin-right:-45%;width:2000px}@media only screen and (max-width: 1000px){.card[_ngcontent-%COMP%]{flex-direction:column;width:auto}.leftside[_ngcontent-%COMP%]{width:100%;border-radius:0}.rightside[_ngcontent-%COMP%]{width:auto;border-bottom-left-radius:1.5rem;padding:.5rem 3rem 3rem 2rem;border-radius:0}}"]}),n})(),hP=(()=>{class n{constructor(t,r,i){this.authService=t,this.afAuth=r,this.router=i,this.emailSent=!1}ngOnInit(){this.user=this.afAuth.authState,console.log("USer : "+this.user),console.log("URL : "+this.router.url),console.log("Email : "+this.email)}sendEmailLink(t){var r=this;return(0,_e.Z)(function*(){console.log("SEND EMAIL LINK"+r.email);const i={url:"http://localhost:4200/info-administratives",handleCodeInApp:!0};try{yield r.afAuth.sendSignInLinkToEmail(r.email,i),window.localStorage.setItem("emailForSignIn",r.email),r.emailSent=!0,console.log("USER : "+r.user)}catch(a){r.errorMessage=a.message,console.log("qlqch va pas")}})()}getALLUser(){return this.userService.getAllUsers()}confirmSignIn(t){var r=this;return(0,_e.Z)(function*(){console.log("CONFIRM SIGN IN "+r.email);try{if(r.afAuth.isSignInWithEmailLink(t)){let i=window.localStorage.getItem("emailForSignIn");i||(i=window.prompt("Please provide your email for confirmation")),yield r.afAuth.signInWithEmailLink(i,t),window.localStorage.removeItem("emailForSignIn")}}catch(i){r.errorMessage=i.message}})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ax),g.Y36(iy),g.Y36(Ir))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-acces"]],decls:22,vars:2,consts:[[1,"container"],[1,"screen"],[1,"screen__content"],[1,"login"],[1,"login__field"],[1,"login__icon","fas","fa-user"],["type","text","placeholder","Email","name","em","type","email","ngModel","","id","em",1,"login__input",3,"ngModel","ngModelChange"],["em","ngModel"],[1,"button","login__submit",3,"disabled","click"],[1,"button__text"],[1,"button__icon","fas","fa-chevron-right"],[1,"social-login"],[1,"screen__background"],[1,"screen__background__shape","screen__background__shape4"],[1,"screen__background__shape","screen__background__shape3"],[1,"screen__background__shape","screen__background__shape2"],[1,"screen__background__shape","screen__background__shape1"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",4),g._UZ(5,"i",5),g.TgZ(6,"p"),g._uU(7,"Votre mail institutionnel"),g.qZA(),g.TgZ(8,"input",6,7),g.NdJ("ngModelChange",function(a){return r.email=a}),g.qZA()(),g.TgZ(10,"button",8),g.NdJ("click",function(){return r.sendEmailLink(r.email)}),g.TgZ(11,"span",9),g._uU(12,"Obtenir le lien d'acc\xe8s par mail"),g.qZA(),g._UZ(13,"i",10),g.qZA()(),g.TgZ(14,"div",11)(15,"h3"),g._uU(16,"Enqu\xeate"),g.qZA()()(),g.TgZ(17,"div",12),g._UZ(18,"span",13)(19,"span",14)(20,"span",15)(21,"span",16),g.qZA()()()),2&t&&(g.xp6(8),g.Q6J("ngModel",r.email),g.xp6(2),g.Q6J("disabled",r.emailSent))},directives:[Xu,Gs,Do,Pi,Xn,Wa],styles:['@import"https://fonts.googleapis.com/css?family=Raleway:400,700";*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Raleway,sans-serif}body[_ngcontent-%COMP%]{background:linear-gradient(90deg,#C7C5F4,#776BCC)}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}.screen[_ngcontent-%COMP%]{background:linear-gradient(#b6dbec,#c0d9e7,#f9fafc);position:relative;height:600px;width:360px;box-shadow:0 0 24px #9ccde4}.social-login[_ngcontent-%COMP%]{position:absolute;height:140px;width:160px;text-align:center;bottom:0px;right:0px;color:#fff}.screen__content[_ngcontent-%COMP%]{z-index:1;position:relative;height:100%}.screen__background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:0;clip-path:inset(0 0 0 0)}.screen__background__shape[_ngcontent-%COMP%]{transform:rotate(45deg);position:absolute}.screen__background__shape1[_ngcontent-%COMP%]{height:520px;width:520px;background:#FFF;top:-50px;right:120px;border-radius:0 72px 0 0}.screen__background__shape2[_ngcontent-%COMP%]{height:220px;width:220px;background:#78a7dd;top:-172px;right:0;border-radius:32px}.screen__background__shape3[_ngcontent-%COMP%]{height:540px;width:190px;background:linear-gradient(270deg,#78a7dd,#578bad);top:-24px;right:0;border-radius:32px}.screen__background__shape4[_ngcontent-%COMP%]{height:400px;width:200px;background:#7ba0b9;top:420px;right:50px;border-radius:60px}.login[_ngcontent-%COMP%]{width:320px;padding:156px 30px 30px}.login__field[_ngcontent-%COMP%]{padding:20px 0;position:relative}.login__icon[_ngcontent-%COMP%]{position:absolute;top:30px;color:#759bb5}.login__input[_ngcontent-%COMP%]{border:none;border-bottom:2px solid #D1D1D4;background:none;padding:10px 10px 10px 24px;font-weight:700;width:75%;transition:.2s}.login__input[_ngcontent-%COMP%]:active, .login__input[_ngcontent-%COMP%]:focus, .login__input[_ngcontent-%COMP%]:hover{outline:none;border-bottom-color:#87b5e9}.login__submit[_ngcontent-%COMP%]{background:#fff;font-size:14px;margin-top:30px;padding:16px 20px;border-radius:26px;border:1px solid #D4D3E8;text-transform:uppercase;font-weight:700;display:flex;align-items:center;width:100%;color:#95cbd8;box-shadow:0 2px 2px #73b5f3;cursor:pointer;transition:.2s}.login__submit[_ngcontent-%COMP%]:active, .login__submit[_ngcontent-%COMP%]:focus, .login__submit[_ngcontent-%COMP%]:hover{border-color:#6a679e;outline:none}.button__icon[_ngcontent-%COMP%]{font-size:24px;margin-left:auto;color:#7875b5}']}),n})();function eV(n,e){if(1&n&&(g.TgZ(0,"option",14),g._uU(1),g.qZA()),2&n){const t=e.$implicit;g.Q6J("value",t),g.xp6(1),g.hij(" ",t," ")}}function tV(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",15)(1,"input",16),g.NdJ("change",function(i){return g.CHM(t),g.oxw().onCheckboxChange(i)}),g.qZA(),g._uU(2),g.ALo(3,"titlecase"),g.qZA()}if(2&n){const t=e.$implicit;g.xp6(1),g.s9C("value",t),g.xp6(1),g.hij(" ",g.lcZ(3,2,t)," ")}}function nV(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"tr")(1,"input",16),g.NdJ("change",function(i){return g.CHM(t),g.oxw(2).onCheckboxChange(i)}),g.qZA(),g._uU(2),g.qZA()}if(2&n){const t=e.$implicit;g.xp6(1),g.s9C("value",t),g.xp6(1),g.hij(" ",t," ")}}function rV(n,e){if(1&n&&(g.TgZ(0,"table",17)(1,"thead")(2,"tr")(3,"th"),g._uU(4),g.ALo(5,"titlecase"),g.qZA()()(),g.TgZ(6,"tbody"),g.YNc(7,nV,3,2,"tr",18),g.qZA()()),2&n){const t=e.$implicit,r=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,2,t)),g.xp6(3),g.Q6J("ngForOf",r.getChildren(t))}}const iV=[{path:"info-administratives",component:QL},{path:"conclusion",component:XL},{path:"acces",component:hP},{path:"ontologie",component:(()=>{class n{constructor(t,r,i){this.router=t,this.ref=r,this.keyword="name",this.selectedDomain="",this.domaines=["SYNTHESE","B","C"],this.stringXml='<?xml version="1.0" encoding="UTF-8"?>\n  <SYNTHESE>\n    <Chimiemol\xe9culaire>\n      <Biomol\xe9cules>\n        <Acidesnucl\xe9iques>\n          <Amino></Amino>\n        </Acidesnucl\xe9iques>\n      </Biomol\xe9cules> \n      <Polym\xe8res>\n      </Polym\xe8res>\n    </Chimiemol\xe9culaire>\n  </SYNTHESE>',this.items=[],this.xmlReady=parseXml(this.stringXml),this.parsedFile=this.items=Array.from(this.xmlReady.querySelector("SYNTHESE").children).map((a,l)=>a.tagName),this.skills=[""],this.liste=this.rechercheRec(this.items,"SYNTHESE"),this.form=i.group({selectedSkills:new Qu([])})}rechercheRec(t,r){if(this.feuille(t))return"";{t=Array.from(this.xmlReady.querySelector(r).children).map((a,l)=>a.tagName);let i="";for(let a=0;a<t.length;a++)i+=t[a]+" - ",i+=this.rechercheRec(t,t[a]);return i}}feuille(t){return t.length<1}addSkill(t){t&&this.stringXml.includes(t)&&!this.skills.includes(t)&&(""==this.skills[0]&&this.skills.pop(),this.skills.push(t))}onCheckboxChange(t){const r=this.form.controls.selectedSkills;if(t.target.checked)r.push(new vc(t.target.value));else{const i=r.controls.findIndex(a=>a.value===t.target.value);r.removeAt(i)}}submit(){console.log(this.form.value.selectedSkills),this.router.navigate(["/conclusion"])}getChildren(t){return Array.from(this.xmlReady.querySelector(t).children).map((i,a)=>i.tagName)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ir),g.Y36(g.sBO),g.Y36(Yf))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-ontologie"]],decls:17,vars:5,consts:[[1,"mainscreen"],[1,"card"],["novalidate","",3,"formGroup","ngSubmit"],[1,"title"],["name","domaine","ngModel","","id","domaine","required","",1,"inputbox",3,"ngModel","ngModelChange"],["domaine","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"button2",3,"click"],[1,"inputbox",2,"margin-top","5%",3,"keyup.enter","blur"],["filtre",""],["style","margin : 20px",4,"ngFor","ngForOf"],[1,"conteneur",2,"margin","30px"],["class","table table-striped",4,"ngFor","ngForOf"],["type","submit",1,"button"],[3,"value"],[2,"margin","20px"],["type","checkbox","formArrayName","selectedSkills",3,"value","change"],[1,"table","table-striped"],[4,"ngFor","ngForOf"]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"form",2),g.NdJ("ngSubmit",function(){return r.submit()}),g.TgZ(3,"h1",3),g._uU(4,"Vos domaines de comp\xe9tences"),g.qZA(),g.TgZ(5,"select",4,5),g.NdJ("ngModelChange",function(l){return r.selectedDomain=l}),g.YNc(7,eV,2,2,"option",6),g.qZA(),g.TgZ(8,"button",7),g.NdJ("click",function(){return r.addSkill(r.selectedDomain)}),g._uU(9,"Chercher"),g.qZA(),g.TgZ(10,"input",8,9),g.NdJ("keyup.enter",function(){g.CHM(i);const l=g.MAs(11);return r.addSkill(l.value)})("blur",function(){g.CHM(i);const l=g.MAs(11);return r.addSkill(l.value),l.value=""}),g.qZA(),g.YNc(12,tV,4,4,"div",10),g.TgZ(13,"div",11),g.YNc(14,rV,8,4,"table",12),g.qZA(),g.TgZ(15,"button",13),g._uU(16,"Valider"),g.qZA()()()()}2&t&&(g.xp6(2),g.Q6J("formGroup",r.form),g.xp6(3),g.Q6J("ngModel",r.selectedDomain),g.xp6(2),g.Q6J("ngForOf",r.domaines),g.xp6(5),g.Q6J("ngForOf",r.skills),g.xp6(2),g.Q6J("ngForOf",r.form.value.selectedSkills))},directives:[Xu,Gs,tl,na,Xn,Wa,rl,Bn,Yd,bc,Zd],pipes:[ms],styles:['[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;font-size:14px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}h2[_ngcontent-%COMP%]{margin-top:8px 0;margin-left:20px}p[_ngcontent-%COMP%]{margin:0}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(235,229,229);vertical-align:middle;padding:5px;width:200px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#d6f9ff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#fff}.container[_ngcontent-%COMP%]{padding:2rem 0rem}h4[_ngcontent-%COMP%]{margin:2rem 0rem 1rem}body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif!important;margin:0;padding:0;box-sizing:border-box}.mainscreen[_ngcontent-%COMP%]{min-height:100vh;width:100%;position:absolute;display:flex;flex-direction:column;background:linear-gradient(#8cd7fa,#c0d9e7,#f9fafc)}.card[_ngcontent-%COMP%]{width:60rem;margin:auto;padding:30px;background:white;position:relative;align-self:center;border-radius:1.5rem;box-shadow:4px 3px 20px #3535358c;display:flex;flex-direction:row}.leftside[_ngcontent-%COMP%]{background:#e9e9e9;width:25rem;display:inline-flex;align-items:center;justify-content:center;border-top-left-radius:1.5rem;border-bottom-left-radius:1.5rem}.product[_ngcontent-%COMP%]{object-fit:cover;width:30em;height:30em;border-radius:70%}.rightside[_ngcontent-%COMP%]{background-color:#fff;width:35rem;border-bottom-right-radius:1.5rem;border-top-right-radius:1.5rem;padding:1rem 2rem 3rem 3rem}p[_ngcontent-%COMP%]{display:block;font-size:1.1rem;font-weight:400;margin:.8rem 0}.inputbox[_ngcontent-%COMP%]{color:#030303;width:100%;padding:.5rem;border:none;border-bottom:1.5px solid #ccc;margin-bottom:1rem;border-radius:.3rem;font-family:Roboto,sans-serif;color:#615a5a;font-size:1.1rem;font-weight:500;outline:none}.identite[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:.6rem}.button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#333a75 0%,#298096 100%);padding:8px;border:none;border-radius:20px;color:#fff;font-weight:400;font-size:1.2rem;margin-top:10px;width:30%;letter-spacing:.11rem;outline:none}.button2[_ngcontent-%COMP%]{background:linear-gradient(135deg,#333a75 0%,#298096 100%);border:none;border-radius:5px;color:#fff;font-weight:400;font-size:1.2rem;margin-top:10px;width:30%;letter-spacing:.11rem;outline:none}.button[_ngcontent-%COMP%]:hover{transform:scale(1.05) translateY(-3px);box-shadow:3px 3px 6px #38373785}@media only screen and (max-width: 1000px){.card[_ngcontent-%COMP%]{flex-direction:column;width:auto}.leftside[_ngcontent-%COMP%]{width:100%;border-radius:0}.rightside[_ngcontent-%COMP%]{width:auto;border-bottom-left-radius:1.5rem;padding:.5rem 3rem 3rem 2rem;border-radius:0}}']}),n})()},{path:"**",component:hP}];let sV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[$l,zw.forRoot(iV)],zw]}),n})(),oV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[Im],styles:[""],changeDetection:0}),n})();var aV=k(5032);const fP="@firebase/database";let Sx="";function gP(n){Sx=n}class cV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class dV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const mP=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cV(e)}}catch(e){}return new dV},Cg=mP("localStorage"),xx=mP("sessionStorage"),sy=new xo.Yd("@firebase/database"),_P=function(){let n=1;return function(){return n++}}(),yP=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},EE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=EE.apply(null,r):e+="object"==typeof r?(0,O.Pz)(r):r,e+=" "}return e};let Ig=null,vP=!0;const EP=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(sy.logLevel=xo.in.VERBOSE,Ig=sy.log.bind(sy),e&&xx.set("logging_enabled",!0)):"function"==typeof n?Ig=n:(Ig=null,xx.remove("logging_enabled"))},Ai=function(...n){if(!0===vP&&(vP=!1,null===Ig&&!0===xx.get("logging_enabled")&&EP(!0)),Ig){const e=EE.apply(null,n);Ig(e)}},wE=function(n){return function(...e){Ai(n,...e)}},Mx=function(...n){const e="FIREBASE INTERNAL ERROR: "+EE(...n);sy.error(e)},Ll=function(...n){const e=`FIREBASE FATAL ERROR: ${EE(...n)}`;throw sy.error(e),new Error(e)},hs=function(...n){const e="FIREBASE WARNING: "+EE(...n);sy.warn(e)},Lb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},gd="[MIN_NAME]",Vl="[MAX_NAME]",bg=function(n,e){if(n===e)return 0;if(n===gd||e===Vl)return-1;if(e===gd||n===Vl)return 1;{const t=Vb(n),r=Vb(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},pV=function(n,e){return n===e?0:n<e?-1:1},CE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Pz)(e))},Rx=function(n){if("object"!=typeof n||null===n)return(0,O.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Pz)(e[r]),t+=":",t+=Rx(n[e[r]]);return t+="}",t},wP=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Si(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const CP=function(n){(0,O.hu)(!Lb(n),"Invalid JSON number");const r=1023;let i,a,l,f,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const T=w.join("");let A="";for(_=0;_<64;_+=8){let P=parseInt(T.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),A+=P}return A.toLowerCase()},yV=new RegExp("^-?(0*)\\d{1,10}$"),IP=-2147483648,Nx=2147483647,Vb=function(n){if(yV.test(n)){const e=Number(n);if(e>=IP&&e<=Nx)return e}return null},oy=function(n){try{n()}catch(e){setTimeout(()=>{throw hs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},IE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class EV{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){hs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class wV{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ai("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hs(e)}}let bE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const SP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,RP="websocket",NP="long_polling";class Ox{constructor(e,t,r,i,a=!1,l="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Cg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function PP(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===RP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==NP)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function CV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Si(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class IV{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const kx={},Fx={};function Lx(n){const e=n.toString();return kx[e]||(kx[e]=new IV),kx[e]}class DV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&oy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class vf{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wE(e),this.stats_=Lx(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),PP(t,NP,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new DV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vx((...a)=>{const[l,f,_,w,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&SP.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vf.forceAllow_=!0}static forceDisallow(){vf.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!vf.forceAllow_&&(vf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=wP(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Vx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=_P(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Vx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Ai("frame writing exception"),f.stack&&Ai(f.stack),Ai(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ai("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ai("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Bb=null;"undefined"!=typeof MozWebSocket?Bb=MozWebSocket:"undefined"!=typeof WebSocket&&(Bb=WebSocket);let ay=(()=>{class n{constructor(t,r,i,a,l,f,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wE(this.connId),this.stats_=Lx(r),this.connURL=n.connectionURL_(r,f,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,O.Yr)()&&"undefined"!=typeof location&&location.hostname&&SP.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),PP(t,RP,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cg.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${Sx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const f=process.env,_=0===this.connURL.indexOf("wss://")?f.HTTPS_PROXY||f.https_proxy:f.HTTP_PROXY||f.http_proxy;_&&(l.proxy={origin:_})}this.mySock=new Bb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Bb&&!n.forceDisallow_}static previouslyFailed(){return Cg.isInMemoryStorage||!0===Cg.get("previous_websocket_failure")}markConnectionHealthy(){Cg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=wP(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),BP=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[vf,ay]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=ay&&ay.isAvailable();let i=r&&!ay.previouslyFailed();if(t.webSocketOnly&&(r||hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ay];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class zP{constructor(e,t,r,i,a,l,f,_,w,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wE("c:"+this.id+":"),this.transportManager_=new BP(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=IE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=CE("t",e),r=CE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=CE("t",e),r=CE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=CE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Mx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&hs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),IE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):IE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class KP{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class ZP{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class jb extends ZP{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new jb}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class dn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function an(){return new dn("")}function $t(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ef(n){return n.pieces_.length-n.pieceNum_}function Cn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new dn(n.pieces_,e)}function Bx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function DE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function JP(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new dn(e,0)}function Zn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof dn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new dn(t,0)}function Gt(n){return n.pieceNum_>=n.pieces_.length}function Ns(n,e){const t=$t(n),r=$t(e);if(null===t)return e;if(t===r)return Ns(Cn(n),Cn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function zV(n,e){const t=DE(n,0),r=DE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=bg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function jx(n,e){if(Ef(n)!==Ef(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function _a(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ef(n)>Ef(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class KV{constructor(e,t){this.errorPrefix_=t,this.parts_=DE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);XP(this)}}function XP(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Dg(n))}function Dg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Hx extends ZP{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Hx}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const TE=1e3;let $b,Tg=(()=>{class n extends KP{constructor(t,r,i,a,l,f,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=wE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=TE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Hx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&jb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,O.Pz)(l)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new O.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:f=>{const _=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[l];void 0===f||a!==f||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,T=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();hs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Mx("Unrecognized action received from server: "+(0,O.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=TE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=TE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=TE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,_e.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let _=!1,w=null;const T=function(){w?w.close():(_=!0,a())};t.realtime_={close:T,sendRequest:function(B){(0,O.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(B)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,Y]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?Ai("getToken() completed but was canceled"):(Ai("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=Y&&Y.token,w=new zP(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,De=>{hs(De+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(B){t.log_("Failed to get token: "+B),_||(t.repoInfo_.nodeAdmin&&hs(B),T())}}})()}interrupt(t){Ai("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ai("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=TE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>Rx(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new dn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ai("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ai("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Sx.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=jb.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class Hb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new zt(gd,e),i=new zt(gd,t);return 0!==this.compare(r,i)}minPost(){return zt.MIN}}class nO extends Hb{static get __EMPTY_NODE(){return $b}static set __EMPTY_NODE(e){$b=e}compare(e,t){return bg(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Vl,$b)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,$b)}toString(){return".key"}}const Ul=new nO;class Gb{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Gx,Cu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:so.EMPTY_NODE,this.right=null!=l?l:so.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return so.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return so.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class so{constructor(e,t=so.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new so(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Cu.BLACK,null,null))}remove(e){return new so(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Cu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Gb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Gb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Gb(this.root_,null,this.comparator_,!0,e)}}function rU(n,e){return bg(n.name,e.name)}function $x(n,e){return bg(n,e)}so.EMPTY_NODE=new class nU{copy(e,t,r,i,a){return this}insert(e,t,r){return new Cu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rO=function(n){return"number"==typeof n?"number:"+CP(n):"string:"+n},iO=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===Gx||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===Gx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sO,oO,aO,uy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),iO(this.priorityNode_)}static set __childrenNodeConstructor(t){sO=t}static get __childrenNodeConstructor(){return sO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Gt(t)?this:".priority"===$t(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=$t(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===Ef(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Cn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+rO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?CP(this.value_):this.value_,this.lazyHash_=yP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(a>=0,"Unknown leaf type: "+r),(0,O.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Rn=new class aU extends Hb{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?bg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Vl,new uy("[PRIORITY-POST]",aO))}makePost(e,t){const r=oO(e);return new zt(t,new uy("[PRIORITY-POST]",r))}toString(){return".priority"}},uU=Math.log(2);class lU{constructor(e){this.count=parseInt(Math.log(e+1)/uU,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Wb=function(n,e,t,r){n.sort(e);const i=function(_,w){const T=w-_;let A,P;if(0===T)return null;if(1===T)return A=n[_],P=t?t(A):A,new Cu(P,A.node,Cu.BLACK,null,null);{const B=parseInt(T/2,10)+_,Y=i(_,B),De=i(B+1,w);return A=n[B],P=t?t(A):A,new Cu(P,A.node,Cu.BLACK,Y,De)}},f=function(_){let w=null,T=null,A=n.length;const P=function(Y,De){const je=A-Y,At=A;A-=Y;const Dt=i(je+1,At),Mt=n[je],xt=t?t(Mt):Mt;B(new Cu(xt,Mt.node,De,null,Dt))},B=function(Y){w?(w.left=Y,w=Y):(T=Y,w=Y)};for(let Y=0;Y<_.count;++Y){const De=_.nextBitIsOne(),je=Math.pow(2,_.count-(Y+1));De?P(je,Cu.BLACK):(P(je,Cu.BLACK),P(je,Cu.RED))}return T}(new lU(n.length));return new so(r||e,f)};let Wx;const ly={};class md{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(ly&&Rn,"ChildrenNode.ts has not been loaded"),Wx=Wx||new md({".priority":ly},{".priority":Rn}),Wx}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof so?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==Ul,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(zt.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?Wb(r,e.getCompare()):ly;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const T=Object.assign({},this.indexes_);return T[_]=f,new md(T,w)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,a)=>{const l=(0,O.DV)(this.indexSet_,a);if((0,O.hu)(l,"Missing index implementation for "+a),i===ly){if(l.isDefinedOn(e.node)){const f=[],_=t.getIterator(zt.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&f.push(w),w=_.getNext();return f.push(e),Wb(f,l.getCompare())}return ly}{const f=t.get(e.name);let _=i;return f&&(_=_.remove(new zt(e.name,f))),_.insert(e,e.node)}});return new md(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===ly)return i;{const a=t.get(e.name);return a?i.remove(new zt(e.name,a)):i}});return new md(r,this.indexSet_)}}let AE,Nt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&iO(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return AE||(AE=new n(new so($x),null,md.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||AE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?AE:r}}getChild(t){const r=$t(t);return null===r?this:this.getImmediateChild(r).getChild(Cn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new zt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?AE:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=$t(t);if(null===i)return r;{(0,O.hu)(".priority"!==$t(t)||1===Ef(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Cn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Rn,(f,_)=>{r[f]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const _ in r)f[_]=r[_];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+rO(this.getPriority().val())+":"),this.forEachChild(Rn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":yP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===SE?-1:0}withIndex(t){if(t===Ul||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ul||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Rn),a=r.getIterator(Rn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Ul?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const SE=new class cU extends Nt{constructor(){super(new so($x),Nt.EMPTY_NODE,md.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Nt.EMPTY_NODE}isEmpty(){return!1}};function rr(n,e=null){if(null===n)return Nt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new uy(n,rr(e));if(n instanceof Array){let t=Nt.EMPTY_NODE;return Si(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const a=rr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(rr(e))}{const t=[];let r=!1;if(Si(n,(l,f)=>{if("."!==l.substring(0,1)){const _=rr(f);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new zt(l,_)))}}),0===t.length)return Nt.EMPTY_NODE;const a=Wb(t,rU,l=>l.name,$x);if(r){const l=Wb(t,Rn.getCompare());return new Nt(a,rr(e),new md({".priority":l},{".priority":Rn}))}return new Nt(a,rr(e),md.Default)}}Object.defineProperties(zt,{MIN:{value:new zt(gd,Nt.EMPTY_NODE)},MAX:{value:new zt(Vl,SE)}}),nO.__EMPTY_NODE=Nt.EMPTY_NODE,uy.__childrenNodeConstructor=Nt,function iU(n){Gx=n}(SE),function oU(n){aO=n}(SE),function sU(n){oO=n}(rr);class qx extends Hb{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!Gt(e)&&".priority"!==$t(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?bg(e.name,t.name):a}makePost(e,t){const r=rr(e),i=Nt.EMPTY_NODE.updateChild(this.indexPath_,r);return new zt(t,i)}maxPost(){const e=Nt.EMPTY_NODE.updateChild(this.indexPath_,SE);return new zt(Vl,e)}toString(){return DE(this.indexPath_,0).join("/")}}const zx=new class hU extends Hb{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?bg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const r=rr(e);return new zt(t,r)}toString(){return".value"}},cy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fU=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=cy.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=cy.charAt(e[i]);return(0,O.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),cO=function(n){if(n===""+Nx)return"-";const e=Vb(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Vl;const a=cy.charAt(cy.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},dO=function(n){if(n===""+IP)return gd;const e=Vb(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Nx:(delete t[t.length-1],t.join("")):(t[t.length-1]=cy.charAt(cy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function hO(n){return{type:"value",snapshotNode:n}}function dy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function xE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ME(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Zx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(xE(t,f)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(dy(t,r)):l.trackChildChange(ME(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Rn,(i,a)=>{t.hasChild(i)||r.trackChildChange(xE(i,a))}),t.isLeafNode()||t.forEachChild(Rn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(ME(i,a,l))}else r.trackChildChange(dy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Nt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class RE{constructor(e){this.indexedFilter_=new Zx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=RE.getStartPost_(e),this.endPost_=RE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new zt(t,r))||(r=Nt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Nt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Nt.EMPTY_NODE);const a=this;return t.forEachChild(Rn,(l,f)=>{a.matches(new zt(l,f))||(i=i.updateImmediateChild(l,Nt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class gU{constructor(e){this.rangedFilter_=new RE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new zt(t,r))||(r=Nt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Nt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Nt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(f.name,f.node),l++}}else{let a,l,f,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Nt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();f=(P,B)=>A(B,P)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let w=0,T=!1;for(;_.hasNext();){const A=_.getNext();!T&&f(a,A)<=0&&(T=!0),T&&w<this.limit_&&f(A,l)<=0?w++:i=i.updateImmediateChild(A.name,Nt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const A=this.index_.getCompare();l=(P,B)=>A(B,P)}else l=this.index_.getCompare();const f=e;(0,O.hu)(f.numChildren()===this.limit_,"");const _=new zt(t,r),w=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),T=this.rangedFilter_.matches(_);if(f.hasChild(t)){const A=f.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||f.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const B=null==P?1:l(P,_);if(T&&!r.isEmpty()&&B>=0)return null!=a&&a.trackChildChange(ME(t,r,A)),f.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(xE(t,A));const De=f.updateImmediateChild(t,Nt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=a&&a.trackChildChange(dy(P.name,P.node)),De.updateImmediateChild(P.name,P.node)):De}}return r.isEmpty()?e:T&&l(w,_)>=0?(null!=a&&(a.trackChildChange(xE(w.name,w.node)),a.trackChildChange(dy(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(w.name,Nt.EMPTY_NODE)):e}}class qb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rn}copy(){const e=new qb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Yx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Qx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function zb(n,e){const t=n.copy();return t.index_=e,t}function fO(n){const e={};if(n.isDefault())return e;let t;return n.index_===Rn?t="$priority":n.index_===zx?t="$value":n.index_===Ul?t="$key":((0,O.hu)(n.index_ instanceof qx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Pz)(t),n.startSet_&&(e.startAt=(0,O.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function pO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Rn&&(e.i=n.index_.toString()),e}class Kb extends KP{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=wE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Kb.getListenId_(e,r),f={};this.listens_[l]=f;const _=fO(e._queryParams);this.restRequest_(a+".json",_,(w,T)=>{let A=T;if(404===w&&(A=null,w=null),null===w&&this.onDataUpdate_(a,A,!1,r),(0,O.DV)(this.listens_,l)===f){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=Kb.getListenId_(e,t);delete this.listens_[r]}get(e){const t=fO(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let _=null;if(f.status>=200&&f.status<300){try{_=(0,O.cI)(f.responseText)}catch(w){hs("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,_)}else 401!==f.status&&404!==f.status&&hs("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class wU{constructor(){this.rootNode_=Nt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Zb(){return{value:null,children:new Map}}function hy(n,e,t){if(Gt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=$t(e);n.children.has(r)||n.children.set(r,Zb()),hy(n.children.get(r),e=Cn(e),t)}}function Jx(n,e){if(Gt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Rn,(r,i)=>{hy(n,new dn(r),i)}),Jx(n,e)}}if(n.children.size>0){const t=$t(e);return e=Cn(e),n.children.has(t)&&Jx(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Xx(n,e,t){null!==n.value?t(e,n.value):function CU(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Xx(i,new dn(e.toString()+"/"+r),t)})}class IU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Si(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class TU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new IU(e);const r=1e4+2e4*Math.random();IE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Si(e,(i,a)=>{a>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),IE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ya=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ya||(ya={})),ya))();function nM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Yb{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ya.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Gt(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new dn(e));return new Yb(an(),t,this.revert)}}return(0,O.hu)($t(this.path)===e,"operationForChild called for unrelated child."),new Yb(Cn(this.path),this.affectedTree,this.revert)}}class NE{constructor(e,t){this.source=e,this.path=t,this.type=ya.LISTEN_COMPLETE}operationForChild(e){return Gt(this.path)?new NE(this.source,an()):new NE(this.source,Cn(this.path))}}class Ag{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ya.OVERWRITE}operationForChild(e){return Gt(this.path)?new Ag(this.source,an(),this.snap.getImmediateChild(e)):new Ag(this.source,Cn(this.path),this.snap)}}class fy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ya.MERGE}operationForChild(e){if(Gt(this.path)){const t=this.children.subtree(new dn(e));return t.isEmpty()?null:t.value?new Ag(this.source,an(),t.value):new fy(this.source,an(),t)}return(0,O.hu)($t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new fy(this.source,Cn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class wf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Gt(e))return this.isFullyInitialized()&&!this.filtered_;const t=$t(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class AU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function PE(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,_)=>function MU(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new zt(e.childName,e.snapshotNode),i=new zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,_)),l.forEach(f=>{const _=function xU(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(w=>{w.respondsTo(f.type)&&e.push(w.createEvent(_,n.query_))})})}function Qb(n,e){return{eventCache:n,serverCache:e}}function OE(n,e,t,r){return Qb(new wf(e,t,r),n.serverCache)}function mO(n,e,t,r){return Qb(n.eventCache,new wf(e,t,r))}function Jb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Sg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let rM;class Nn{constructor(e,t=(()=>(rM||(rM=new so(pV)),rM))()){this.value=e,this.children=t}static fromObject(e){let t=new Nn(null);return Si(e,(r,i)=>{t=t.set(new dn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:an(),value:this.value};if(Gt(e))return null;{const r=$t(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Cn(e),t);return null!=a?{path:Zn(new dn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Gt(e))return this;{const t=$t(e),r=this.children.get(t);return null!==r?r.subtree(Cn(e)):new Nn(null)}}set(e,t){if(Gt(e))return new Nn(t,this.children);{const r=$t(e),a=(this.children.get(r)||new Nn(null)).set(Cn(e),t),l=this.children.insert(r,a);return new Nn(this.value,l)}}remove(e){if(Gt(e))return this.children.isEmpty()?new Nn(null):new Nn(null,this.children);{const t=$t(e),r=this.children.get(t);if(r){const i=r.remove(Cn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Nn(null):new Nn(this.value,a)}return this}}get(e){if(Gt(e))return this.value;{const t=$t(e),r=this.children.get(t);return r?r.get(Cn(e)):null}}setTree(e,t){if(Gt(e))return t;{const r=$t(e),a=(this.children.get(r)||new Nn(null)).setTree(Cn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Nn(this.value,l)}}fold(e){return this.fold_(an(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Zn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,an(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Gt(e))return null;{const a=$t(e),l=this.children.get(a);return l?l.findOnPath_(Cn(e),Zn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,an(),t)}foreachOnPath_(e,t,r){if(Gt(e))return this;{this.value&&r(t,this.value);const i=$t(e),a=this.children.get(i);return a?a.foreachOnPath_(Cn(e),Zn(t,i),r):new Nn(null)}}foreach(e){this.foreach_(an(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Zn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Iu{constructor(e){this.writeTree_=e}static empty(){return new Iu(new Nn(null))}}function kE(n,e,t){if(Gt(e))return new Iu(new Nn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ns(i,e);return a=a.updateChild(l,t),new Iu(n.writeTree_.set(i,a))}{const i=new Nn(t),a=n.writeTree_.setTree(e,i);return new Iu(a)}}}function iM(n,e,t){let r=n;return Si(t,(i,a)=>{r=kE(r,Zn(e,i),a)}),r}function _O(n,e){if(Gt(e))return Iu.empty();{const t=n.writeTree_.setTree(e,new Nn(null));return new Iu(t)}}function sM(n,e){return null!=xg(n,e)}function xg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ns(t.path,e)):null}function yO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Rn,(r,i)=>{e.push(new zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new zt(r,i.value))}),e}function Cf(n,e){if(Gt(e))return n;{const t=xg(n,e);return new Iu(null!=t?new Nn(t):n.writeTree_.subtree(e))}}function oM(n){return n.writeTree_.isEmpty()}function py(n,e){return vO(an(),n.writeTree_,e)}function vO(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,O.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=vO(Zn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Zn(n,".priority"),r)),t}}function Xb(n,e){return bO(e,n)}function FU(n,e){if(n.snap)return _a(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&_a(Zn(n.path,t),e))return!0;return!1}function VU(n){return n.visible}function EO(n,e,t){let r=Iu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)_a(t,l)?(f=Ns(t,l),r=kE(r,f,a.snap)):_a(l,t)&&(f=Ns(l,t),r=kE(r,an(),a.snap.getChild(f)));else{if(!a.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(_a(t,l))f=Ns(t,l),r=iM(r,f,a.children);else if(_a(l,t))if(f=Ns(l,t),Gt(f))r=iM(r,an(),a.children);else{const _=(0,O.DV)(a.children,$t(f));if(_){const w=_.getChild(Cn(f));r=kE(r,an(),w)}}}}}return r}function wO(n,e,t,r,i){if(r||i){const a=Cf(n.visibleWrites,e);return!i&&oM(a)?t:i||null!=t||sM(a,an())?py(EO(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(_a(w.path,e)||_a(e,w.path))},e),t||Nt.EMPTY_NODE):null}{const a=xg(n.visibleWrites,e);if(null!=a)return a;{const l=Cf(n.visibleWrites,e);return oM(l)?t:null!=t||sM(l,an())?py(l,t||Nt.EMPTY_NODE):null}}}function eD(n,e,t,r){return wO(n.writeTree,n.treePath,e,t,r)}function aM(n,e){return function UU(n,e,t){let r=Nt.EMPTY_NODE;const i=xg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Rn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Cf(n.visibleWrites,e);return t.forEachChild(Rn,(l,f)=>{const _=py(Cf(a,new dn(l)),f);r=r.updateImmediateChild(l,_)}),yO(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return yO(Cf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function CO(n,e,t,r){return function BU(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Zn(e,t);if(sM(n.visibleWrites,a))return null;{const l=Cf(n.visibleWrites,a);return oM(l)?i.getChild(t):py(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function tD(n,e){return function HU(n,e){return xg(n.visibleWrites,e)}(n.writeTree,Zn(n.treePath,e))}function uM(n,e,t){return function jU(n,e,t,r){const i=Zn(e,t),a=xg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?py(Cf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function IO(n,e){return bO(Zn(n.treePath,e),n.writeTree)}function bO(n,e){return{treePath:n,writeTree:e}}class qU{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,ME(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,xE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,dy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ME(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const DO=new class zU{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class lM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new wf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Sg(this.viewCache_),a=function WU(n,e,t,r,i,a){return function $U(n,e,t,r,i,a,l){let f;const _=Cf(n.visibleWrites,e),w=xg(_,an());if(null!=w)f=w;else{if(null==t)return[];f=py(_,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const T=[],A=l.getCompare(),P=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let B=P.getNext();for(;B&&T.length<i;)0!==A(B,r)&&T.push(B),B=P.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function TO(n,e,t,r,i,a){const l=e.eventCache;if(null!=tD(r,t))return e;{let f,_;if(Gt(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Sg(e),A=aM(r,w instanceof Nt?w:Nt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const w=eD(r,Sg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=$t(t);if(".priority"===w){(0,O.hu)(1===Ef(t),"Can't have a priority with additional path components");const T=l.getNode();_=e.serverCache.getNode();const A=CO(r,t,T,_);f=null!=A?n.filter.updatePriority(T,A):l.getNode()}else{const T=Cn(t);let A;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const P=CO(r,t,l.getNode(),_);A=null!=P?l.getNode().getImmediateChild(w).updateChild(T,P):l.getNode().getImmediateChild(w)}else A=uM(r,w,e.serverCache);f=null!=A?n.filter.updateChild(l.getNode(),w,A,T,i,a):l.getNode()}}return OE(e,f,l.isFullyInitialized()||Gt(t),n.filter.filtersNodes())}}function nD(n,e,t,r,i,a,l,f){const _=e.serverCache;let w;const T=l?n.filter:n.filter.getIndexedFilter();if(Gt(t))w=T.updateFullNode(_.getNode(),r,null);else if(T.filtersNodes()&&!_.isFiltered()){const B=_.getNode().updateChild(t,r);w=T.updateFullNode(_.getNode(),B,null)}else{const B=$t(t);if(!_.isCompleteForPath(t)&&Ef(t)>1)return e;const Y=Cn(t),je=_.getNode().getImmediateChild(B).updateChild(Y,r);w=".priority"===B?T.updatePriority(_.getNode(),je):T.updateChild(_.getNode(),B,je,Y,DO,null)}const A=mO(e,w,_.isFullyInitialized()||Gt(t),T.filtersNodes());return TO(n,A,t,i,new lM(i,A,a),f)}function cM(n,e,t,r,i,a,l){const f=e.eventCache;let _,w;const T=new lM(i,e,a);if(Gt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=OE(e,w,!0,n.filter.filtersNodes());else{const A=$t(t);if(".priority"===A)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=OE(e,w,f.isFullyInitialized(),f.isFiltered());else{const P=Cn(t),B=f.getNode().getImmediateChild(A);let Y;if(Gt(P))Y=r;else{const De=T.getCompleteChild(A);Y=null!=De?".priority"===Bx(P)&&De.getChild(JP(P)).isEmpty()?De:De.updateChild(P,r):Nt.EMPTY_NODE}_=B.equals(Y)?e:OE(e,n.filter.updateChild(f.getNode(),A,Y,P,T,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return _}function AO(n,e){return n.eventCache.isCompleteForChild(e)}function SO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function dM(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=Gt(t)?r:new Nn(null).setTree(t,r);const T=e.serverCache.getNode();return w.children.inorderTraversal((A,P)=>{if(T.hasChild(A)){const Y=SO(0,e.serverCache.getNode().getImmediateChild(A),P);_=nD(n,_,new dn(A),Y,i,a,l,f)}}),w.children.inorderTraversal((A,P)=>{const B=!e.serverCache.isCompleteForChild(A)&&void 0===P.value;if(!T.hasChild(A)&&!B){const De=SO(0,e.serverCache.getNode().getImmediateChild(A),P);_=nD(n,_,new dn(A),De,i,a,l,f)}}),_}class nB{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Zx(r.getIndex()),a=function mU(n){return n.loadsAllData()?new Zx(n.getIndex()):n.hasLimit()?new gU(n):new RE(n)}(r);this.processor_=function KU(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,_=i.updateFullNode(Nt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Nt.EMPTY_NODE,f.getNode(),null),T=new wf(_,l.isFullyInitialized(),i.filtersNodes()),A=new wf(w,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=Qb(A,T),this.eventGenerator_=new AU(this.query_)}get query(){return this.query_}}function sB(n,e){const t=Sg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Gt(e)&&!t.getImmediateChild($t(e)).isEmpty())?t.getChild(e):null}function xO(n){return 0===n.eventRegistrations_.length}function MO(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function RO(n,e,t,r){e.type===ya.MERGE&&null!==e.source.queryId&&((0,O.hu)(Sg(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(Jb(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function YU(n,e,t,r,i){const a=new qU;let l,f;if(t.type===ya.OVERWRITE){const w=t;w.source.fromUser?l=cM(n,e,w.path,w.snap,r,i,a):((0,O.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered()&&!Gt(w.path),l=nD(n,e,w.path,w.snap,r,i,f,a))}else if(t.type===ya.MERGE){const w=t;w.source.fromUser?l=function JU(n,e,t,r,i,a,l){let f=e;return r.foreach((_,w)=>{const T=Zn(t,_);AO(e,$t(T))&&(f=cM(n,f,T,w,i,a,l))}),r.foreach((_,w)=>{const T=Zn(t,_);AO(e,$t(T))||(f=cM(n,f,T,w,i,a,l))}),f}(n,e,w.path,w.children,r,i,a):((0,O.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered(),l=dM(n,e,w.path,w.children,r,i,f,a))}else if(t.type===ya.ACK_USER_WRITE){const w=t;l=w.revert?function tB(n,e,t,r,i,a){let l;if(null!=tD(r,t))return e;{const f=new lM(r,e,i),_=e.eventCache.getNode();let w;if(Gt(t)||".priority"===$t(t)){let T;if(e.serverCache.isFullyInitialized())T=eD(r,Sg(e));else{const A=e.serverCache.getNode();(0,O.hu)(A instanceof Nt,"serverChildren would be complete if leaf node"),T=aM(r,A)}T=T,w=n.filter.updateFullNode(_,T,a)}else{const T=$t(t);let A=uM(r,T,e.serverCache);null==A&&e.serverCache.isCompleteForChild(T)&&(A=_.getImmediateChild(T)),w=null!=A?n.filter.updateChild(_,T,A,Cn(t),f,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(_,T,Nt.EMPTY_NODE,Cn(t),f,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=eD(r,Sg(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=tD(r,an()),OE(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function XU(n,e,t,r,i,a,l){if(null!=tD(i,t))return e;const f=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Gt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return nD(n,e,t,_.getNode().getChild(t),i,a,f,l);if(Gt(t)){let w=new Nn(null);return _.getNode().forEachChild(Ul,(T,A)=>{w=w.set(new dn(T),A)}),dM(n,e,t,w,i,a,f,l)}return e}{let w=new Nn(null);return r.foreach((T,A)=>{const P=Zn(t,T);_.isCompleteForPath(P)&&(w=w.set(T,_.getNode().getChild(P)))}),dM(n,e,t,w,i,a,f,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==ya.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);l=function eB(n,e,t,r,i){const a=e.serverCache;return TO(n,mO(e,a.getNode(),a.isFullyInitialized()||Gt(t),a.isFiltered()),t,r,DO,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function QU(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Jb(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(hO(Jb(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function ZU(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,O.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,NO(n,a.changes,a.viewCache.eventCache.getNode(),null)}function NO(n,e,t,r){return function SU(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function pU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),PE(n,i,"child_removed",e,r,t),PE(n,i,"child_added",e,r,t),PE(n,i,"child_moved",a,r,t),PE(n,i,"child_changed",e,r,t),PE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let rD,sD;class PO{constructor(){this.views=new Map}}function hM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,O.hu)(null!=a,"SyncTree gave us an op for an invalid query."),RO(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(RO(l,e,t,r));return a}}function OO(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=eD(t,i?r:null),_=!1;f?_=!0:r instanceof Nt?(f=aM(t,r),_=!1):(f=Nt.EMPTY_NODE,_=!1);const w=Qb(new wf(f,_,!1),new wf(r,i,!1));return new nB(e,w)}return l}function kO(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function If(n,e){let t=null;for(const r of n.views.values())t=t||sB(r,e);return t}function FO(n,e){return e._queryParams.loadsAllData()?iD(n):n.views.get(e._queryIdentifier)}function LO(n,e){return null!=FO(n,e)}function bf(n){return null!=iD(n)}function iD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let gB=1;class VO{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nn(null),this.pendingWriteTree_=function GU(){return{visibleWrites:Iu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fM(n,e,t,r,i){return function NU(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=kE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?gy(n,new Ag({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Df(n,e,t=!1){const r=function OU(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function kU(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&FU(f,r.path)?i=!1:_a(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function LU(n){n.visibleWrites=EO(n.allWrites,VU,an()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=_O(n.visibleWrites,r.path):Si(r.children,_=>{n.visibleWrites=_O(n.visibleWrites,Zn(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Nn(null);return null!=r.snap?a=a.set(an(),!0):Si(r.children,l=>{a=a.set(new dn(l),!0)}),gy(n,new Yb(r.path,a,t))}return[]}function FE(n,e,t){return gy(n,new Ag({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function pM(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||LO(a,e))){const f=function hB(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=bf(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(MO(w,t,r)),xO(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(MO(_,t,r)),xO(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return f&&!bf(n)&&a.push(new(function lB(){return(0,O.hu)(rD,"Reference.ts has not been loaded"),rD}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function cB(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=f.removed;l=f.events;const w=-1!==_.findIndex(A=>A._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(A,P)=>bf(P));if(w&&!T){const A=n.syncPointTree_.subtree(i);if(!A.isEmpty()){const P=function IB(n){return n.fold((e,t,r)=>{if(t&&bf(t))return[iD(t)];{let i=[];return t&&(i=kO(t)),Si(r,(a,l)=>{i=i.concat(l)}),i}})}(A);for(let B=0;B<P.length;++B){const Y=P[B],De=Y.query,je=HO(n,Y);n.listenProvider_.startListening(LE(De),aD(n,De),je.hashFn,je.onComplete)}}}!T&&_.length>0&&!r&&(w?n.listenProvider_.stopListening(LE(e),null):_.forEach(A=>{const P=n.queryToTagMap.get(uD(A));n.listenProvider_.stopListening(LE(A),P)})),function bB(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=uD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return l}function UO(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(A,P)=>{const B=Ns(A,r);i=i||If(P,B),a=a||bf(P)});let f,l=n.syncPointTree_.get(r);l?(a=a||bf(l),i=i||If(l,an())):(l=new PO,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?f=!0:(f=!1,i=Nt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,B)=>{const Y=If(B,an());Y&&(i=i.updateImmediateChild(P,Y))}));const _=LO(l,e);if(!_&&!e._queryParams.loadsAllData()){const A=uD(e);(0,O.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const P=function DB(){return gB++}();n.queryToTagMap.set(A,P),n.tagToQueryMap.set(P,A)}let T=function dB(n,e,t,r,i,a){const l=OO(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function oB(n,e){n.eventRegistrations_.push(e)}(l,t),function aB(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Rn,(a,l)=>{r.push(dy(a,l))}),t.isFullyInitialized()&&r.push(hO(t.getNode())),NO(n,r,t.getNode(),e)}(l,t)}(l,e,t,Xb(n.pendingWriteTree_,r),i,f);if(!_&&!a){const A=FO(l,e);T=T.concat(function TB(n,e,t){const r=e._path,i=aD(n,e),a=HO(n,t),l=n.listenProvider_.startListening(LE(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!bf(f.value),"If we're adding a query, it shouldn't be shadowed");else{const _=f.fold((w,T,A)=>{if(!Gt(w)&&T&&bf(T))return[iD(T).query];{let P=[];return T&&(P=P.concat(kO(T).map(B=>B.query))),Si(A,(B,Y)=>{P=P.concat(Y)}),P}});for(let w=0;w<_.length;++w){const T=_[w];n.listenProvider_.stopListening(LE(T),aD(n,T))}}return l}(n,e,A))}return T}function oD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const w=If(f,Ns(l,e));if(w)return w});return wO(i,e,a,t,!0)}function gy(n,e){return BO(e,n.syncPointTree_,null,Xb(n.pendingWriteTree_,an()))}function BO(n,e,t,r){if(Gt(n.path))return jO(n,e,t,r);{const i=e.get(an());null==t&&null!=i&&(t=If(i,an()));let a=[];const l=$t(n.path),f=n.operationForChild(l),_=e.children.get(l);if(_&&f){const w=t?t.getImmediateChild(l):null,T=IO(r,l);a=a.concat(BO(f,_,w,T))}return i&&(a=a.concat(hM(i,n,r,t))),a}}function jO(n,e,t,r){const i=e.get(an());null==t&&null!=i&&(t=If(i,an()));let a=[];return e.children.inorderTraversal((l,f)=>{const _=t?t.getImmediateChild(l):null,w=IO(r,l),T=n.operationForChild(l);T&&(a=a.concat(jO(T,f,_,w)))}),i&&(a=a.concat(hM(i,n,r,t))),a}function HO(n,e){const t=e.query,r=aD(n,t);return{hashFn:()=>(function rB(n){return n.viewCache_.serverCache.getNode()}(e)||Nt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function vB(n,e,t){const r=gM(n,t);if(r){const i=mM(r),a=i.path,l=i.queryId,f=Ns(a,e);return _M(n,a,new NE(nM(l),f))}return[]}(n,t._path,r):function yB(n,e){return gy(n,new NE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function _V(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return pM(n,t,null,a)}}}}function aD(n,e){const t=uD(e);return n.queryToTagMap.get(t)}function uD(n){return n._path.toString()+"$"+n._queryIdentifier}function gM(n,e){return n.tagToQueryMap.get(e)}function mM(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new dn(n.substr(0,e))}}function _M(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),hM(r,t,Xb(n.pendingWriteTree_,e),null)}function LE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function pB(){return(0,O.hu)(sD,"Reference.ts has not been loaded"),sD}())(n._repo,n._path):n}class yM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yM(t)}node(){return this.node_}}class vM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Zn(this.path_,e);return new vM(this.syncTree_,t)}node(){return oD(this.syncTree_,this.path_)}}const $O=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?SB(n[".sv"],e,t):"object"==typeof n[".sv"]?xB(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},SB=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},xB=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},GO=function(n,e,t,r){return wM(e,new vM(t,n),r)},EM=function(n,e,t){return wM(n,new yM(e),t)};function wM(n,e,t){const r=n.getPriority().val(),i=$O(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=$O(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new uy(f,rr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new uy(i))),l.forEachChild(Rn,(f,_)=>{const w=wM(_,e.getImmediateChild(f),t);w!==_&&(a=a.updateImmediateChild(f,w))}),a}}class CM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function lD(n,e){let t=e instanceof dn?e:new dn(e),r=n,i=$t(t);for(;null!==i;){const a=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new CM(i,r,a),t=Cn(t),i=$t(t)}return r}function Mg(n){return n.node.value}function IM(n,e){n.node.value=e,bM(n)}function WO(n){return n.node.childCount>0}function cD(n,e){Si(n.node.children,(t,r)=>{e(new CM(t,n,r))})}function qO(n,e,t,r){t&&!r&&e(n),cD(n,i=>{qO(i,e,!0,r)}),t&&r&&e(n)}function VE(n){return new dn(null===n.parent?n.name:VE(n.parent)+"/"+n.name)}function bM(n){null!==n.parent&&function NB(n,e,t){const r=function MB(n){return void 0===Mg(n)&&!WO(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,bM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,bM(n))}(n.parent,n.name,n)}const PB=/[\[\].#$\/\u0000-\u001F\u007F]/,OB=/[\[\].#$\u0000-\u001F\u007F]/,DM=10485760,dD=function(n){return"string"==typeof n&&0!==n.length&&!PB.test(n)},zO=function(n){return"string"==typeof n&&0!==n.length&&!OB.test(n)},UE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Lb(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},Bl=function(n,e,t,r){r&&void 0===e||BE((0,O.gK)(n,"value"),e,t)},BE=function(n,e,t){const r=t instanceof dn?new KV(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Dg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Dg(r)+" with contents = "+e.toString());if(Lb(e))throw new Error(n+"contains "+e.toString()+" "+Dg(r));if("string"==typeof e&&e.length>DM/3&&(0,O.ug)(e)>DM)throw new Error(n+"contains a string greater than "+DM+" utf8 bytes "+Dg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Si(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!dD(l)))throw new Error(n+" contains an invalid key ("+l+") "+Dg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ZV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),XP(n)})(r,l),BE(n,f,r),function YV(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Dg(r)+" in addition to actual children.")}},KO=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Si(e,(l,f)=>{const _=new dn(l);if(BE(i,f,Zn(t,_)),".priority"===Bx(_)&&!UE(f))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=DE(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!dD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(zV);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&_a(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},TM=function(n,e,t){if(!t||void 0!==e){if(Lb(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!UE(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},jE=function(n,e,t,r){if(!(r&&void 0===t||dD(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},HE=function(n,e,t,r){if(!(r&&void 0===t||zO(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},va=function(n,e){if(".info"===$t(e))throw new Error(n+" failed = Can't modify data under /.info/")},ZO=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!dD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zO(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class VB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!jx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function AM(n,e,t){hD(n,t),YO(n,r=>jx(r,e))}function Ea(n,e,t){hD(n,t),YO(n,r=>_a(r,e)||_a(e,r))}function YO(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(UB(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function UB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ig&&Ai("event: "+t.toString()),oy(r)}}}const QO="repo_interrupt";class jB{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new VB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zb(),this.transactionQueueTree_=new CM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JO(n){const t=n.infoData_.getNode(new dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function $E(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:JO(n)})}function XO(n,e,t,r,i){n.dataUpdateCount++;const a=new dn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,O.UI)(t,w=>rr(w));l=function wB(n,e,t,r){const i=gM(n,r);if(i){const a=mM(i),l=a.path,f=a.queryId,_=Ns(l,e),w=Nn.fromObject(t);return _M(n,l,new fy(nM(f),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=rr(t);l=function EB(n,e,t,r){const i=gM(n,r);if(null!=i){const a=mM(i),l=a.path,f=a.queryId,_=Ns(l,e);return _M(n,l,new Ag(nM(f),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,O.UI)(t,w=>rr(w));l=function _B(n,e,t){const r=Nn.fromObject(t);return gy(n,new fy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=rr(t);l=FE(n.serverSyncTree_,a,_)}let f=a;l.length>0&&(f=_y(n,a)),Ea(n.eventQueue_,f,l)}function ek(n,e){SM(n,"connected",e),!1===e&&function qB(n){my(n,"onDisconnectEvents");const e=$E(n),t=Zb();Xx(n.onDisconnect_,an(),(i,a)=>{const l=GO(i,a,n.serverSyncTree_,e);hy(t,i,l)});let r=[];Xx(t,an(),(i,a)=>{r=r.concat(FE(n.serverSyncTree_,i,a));const l=NM(n,i);_y(n,l)}),n.onDisconnect_=Zb(),Ea(n.eventQueue_,an(),r)}(n)}function SM(n,e,t){const r=new dn("/.info/"+e),i=rr(t);n.infoData_.updateSnapshot(r,i);const a=FE(n.infoSyncTree_,r,i);Ea(n.eventQueue_,r,a)}function fD(n){return n.nextWriteId_++}function xM(n,e,t,r,i){my(n,"set",{path:e.toString(),value:t,priority:r});const a=$E(n),l=rr(t,r),f=oD(n.serverSyncTree_,e),_=EM(l,f,a),w=fD(n),T=fM(n.serverSyncTree_,e,_,w,!0);hD(n.eventQueue_,T),n.server_.put(e.toString(),l.val(!0),(P,B)=>{const Y="ok"===P;Y||hs("set at "+e+" failed: "+P);const De=Df(n.serverSyncTree_,w,!Y);Ea(n.eventQueue_,e,De),Tf(0,i,P,B)});const A=NM(n,e);_y(n,A),Ea(n.eventQueue_,A,[])}function zB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Jx(n.onDisconnect_,e),Tf(0,t,r,i)})}function tk(n,e,t,r){const i=rr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&hy(n.onDisconnect_,e,i),Tf(0,r,a,l)})}function MM(n,e,t){let r;r=".info"===$t(e._path)?pM(n.infoSyncTree_,e,t):pM(n.serverSyncTree_,e,t),AM(n.eventQueue_,e._path,r)}function nk(n){n.persistentConnection_&&n.persistentConnection_.interrupt(QO)}function my(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ai(t,...e)}function Tf(n,e,t,r){e&&oy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function RM(n,e,t){return oD(n.serverSyncTree_,e,t)||Nt.EMPTY_NODE}function pD(n,e=n.transactionQueueTree_){if(e||gD(n,e),Mg(e)){const t=ik(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function XB(n,e,t){const r=t.map(w=>w.currentWriteId),i=RM(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const T=t[w];(0,O.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const A=Ns(e,T.path);a=a.updateChild(A,T.currentOutputSnapshotRaw)}const f=a.val(!0),_=e;n.server_.put(_.toString(),f,w=>{my(n,"transaction put response",{path:_.toString(),status:w});let T=[];if("ok"===w){const A=[];for(let P=0;P<t.length;P++)t[P].status=2,T=T.concat(Df(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&A.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();gD(n,lD(n.transactionQueueTree_,e)),pD(n,n.transactionQueueTree_),Ea(n.eventQueue_,e,T);for(let P=0;P<A.length;P++)oy(A[P])}else{if("datastale"===w)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{hs("transaction at "+_.toString()+" failed: "+w);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=w}_y(n,e)}},l)}(n,VE(e),t)}else WO(e)&&cD(e,t=>{pD(n,t)})}function _y(n,e){const t=rk(n,e),r=VE(t);return function e2(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const _=e[f],w=Ns(t,_.path);let A,T=!1;if((0,O.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)T=!0,A=_.abortReason,i=i.concat(Df(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)T=!0,A="maxretry",i=i.concat(Df(n.serverSyncTree_,_.currentWriteId,!0));else{const P=RM(n,_.path,l);_.currentInputSnapshot=P;const B=e[f].update(P.val());if(void 0!==B){BE("transaction failed: Data returned ",B,_.path);let Y=rr(B);"object"==typeof B&&null!=B&&(0,O.r3)(B,".priority")||(Y=Y.updatePriority(P.getPriority()));const je=_.currentWriteId,At=$E(n),Dt=EM(Y,P,At);_.currentOutputSnapshotRaw=Y,_.currentOutputSnapshotResolved=Dt,_.currentWriteId=fD(n),l.splice(l.indexOf(je),1),i=i.concat(fM(n.serverSyncTree_,_.path,Dt,_.currentWriteId,_.applyLocally)),i=i.concat(Df(n.serverSyncTree_,je,!0))}else T=!0,A="nodata",i=i.concat(Df(n.serverSyncTree_,_.currentWriteId,!0))}Ea(n.eventQueue_,t,i),i=[],T&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===A?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(A),!1,null)))}gD(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)oy(r[f]);pD(n,n.transactionQueueTree_)}(n,ik(n,t),r),r}function rk(n,e){let t,r=n.transactionQueueTree_;for(t=$t(e);null!==t&&void 0===Mg(r);)r=lD(r,t),t=$t(e=Cn(e));return r}function ik(n,e){const t=[];return sk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function sk(n,e,t){const r=Mg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);cD(e,i=>{sk(n,i,t)})}function gD(n,e){const t=Mg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,IM(e,t.length>0?t:void 0)}cD(e,r=>{gD(n,r)})}function NM(n,e){const t=VE(rk(n,e)),r=lD(n.transactionQueueTree_,e);return function RB(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{PM(n,i)}),PM(n,r),qO(r,i=>{PM(n,i)}),t}function PM(n,e){const t=Mg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,O.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,O.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Df(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?IM(e,void 0):t.length=a+1,Ea(n.eventQueue_,VE(e),i);for(let l=0;l<r.length;l++)oy(r[l])}}const OM=function(n,e){const t=r2(n),r=t.namespace;return"firebase.com"===t.domain&&Ll(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ll("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ox(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new dn(t.pathString)}},r2=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let T=n.indexOf("/");-1===T&&(T=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(T,A)),T<A&&(i=function t2(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(T,A)));const P=function n2(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):hs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));w=e.indexOf(":"),w>=0?(l="https"===f||"wss"===f,_=parseInt(e.substring(w+1),10)):w=e.length;const B=e.slice(0,w);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}};class ok{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class ak{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class uk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class lk{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return zB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){va("OnDisconnect.remove",this._path);const e=new O.BH;return tk(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){va("OnDisconnect.set",this._path),Bl("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return tk(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){va("OnDisconnect.setWithPriority",this._path),Bl("OnDisconnect.setWithPriority",e,this._path,!1),TM("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function KB(n,e,t,r,i){const a=rr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&hy(n.onDisconnect_,e,a),Tf(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){va("OnDisconnect.update",this._path),KO("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function ZB(n,e,t,r){if((0,O.xb)(t))return Ai("onDisconnect().update() called with empty data.  Don't do anything."),void Tf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Si(t,(l,f)=>{const _=rr(f);hy(n.onDisconnect_,Zn(e,l),_)}),Tf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class oo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Gt(this._path)?null:Bx(this._path)}get ref(){return new wa(this._repo,this._path)}get _queryIdentifier(){const e=pO(this._queryParams),t=Rx(e);return"{}"===t?"default":t}get _queryObject(){return pO(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof oo))return!1;const t=this._repo===e._repo,r=jx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function qV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function mD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Af(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ul){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==gd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Vl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Rn){if(null!=e&&!UE(e)||null!=t&&!UE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof qx||n.getIndex()===zx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function _D(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class wa extends oo{constructor(e,t){super(e,t,new qb,!1)}get parent(){const e=JP(this._path);return null===e?null:new wa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Rg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new dn(e),r=Ng(this.ref,e);return new Rg(this._node.getChild(t),r,Rn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Rg(i,Ng(this.ref,r),Rn)))}hasChild(e){const t=new dn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ck(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?Ng(n._root,e):n._root}function dk(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=OM(e,n._repo.repoInfo_.nodeAdmin);ZO("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ll("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),ck(n,t.path.toString())}function Ng(n,e){return null===$t((n=(0,O.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),HE("child","path",t,!1)):HE("child","path",e,!1),new wa(n._repo,Zn(n._path,e));var t}function kM(n,e){n=(0,O.m9)(n),va("set",n._path),Bl("set",e,n._path,!1);const t=new O.BH;return xM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function u2(n,e){KO("update",e,n._path,!1);const t=new O.BH;return function WB(n,e,t,r){my(n,"update",{path:e.toString(),value:t});let i=!0;const a=$E(n),l={};if(Si(t,(f,_)=>{i=!1,l[f]=GO(Zn(e,f),rr(_),n.serverSyncTree_,a)}),i)Ai("update() called with empty data.  Don't do anything."),Tf(0,r,"ok",void 0);else{const f=fD(n),_=function mB(n,e,t,r){!function PU(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=iM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Nn.fromObject(t);return gy(n,new fy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);hD(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,T)=>{const A="ok"===w;A||hs("update at "+e+" failed: "+w);const P=Df(n.serverSyncTree_,f,!A),B=P.length>0?_y(n,e):e;Ea(n.eventQueue_,B,P),Tf(0,r,w,T)}),Si(t,w=>{const T=NM(n,Zn(e,w));_y(n,T)}),Ea(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function l2(n){return function GB(n,e){const t=function CB(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,T)=>{const A=Ns(w,t);r=r||If(T,A)});let i=n.syncPointTree_.get(t);i?r=r||If(i,an()):(i=new PO,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new wf(r,!0,!1):null;return function iB(n){return Jb(n.viewCache_)}(OO(i,e,Xb(n.pendingWriteTree_,e._path),a?l.getNode():Nt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=rr(r).withIndex(e._queryParams.getIndex()),a=FE(n.serverSyncTree_,e._path,i);return AM(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(my(n,"get for query "+(0,O.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,O.m9)(n))._repo,n).then(e=>new Rg(e,new wa(n._repo,n._path),n._queryParams.getIndex()))}class yD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new ok("value",this,new Rg(e.snapshotNode,new wa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ak(this,e,t):null}matches(e){return e instanceof yD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class vD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ak(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=Ng(new wa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new ok(e.type,this,new Rg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof vD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function GE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(T,A)=>{MM(n._repo,n,f),_(T,A)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new uk(t,a||void 0),f="value"===e?new yD(l):new vD(e,l);return function YB(n,e,t){let r;r=".info"===$t(e._path)?UO(n.infoSyncTree_,e,t):UO(n.serverSyncTree_,e,t),AM(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>MM(n._repo,n,f)}function FM(n,e,t,r){return GE(n,"value",e,t,r)}function hk(n,e,t,r){return GE(n,"child_added",e,t,r)}function fk(n,e,t,r){return GE(n,"child_changed",e,t,r)}function pk(n,e,t,r){return GE(n,"child_moved",e,t,r)}function gk(n,e,t,r){return GE(n,"child_removed",e,t,r)}function mk(n,e,t){let r=null;const i=t?new uk(t):null;"value"===e?r=new yD(i):e&&(r=new vD(e,i)),MM(n._repo,n,r)}class bu{}class _k extends bu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("endAt",this._value,e._path,!0);const t=Qx(e._queryParams,this._value,this._key);if(_D(t),Af(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class d2 extends bu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("endBefore",this._value,e._path,!1);const t=function EU(n,e,t){let r,i;return n.index_===Ul?("string"==typeof e&&(e=dO(e)),i=Qx(n,e,t)):(r=null==t?gd:dO(t),i=Qx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(_D(t),Af(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class yk extends bu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("startAt",this._value,e._path,!0);const t=Yx(e._queryParams,this._value,this._key);if(_D(t),Af(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class p2 extends bu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("startAfter",this._value,e._path,!1);const t=function vU(n,e,t){let r;if(n.index_===Ul)"string"==typeof e&&(e=cO(e)),r=Yx(n,e,t);else{let i;i=null==t?Vl:cO(t),r=Yx(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(_D(t),Af(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class m2 extends bu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new oo(e._repo,e._path,function _U(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class y2 extends bu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new oo(e._repo,e._path,function yU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class E2 extends bu{constructor(e){super(),this._path=e}_apply(e){mD(e,"orderByChild");const t=new dn(this._path);if(Gt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new qx(t),i=zb(e._queryParams,r);return Af(i),new oo(e._repo,e._path,i,!0)}}class C2 extends bu{_apply(e){mD(e,"orderByKey");const t=zb(e._queryParams,Ul);return Af(t),new oo(e._repo,e._path,t,!0)}}class b2 extends bu{_apply(e){mD(e,"orderByPriority");const t=zb(e._queryParams,Rn);return Af(t),new oo(e._repo,e._path,t,!0)}}class T2 extends bu{_apply(e){mD(e,"orderByValue");const t=zb(e._queryParams,zx);return Af(t),new oo(e._repo,e._path,t,!0)}}class S2 extends bu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Bl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _k(this._value,this._key)._apply(new yk(this._value,this._key)._apply(e))}}function Du(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function uB(n){(0,O.hu)(!rD,"__referenceConstructor has already been defined"),rD=n})(wa),function fB(n){(0,O.hu)(!sD,"__referenceConstructor has already been defined"),sD=n}(wa);const LM={};function Ek(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ll("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ai("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=OM(a,i),f=l.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${f.namespace}`,l=OM(a,i),f=l.repoInfo):_=!l.repoInfo.secure;const T=i&&_?new bE(bE.OWNER):new wV(n.name,n.options,e);ZO("Invalid Firebase Database URL",l),Gt(l.path)||Ll("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function P2(n,e,t,r){let i=LM[e.name];i||(i={},LM[e.name]=i);let a=i[n.toURLString()];return a&&Ll("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new jB(n,false,t,r),i[n.toURLString()]=a,a}(f,n,T,new EV(n.name,t));return new k2(A,n)}class k2{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function HB(n,e,t){if(n.stats_=Lx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Kb(n.repoInfo_,(r,i,a,l)=>{XO(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ek(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Tg(n.repoInfo_,e,(r,i,a,l)=>{XO(n,r,i,a,l)},r=>{ek(n,r)},r=>{!function $B(n,e){Si(e,(t,r)=>{SM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function bV(n,e){const t=n.toString();return Fx[t]||(Fx[t]=e()),Fx[t]}(n.repoInfo_,()=>new TU(n.stats_,n.server_)),n.infoData_=new wU,n.infoSyncTree_=new VO({startListening:(r,i,a,l)=>{let f=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(f=FE(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),SM(n,"connected",!1),n.serverSyncTree_=new VO({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,_)=>{const w=l(f,_);Ea(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wa(this._repo,an())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function N2(n,e){const t=LM[e];(!t||t[n.key]!==n)&&Ll(`Database ${e}(${n.repoInfo_}) has already been deleted.`),nk(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ll("Cannot call "+e+" on a deleted database.")}}function wk(){BP.IS_TRANSPORT_INITIALIZED&&hs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function F2(){wk(),vf.forceDisallow()}function L2(){wk(),ay.forceDisallow(),vf.forceAllow()}function j2(n,e){EP(n,e)}const $2={".sv":"timestamp"};class q2{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Tg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Tg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function H2(n){gP(la.SDK_VERSION),(0,la._registerComponent)(new ca.wA("database",(e,{instanceIdentifier:t})=>Ek(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,la.registerVersion)(fP,"0.13.0",n),(0,la.registerVersion)(fP,"0.13.0","esm2017")}();const Y2=new xo.Yd("@firebase/database-compat"),Ck=function(n){Y2.warn("FIREBASE WARNING: "+n)};class X2{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Ck("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class ej{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Sf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),HE("DataSnapshot.child","path",e,!1),new Sf(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),HE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Sf(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Fo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Wi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const l=Wi.getCancelAndContextArgs_("Query.on",r,i),f=(w,T)=>{t.call(l.context,new Sf(this.database,w),T)};f.userCallback=t,f.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return FM(this._delegate,f,_),t;case"child_added":return hk(this._delegate,f,_),t;case"child_removed":return gk(this._delegate,f,_),t;case"child_changed":return fk(this._delegate,f,_),t;case"child_moved":return pk(this._delegate,f,_),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,mk(this._delegate,e,i)}else mk(this._delegate,e)}get(){return l2(this._delegate).then(e=>new Sf(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const a=Wi.getCancelAndContextArgs_("Query.once",r,i),l=new O.BH,f=(w,T)=>{const A=new Sf(this.database,w);t&&t.call(a.context,A,T),l.resolve(A)};f.userCallback=t,f.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":FM(this._delegate,f,_,{onlyOnce:!0});break;case"child_added":hk(this._delegate,f,_,{onlyOnce:!0});break;case"child_removed":gk(this._delegate,f,_,{onlyOnce:!0});break;case"child_changed":fk(this._delegate,f,_,{onlyOnce:!0});break;case"child_moved":pk(this._delegate,f,_,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new Wi(this.database,Du(this._delegate,function _2(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new m2(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new Wi(this.database,Du(this._delegate,function v2(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new y2(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new Wi(this.database,Du(this._delegate,function w2(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return HE("orderByChild","path",n,!1),new E2(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new Wi(this.database,Du(this._delegate,function I2(){return new C2}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new Wi(this.database,Du(this._delegate,function D2(){return new b2}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new Wi(this.database,Du(this._delegate,function A2(){return new T2}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new Wi(this.database,Du(this._delegate,function f2(n=null,e){return jE("startAt","key",e,!0),new yk(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new Wi(this.database,Du(this._delegate,function g2(n,e){return jE("startAfter","key",e,!0),new p2(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new Wi(this.database,Du(this._delegate,function c2(n,e){return jE("endAt","key",e,!0),new _k(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new Wi(this.database,Du(this._delegate,function h2(n,e){return jE("endBefore","key",e,!0),new d2(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new Wi(this.database,Du(this._delegate,function x2(n,e){return jE("equalTo","key",e,!0),new S2(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Wi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Fo(this.database,new wa(this._delegate._repo,this._delegate._path))}}class Fo extends Wi{constructor(e,t){super(e,new oo(t._repo,t._path,new qb,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Fo(this.database,Ng(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Fo(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Fo(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=kM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Ck("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}va("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=u2(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function a2(n,e,t){if(va("setWithPriority",n._path),Bl("setWithPriority",e,n._path,!1),TM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return xM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function s2(n){return va("remove",n._path),kM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function z2(n,e,t){var r;if(n=(0,O.m9)(n),va("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new O.BH,f=FM(n,()=>{});return function JB(n,e,t,r,i,a){my(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:_P(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=RM(n,e,void 0);l.currentInputSnapshot=f;const _=l.update(f.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{BE("transaction failed: Data returned ",_,l.path),l.status=0;const w=lD(n.transactionQueueTree_,e),T=Mg(w)||[];let A;T.push(l),IM(w,T),"object"==typeof _&&null!==_&&(0,O.r3)(_,".priority")?(A=(0,O.DV)(_,".priority"),(0,O.hu)(UE(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(oD(n.serverSyncTree_,e)||Nt.EMPTY_NODE).getPriority().val();const P=$E(n),B=rr(_,A),Y=EM(B,f,P);l.currentOutputSnapshotRaw=B,l.currentOutputSnapshotResolved=Y,l.currentWriteId=fD(n);const De=fM(n.serverSyncTree_,e,Y,l.currentWriteId,l.applyLocally);Ea(n.eventQueue_,e,De),pD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,T)=>{let A=null;_?a.reject(_):(A=new Rg(T,new wa(n._repo,n._path),Rn),a.resolve(new q2(w,A)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new ej(a.committed,new Sf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function o2(n,e){n=(0,O.m9)(n),va("setPriority",n._path),TM("setPriority",e,!1);const t=new O.BH;return xM(n._repo,Zn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function i2(n,e){n=(0,O.m9)(n),va("push",n._path),Bl("push",e,n._path,!0);const t=JO(n._repo),r=fU(t),i=Ng(n,r),a=Ng(n,r);let l;return l=null!=e?kM(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Fo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Fo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return va("Reference.onDisconnect",this._delegate._path),new X2(new lk(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class WE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:F2,forceLongPolling:L2}}useEmulator(e,t,r={}){!function V2(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ll("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ll('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new bE(bE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);a=new bE(l)}!function R2(n,e,t,r){n.repoInfo_=new Ox(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Fo){const t=dk(this._delegate,e.toString());return new Fo(this,t)}{const t=ck(this._delegate,e);return new Fo(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=dk(this._delegate,e);return new Fo(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function U2(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),nk(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function B2(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function QB(n){n.persistentConnection_&&n.persistentConnection_.resume(QO)}(n._repo)}(this._delegate)}}WE.ServerValue={TIMESTAMP:function G2(){return $2}(),increment:n=>function W2(n){return{".sv":{increment:n}}}(n)};var nj=Object.freeze({__proto__:null,initStandalone:function tj({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){gP(t);const l=new ca.zt("auth-internal",new ca.H0("database-standalone"));return l.setComponent(new ca.wA("auth-internal",()=>r,"PRIVATE")),{instance:new WE(Ek(n,l,void 0,e,a),n),namespace:i}}});const rj=WE.ServerValue;function Ik(n){return null==n}function bk(n){return"function"==typeof n.set}function Dk(n,e){return bk(e)?e:n.ref(e)}function Tk(n,e){if(function sj(n){return"string"==typeof n}(n))return e.stringCase();if(bk(n))return e.firebaseCase();if(function oj(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function qE(n,e,t="on",r=dv.z){return new ws.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,ht.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,ON.B)())}function Ak(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function lj(n,e){const{payload:t,prevKey:r,key:i}=e,a=Ak(n,i),l=function uj(n,e){if(Ik(e))return 0;{const t=Ak(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function Sk(n){return(Ik(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function xk(n,e,t){return function aj(n,e,t){return qE(n,"value","once",t).pipe(cr(r=>{const i=[nt(r)];return e.forEach(a=>i.push(qE(n,a,"on",t))),(0,JS.T)(...i).pipe(Ts(lj,[]))}),Qw())}(n,e=Sk(e),t)}function Mk(n,e,t){const r=(e=Sk(e)).map(i=>qE(n,i,"on",t));return(0,JS.T)(...r)}function Rk(n,e){return function(r,i){return Tk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function fj(n){return function(t){return t?Tk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Nk(n,e){return function(){return qE(n,"value","on",e)}}!function ij(n){n.INTERNAL.registerComponent(new ca.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new WE(i,r)},"PUBLIC").setServiceProps({Reference:Fo,Query:Wi,Database:WE,DataSnapshot:Sf,enableLogging:j2,INTERNAL:nj,ServerValue:rj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(hv.Z);const mj=new g.OlP("angularfire2.realtimeDatabaseURL"),_j=new g.OlP("angularfire2.database.use-emulator");let yj=(()=>{class n{constructor(t,r,i,a,l,f,_,w,T,A,P,B,Y,De,je){this.schedulers=f;const At=_,Dt=(0,ji.on)(t,l,r);w&&Ix(Dt,l,T,P,B,Y,A,De),this.database=(0,ji.cc)(`${Dt.name}.database.${i}`,"AngularFireDatabase",Dt.name,()=>{const Mt=l.runOutsideAngular(()=>Dt.database(i||void 0));return At&&Mt.useEmulator(...At),Mt},[At])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Dk(this.database,t));let a=i;return r&&(a=r(i)),function pj(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Rk(r,"update"),set:Rk(r,"set"),push:i=>r.push(i),remove:fj(r),snapshotChanges:i=>xk(n,i,t).pipe(En.iC),stateChanges:i=>Mk(n,i,t).pipe(En.iC),auditTrail:i=>function cj(n,e,t){return function hj(n,e,t){return function dj(n,e){return qE(n,"value","on",e).pipe((0,ht.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function uV(...n){const e=(0,Pr.jO)(n);return(0,lr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let _=0;_<i;_++)(0,ss.Xf)(n[_]).subscribe((0,Lt.x)(r,w=>{a[_]=w,!f&&!l[_]&&(l[_]=!0,(f=l.every(ia.y))&&(l=null))},aV.Z));t.subscribe((0,Lt.x)(r,_=>{if(f){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,ht.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),function lV(n){return(0,lr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Lt.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ht.U)(i=>i.actions))}(n,Mk(n,e).pipe(Ts((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(En.iC),valueChanges:(i,a)=>xk(n,i,t).pipe((0,ht.U)(f=>f.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),En.iC)}}(a,this)}object(t){return function gj(n,e){return{query:n,snapshotChanges:()=>Nk(n,e.schedulers.outsideAngular)().pipe(En.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Nk(n,e.schedulers.outsideAngular)().pipe(En.iC,(0,ht.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Dk(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ji.Dh),g.LFG(ji.xv,8),g.LFG(mj,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(En.HU),g.LFG(_j,8),g.LFG(iy,8),g.LFG(_x,8),g.LFG(yx,8),g.LFG(vx,8),g.LFG(Ex,8),g.LFG(wx,8),g.LFG(Cx,8),g.LFG(kb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vj=(()=>{class n{constructor(){OL.Z.registerVersion("angularfire",En.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[yj]}),n})(),Ej=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[oV]}),n.\u0275inj=g.cJS({providers:[Ax],imports:[[Na,sV,sw,il,ji.hO.initializeApp(sl.firebaseConfig),vj]]}),n})();sl.production&&(0,g.G48)(),Vu().bootstrapModule(Ej).catch(n=>console.error(n))},5867:(Ye,ve,k)=>{k.d(ve,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.8.1","app")},127:(Ye,ve,k)=>{k.d(ve,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(Ye,ve,k)=>{k.r(ve);var g=k(5861),ee=k(3942),F=k(2090),ue=k(9681),re=k(655),ge=k(1877),le=k(4859);const Pe=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new ge.Yd("@firebase/auth");function Ze(y,...h){We.logLevel<=ge.in.ERROR&&We.error(`Auth (${ue.SDK_VERSION}): ${y}`,...h)}function Te(y,...h){throw Be(y,...h)}function we(y,...h){return Be(y,...h)}function Ce(y,h,p){const E=Object.assign(Object.assign({},Ve()),{[h]:p});return new F.LL("auth","Firebase",E).create(h,{appName:y.name})}function Ue(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Te(y,"argument-error"),Ce(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...h){if("string"!=typeof y){const p=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(p,...E)}return fe.create(y,...h)}function $(y,h,...p){if(!y)throw Be(h,...p)}function Ee(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ze(h),new Error(h)}function Z(y,h){y||Ee(h)}const ie=new Map;function te(y){Z(y instanceof Function,"Expected a class definition");let h=ie.get(y);return h?(Z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ie.set(y,h),h)}function Oe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ut(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class en{constructor(h,p){this.shortDelay=h,this.longDelay=p,Z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Pt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function In(y,h){Z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class tn{static initialize(h,p,E){this.fetchImpl=h,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ar=new en(3e4,6e4);function Wt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Ot(y,h,p,E){return qi.apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(y,h,p,E,S={}){return ci(y,S,(0,g.Z)(function*(){let N={},K={};E&&("GET"===h?K=E:N={body:JSON.stringify(E)});const he=(0,F.xO)(Object.assign({key:y.config.apiKey},K)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),tn.fetch()(Ps(y,y.config.apiHost,p,he),Object.assign({method:h,headers:Le,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ci(y,h,p){return gr.apply(this,arguments)}function gr(){return(gr=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Zt),h);try{const S=new $r(y),N=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const K=yield N.json();if("needConfirmation"in K)throw Ki(y,"account-exists-with-different-credential",K);if(N.ok&&!("errorMessage"in K))return K;{const he=N.ok?K.errorMessage:K.error.message,[Le,Je]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Ki(y,"credential-already-in-use",K);if("EMAIL_EXISTS"===Le)throw Ki(y,"email-already-in-use",K);const ct=E[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw Ce(y,ct,Je);Te(y,ct)}}catch(S){if(S instanceof F.ZR)throw S;Te(y,"network-request-failed")}})).apply(this,arguments)}function Sr(y,h,p,E){return zi.apply(this,arguments)}function zi(){return(zi=(0,g.Z)(function*(y,h,p,E,S={}){const N=yield Ot(y,h,p,E,S);return"mfaPendingCredential"in N&&Te(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Ps(y,h,p,E){const S=`${h}${p}?${E}`;return y.config.emulator?In(y.config,S):`${y.config.apiScheme}://${S}`}class $r{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(we(this.auth,"network-request-failed")),Ar.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ki(y,h,p){const E={appName:y.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const S=we(y,h,E);return S.customData._tokenResponse=p,S}function di(){return(di=(0,g.Z)(function*(y,h){return Ot(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function vn(y,h){return bn.apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(y,h){return Ot(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Os(y,h){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,g.Z)(function*(y,h){return Ot(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Yn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function ao(){return(ao=(0,g.Z)(function*(y,h=!1){const p=(0,F.m9)(y),E=yield p.getIdToken(h),S=ot(E);$(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,K=null==N?void 0:N.sign_in_provider;return{claims:S,token:E,authTime:Yn(jt(S.auth_time)),issuedAtTime:Yn(jt(S.iat)),expirationTime:Yn(jt(S.exp)),signInProvider:K||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function jt(y){return 1e3*Number(y)}function ot(y){const[h,p,E]=y.split(".");if(void 0===h||void 0===p||void 0===E)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,F.tV)(p);return S?JSON.parse(S):(Ze("Failed to decode base64 JWT payload"),null)}catch(S){return Ze("Caught error parsing JWT payload as JSON",S),null}}function mr(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(E){throw E instanceof F.ZR&&Ft(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Ft({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class uo{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),E)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class _r{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yn(this.lastLoginAt),this.creationTime=Yn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yr(y){return U.apply(this,arguments)}function U(){return(U=(0,g.Z)(function*(y){var h;const p=y.auth,E=yield y.getIdToken(),S=yield mr(y,Os(p,{idToken:E}));$(null==S?void 0:S.users.length,p,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const K=(null===(h=N.providerUserInfo)||void 0===h?void 0:h.length)?W(N.providerUserInfo):[],he=be(y.providerData,K),ct=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==he?void 0:he.length)),lt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:he,metadata:new _r(N.createdAt,N.lastLoginAt),isAnonymous:ct};Object.assign(y,lt)})).apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(y){const h=(0,F.m9)(y);yield yr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function be(y,h){return[...y.filter(E=>!h.some(S=>S.providerId===E.providerId)),...h]}function W(y){return y.map(h=>{var{providerId:p}=h,E=(0,re._T)(h,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Me(){return(Me=(0,g.Z)(function*(y,h){const p=yield ci(y,{},(0,g.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,K=Ps(y,S,"/v1/token",`key=${N}`),he=yield y._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",tn.fetch()(K,{method:"POST",headers:he,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Qe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){$(h.idToken,"internal-error"),$(void 0!==h.idToken,"internal-error"),$(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function _t(y){const h=ot(y);return $(h,"internal-error"),$(void 0!==h.exp,"internal-error"),$(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var E=this;return(0,g.Z)(function*(){return $(!E.accessToken||E.refreshToken,h,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var E=this;return(0,g.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:K}=yield function X(y,h){return Me.apply(this,arguments)}(h,p);E.updateTokensAndExpiration(S,N,Number(K))})()}updateTokensAndExpiration(h,p,E){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,p){const{refreshToken:E,accessToken:S,expirationTime:N}=p,K=new Qe;return E&&($("string"==typeof E,"internal-error",{appName:h}),K.refreshToken=E),S&&($("string"==typeof S,"internal-error",{appName:h}),K.accessToken=S),N&&($("number"==typeof N,"internal-error",{appName:h}),K.expirationTime=N),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Qe,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function dt(y,h){$("string"==typeof y||void 0===y,"internal-error",{appName:h})}class Et{constructor(h){var{uid:p,auth:E,stsTokenManager:S}=h,N=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new _r(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const E=yield mr(p,p.stsTokenManager.getToken(p.auth,h));return $(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(h){return function hi(y){return ao.apply(this,arguments)}(this,h)}reload(){return function q(y){return z.apply(this,arguments)}(this)}_assign(h){this!==h&&($(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Et(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var E=this;return(0,g.Z)(function*(){let S=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield yr(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield mr(h,function pt(y,h){return di.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var E,S,N,K,he,Le,Je,ct;const lt=null!==(E=p.displayName)&&void 0!==E?E:void 0,$n=null!==(S=p.email)&&void 0!==S?S:void 0,Bi=null!==(N=p.phoneNumber)&&void 0!==N?N:void 0,Ja=null!==(K=p.photoURL)&&void 0!==K?K:void 0,oh=null!==(he=p.tenantId)&&void 0!==he?he:void 0,lm=null!==(Le=p._redirectEventId)&&void 0!==Le?Le:void 0,Xa=null!==(Je=p.createdAt)&&void 0!==Je?Je:void 0,ah=null!==(ct=p.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:uh,emailVerified:tp,isAnonymous:St,providerData:np,stsTokenManager:eu}=p;$(uh&&eu,h,"internal-error");const cm=Qe.fromJSON(this.name,eu);$("string"==typeof uh,h,"internal-error"),dt(lt,h.name),dt($n,h.name),$("boolean"==typeof tp,h,"internal-error"),$("boolean"==typeof St,h,"internal-error"),dt(Bi,h.name),dt(Ja,h.name),dt(oh,h.name),dt(lm,h.name),dt(Xa,h.name),dt(ah,h.name);const Sc=new Et({uid:uh,auth:h,email:$n,emailVerified:tp,displayName:lt,isAnonymous:St,photoURL:Ja,phoneNumber:Bi,tenantId:oh,stsTokenManager:cm,createdAt:Xa,lastLoginAt:ah});return np&&Array.isArray(np)&&(Sc.providerData=np.map(Ny=>Object.assign({},Ny))),lm&&(Sc._redirectEventId=lm),Sc}static _fromIdTokenResponse(h,p,E=!1){return(0,g.Z)(function*(){const S=new Qe;S.updateFromServerResponse(p);const N=new Et({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:E});return yield yr(N),N})()}}const vt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,E){var S=this;return(0,g.Z)(function*(){S.storage[p]=E})()}_get(p){var E=this;return(0,g.Z)(function*(){const S=E.storage[p];return void 0===S?null:S})()}_remove(p){var E=this;return(0,g.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return y.type="NONE",y})();function Ln(y,h,p){return`firebase:${y}:${h}:${p}`}class xr{constructor(h,p,E){this.persistence=h,this.auth=p,this.userKey=E;const{config:S,name:N}=this.auth;this.fullUserKey=Ln(this.userKey,S.apiKey,N),this.fullPersistenceKey=Ln("persistence",S.apiKey,N),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Et._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,E="authUser"){return(0,g.Z)(function*(){if(!p.length)return new xr(te(vt),h,E);const S=(yield Promise.all(p.map(function(){var Je=(0,g.Z)(function*(ct){if(yield ct._isAvailable())return ct});return function(ct){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let N=S[0]||te(vt);const K=Ln(E,h.config.apiKey,h.name);let he=null;for(const Je of p)try{const ct=yield Je._get(K);if(ct){const lt=Et._fromJSON(h,ct);Je!==N&&(he=lt),N=Je;break}}catch(ct){}const Le=S.filter(Je=>Je._shouldAllowMigration);return N._shouldAllowMigration&&Le.length?(N=Le[0],he&&(yield N._set(K,he.toJSON())),yield Promise.all(p.map(function(){var Je=(0,g.Z)(function*(ct){if(ct!==N)try{yield ct._remove(K)}catch(lt){}});return function(ct){return Je.apply(this,arguments)}}())),new xr(N,h,E)):new xr(N,h,E)})()}}function Tu(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Vn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ca(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(ps(h))return"Blackberry";if(Un(h))return"Webos";if(Au(h))return"Safari";if((h.includes("chrome/")||Ia(h))&&!h.includes("edge/"))return"Chrome";if(Mr(h))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Ca(y=(0,F.z$)()){return/firefox\//i.test(y)}function Au(y=(0,F.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ia(y=(0,F.z$)()){return/crios\//i.test(y)}function Vn(y=(0,F.z$)()){return/iemobile/i.test(y)}function Mr(y=(0,F.z$)()){return/android/i.test(y)}function ps(y=(0,F.z$)()){return/blackberry/i.test(y)}function Un(y=(0,F.z$)()){return/webos/i.test(y)}function Wr(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function ks(y=(0,F.z$)()){return Wr(y)||Mr(y)||Un(y)||ps(y)||/windows phone/i.test(y)||Vn(y)}function Lo(y,h=[]){let p;switch(y){case"Browser":p=Tu((0,F.z$)());break;case"Worker":p=`${Tu((0,F.z$)())}-${y}`;break;default:p=y}const E=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ue.SDK_VERSION}/${E}`}class qr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const E=N=>new Promise((K,he)=>{try{K(h(N))}catch(Le){he(Le)}});E.onAbort=p,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===h)return;const E=[];try{for(const S of p.queue)yield S(h),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const N of E)try{N()}catch(K){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:S.message})}})()}}class qe{constructor(h,p,E){this.app=h,this.heartbeatServiceProvider=p,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nn(this),this.idTokenSubscription=new nn(this),this.beforeStateQueue=new qr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,p){var E=this;return p&&(this._popupRedirectResolver=te(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var S,N;if(!E._deleted&&(E.persistenceManager=yield xr.create(E,h),!E._deleted)){if(null===(S=E._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(K){}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var E;const S=yield p.assertedPersistence.getCurrentUser();let N=S,K=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const he=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,Le=null==N?void 0:N._redirectEventId,Je=yield p.tryRedirectSignIn(h);(!he||he===Le)&&(null==Je?void 0:Je.user)&&(N=Je.user,K=!0)}if(!N)return p.directlySetCurrentUser(null);if(!N._redirectEventId){if(K)try{yield p.beforeStateQueue.runMiddleware(N)}catch(he){N=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(he))}return N?p.reloadAndSetCurrentUserOrClear(N):p.directlySetCurrentUser(null)}return $(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===N._redirectEventId?p.directlySetCurrentUser(N):p.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(S){yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield yr(h)}catch(E){if("auth/network-request-failed"!==E.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ke(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const E=h?(0,F.m9)(h):null;return E&&$(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(h,p=!1){var E=this;return(0,g.Z)(function*(){if(!E._deleted)return h&&$(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,g.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(te(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new F.LL("auth","Firebase",h())}onAuthStateChanged(h,p,E){return this.registerStateListener(this.authStateSubscription,h,p,E)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,E){return this.registerStateListener(this.idTokenSubscription,h,p,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var E=this;return(0,g.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const E=h&&te(h)||p._popupRedirectResolver;$(E,p,"argument-error"),p.redirectPersistenceManager=yield xr.create(p,[te(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var E,S;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,E,S){if(this._deleted)return()=>{};const N="function"==typeof p?p:p.next.bind(p),K=this._isInitialized?Promise.resolve():this._initializationPromise;return $(K,this,"internal-error"),K.then(()=>N(this.currentUser)),"function"==typeof p?h.addObserver(p,E,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Lo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(E["X-Firebase-Client"]=S),E})()}}function at(y){return(0,F.m9)(y)}class nn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,F.ne)(p=>this.observer=p)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zi(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Yi(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class xi{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return Ee("not implemented")}_getIdTokenResponse(h){return Ee("not implemented")}_linkToIdToken(h,p){return Ee("not implemented")}_getReauthenticationResolver(h){return Ee("not implemented")}}function Tn(y,h){return It.apply(this,arguments)}function It(){return(It=(0,g.Z)(function*(y,h){return Ot(y,"POST","/v1/accounts:resetPassword",Wt(y,h))})).apply(this,arguments)}function Da(y,h){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,g.Z)(function*(y,h){return Ot(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Su(y,h){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,g.Z)(function*(y,h){return Ot(y,"POST","/v1/accounts:update",Wt(y,h))})).apply(this,arguments)}function co(){return(co=(0,g.Z)(function*(y,h){return Sr(y,"POST","/v1/accounts:signInWithPassword",Wt(y,h))})).apply(this,arguments)}function Vs(y,h){return sr.apply(this,arguments)}function sr(){return(sr=(0,g.Z)(function*(y,h){return Ot(y,"POST","/v1/accounts:sendOobCode",Wt(y,h))})).apply(this,arguments)}function rn(y,h){return xu.apply(this,arguments)}function xu(){return(xu=(0,g.Z)(function*(y,h){return Vs(y,h)})).apply(this,arguments)}function Ta(y,h){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(y,h){return Vs(y,h)})).apply(this,arguments)}function Qi(y,h){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,g.Z)(function*(y,h){return Vs(y,h)})).apply(this,arguments)}function yd(y,h){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,g.Z)(function*(y,h){return Vs(y,h)})).apply(this,arguments)}function jl(){return(jl=(0,g.Z)(function*(y,h){return Sr(y,"POST","/v1/accounts:signInWithEmailLink",Wt(y,h))})).apply(this,arguments)}function vd(){return(vd=(0,g.Z)(function*(y,h){return Sr(y,"POST","/v1/accounts:signInWithEmailLink",Wt(y,h))})).apply(this,arguments)}class vr extends xi{constructor(h,p,E,S=null){super("password",E),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new vr(h,p,"password")}static _fromEmailAndCode(h,p,E=null){return new vr(h,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Bn(y,h){return co.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Xi(y,h){return jl.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Te(h,"internal-error")}})()}_linkToIdToken(h,p){var E=this;return(0,g.Z)(function*(){switch(E.signInMethod){case"password":return Da(h,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Pg(y,h){return vd.apply(this,arguments)}(h,{idToken:p,email:E._email,oobCode:E._password});default:Te(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Us(y,h){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,g.Z)(function*(y,h){return Sr(y,"POST","/v1/accounts:signInWithIdp",Wt(y,h))})).apply(this,arguments)}class gs extends xi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new gs(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Te("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:S}=p,N=(0,re._T)(p,["providerId","signInMethod"]);if(!E||!S)return null;const K=new gs(E,S);return K.idToken=N.idToken||void 0,K.accessToken=N.accessToken||void 0,K.secret=N.secret,K.nonce=N.nonce,K.pendingToken=N.pendingToken||null,K}_getIdTokenResponse(h){return Us(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,Us(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Us(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,F.xO)(p)}return h}}function kg(y,h){return wd.apply(this,arguments)}function wd(){return(wd=(0,g.Z)(function*(y,h){return Ot(y,"POST","/v1/accounts:sendVerificationCode",Wt(y,h))})).apply(this,arguments)}function ms(){return(ms=(0,g.Z)(function*(y,h){return Sr(y,"POST","/v1/accounts:signInWithPhoneNumber",Wt(y,h))})).apply(this,arguments)}function Cd(){return(Cd=(0,g.Z)(function*(y,h){const p=yield Sr(y,"POST","/v1/accounts:signInWithPhoneNumber",Wt(y,h));if(p.temporaryProof)throw Ki(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Lg={USER_NOT_FOUND:"user-not-found"};function Id(){return(Id=(0,g.Z)(function*(y,h){return Sr(y,"POST","/v1/accounts:signInWithPhoneNumber",Wt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Lg)})).apply(this,arguments)}class Vo extends xi{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Vo({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Vo({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Hl(y,h){return ms.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Fg(y,h){return Cd.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Vg(y,h){return Id.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:E,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:E,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:E,phoneNumber:S,temporaryProof:N}=h;return E||p||S||N?new Vo({verificationId:p,verificationCode:E,phoneNumber:S,temporaryProof:N}):null}}class Ru{constructor(h){var p,E,S,N,K,he;const Le=(0,F.zd)((0,F.pd)(h)),Je=null!==(p=Le.apiKey)&&void 0!==p?p:null,ct=null!==(E=Le.oobCode)&&void 0!==E?E:null,lt=function xf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);$(Je&&ct&&lt,"argument-error"),this.apiKey=Je,this.operation=lt,this.code=ct,this.continueUrl=null!==(N=Le.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(K=Le.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(he=Le.tenantId)&&void 0!==he?he:null}static parseLink(h){const p=function Aa(y){const h=(0,F.zd)((0,F.pd)(y)).link,p=h?(0,F.zd)((0,F.pd)(h)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||p||h||y}(h);try{return new Ru(p)}catch(E){return null}}}let Dd=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,E){return vr._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const S=Ru.parseLink(E);return $(S,"argument-error"),vr._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Er{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ho extends Er{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class es extends ho{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return $("providerId"in p&&"signInMethod"in p,"argument-error"),gs._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return $(h.idToken||h.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return es.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return es.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:N,nonce:K,providerId:he}=h;if(!E&&!S&&!p&&!N||!he)return null;try{return new es(he)._credential({idToken:p,accessToken:E,nonce:K,pendingToken:N})}catch(Le){return null}}}let Uo=(()=>{class y extends ho{constructor(){super("facebook.com")}static credential(p){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Td=(()=>{class y extends ho{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:S}=p;if(!E&&!S)return null;try{return y.credential(E,S)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Mf=(()=>{class y extends ho{constructor(){super("github.com")}static credential(p){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class fo extends xi{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Us(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,Us(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Us(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:S,pendingToken:N}=p;return E&&S&&N&&E===S?new fo(E,N):null}static _create(h,p){return new fo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Rr extends Er{constructor(h){$(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Rr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Rr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=fo.fromJSON(h);return $(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:E}=h;if(!p||!E)return null;try{return fo._create(E,p)}catch(S){return null}}}let Ad=(()=>{class y extends ho{constructor(){super("twitter.com")}static credential(p,E){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=p;if(!E||!S)return null;try{return y.credential(E,S)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Nr(y,h){return jo.apply(this,arguments)}function jo(){return(jo=(0,g.Z)(function*(y,h){return Sr(y,"POST","/v1/accounts:signUp",Wt(y,h))})).apply(this,arguments)}class pi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,E,S=!1){return(0,g.Z)(function*(){const N=yield Et._fromIdTokenResponse(h,E,S),K=Gl(E);return new pi({user:N,providerId:K,_tokenResponse:E,operationType:p})})()}static _forOperation(h,p,E){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const S=Gl(E);return new pi({user:h,providerId:S,_tokenResponse:E,operationType:p})})()}}function Gl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Wl(){return(Wl=(0,g.Z)(function*(y){var h;const p=at(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new pi({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield Nr(p,{returnSecureToken:!0}),S=yield pi._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ho extends F.ZR{constructor(h,p,E,S){var N;super(p.code,p.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,Ho.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,p,E,S){return new Ho(h,p,E,S)}}function ql(y,h,p,E){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Ho._fromErrorAndOperation(y,N,h,E):N})}function ts(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function sn(){return(sn=(0,g.Z)(function*(y,h){const p=(0,F.m9)(y);yield Qt(!0,p,h);const{providerUserInfo:E}=yield vn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=ts(E||[]);return p.providerData=p.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Sa(y,h){return po.apply(this,arguments)}function po(){return(po=(0,g.Z)(function*(y,h,p=!1){const E=yield mr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return pi._forOperation(y,"link",E)})).apply(this,arguments)}function Qt(y,h,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,g.Z)(function*(y,h,p){yield yr(h);const S=!1===y?"provider-already-linked":"no-such-provider";$(ts(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function Nu(y,h){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,g.Z)(function*(y,h,p=!1){const{auth:E}=y,S="reauthenticate";try{const N=yield mr(y,ql(E,S,h,y),p);$(N.idToken,E,"internal-error");const K=ot(N.idToken);$(K,E,"internal-error");const{sub:he}=K;return $(y.uid===he,E,"user-mismatch"),pi._forOperation(y,S,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Te(E,"user-mismatch"),N}})).apply(this,arguments)}function or(y,h){return zl.apply(this,arguments)}function zl(){return(zl=(0,g.Z)(function*(y,h,p=!1){const E="signIn",S=yield ql(y,E,h),N=yield pi._fromIdTokenResponse(y,E,S);return p||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function _n(y,h){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(y,h){return or(at(y),h)})).apply(this,arguments)}function ar(y,h){return go.apply(this,arguments)}function go(){return(go=(0,g.Z)(function*(y,h){const p=(0,F.m9)(y);return yield Qt(!1,p,h.providerId),Sa(p,h)})).apply(this,arguments)}function _s(y,h){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,g.Z)(function*(y,h){return Nu((0,F.m9)(y),h)})).apply(this,arguments)}function Mi(y,h){return rs.apply(this,arguments)}function rs(){return(rs=(0,g.Z)(function*(y,h){return Sr(y,"POST","/v1/accounts:signInWithCustomToken",Wt(y,h))})).apply(this,arguments)}function gt(){return(gt=(0,g.Z)(function*(y,h){const p=at(y),E=yield Mi(p,{token:h,returnSecureToken:!0}),S=yield pi._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class js{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Kl._fromServerResponse(h,p):Te(h,"internal-error")}}class Kl extends js{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Kl(p)}}function Ra(y,h,p){var E;$((null===(E=p.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),$(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&($(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&($(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Pu(){return(Pu=(0,g.Z)(function*(y,h,p){const E=(0,F.m9)(y),S={requestType:"PASSWORD_RESET",email:h};p&&Ra(E,S,p),yield Ta(E,S)})).apply(this,arguments)}function Yl(){return(Yl=(0,g.Z)(function*(y,h,p){yield Tn((0,F.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Ae(){return(Ae=(0,g.Z)(function*(y,h){yield Su((0,F.m9)(y),{oobCode:h})})).apply(this,arguments)}function kt(y,h){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,g.Z)(function*(y,h){const p=(0,F.m9)(y),E=yield Tn(p,{oobCode:h}),S=E.requestType;switch($(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(E.mfaInfo,p,"internal-error");default:$(E.email,p,"internal-error")}let N=null;return E.mfaInfo&&(N=js._fromServerResponse(at(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function ku(){return(ku=(0,g.Z)(function*(y,h){const{data:p}=yield kt((0,F.m9)(y),h);return p.email})).apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(y,h,p){const E=at(y),S=yield Nr(E,{returnSecureToken:!0,email:h,password:p}),N=yield pi._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function Xl(){return(Xl=(0,g.Z)(function*(y,h,p){const E=(0,F.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};$(p.handleCodeInApp,E,"argument-error"),p&&Ra(E,S,p),yield Qi(E,S)})).apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h,p){const E=(0,F.m9)(y),S=Dd.credentialWithLink(h,p||Oe());return $(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),_n(E,S)})).apply(this,arguments)}function wr(y,h){return mi.apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(y,h){return Ot(y,"POST","/v1/accounts:createAuthUri",Wt(y,h))})).apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,h){const E={identifier:h,continueUri:ut()?Oe():"http://localhost"},{signinMethods:S}=yield wr((0,F.m9)(y),E);return S||[]})).apply(this,arguments)}function ec(){return(ec=(0,g.Z)(function*(y,h){const p=(0,F.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Ra(p.auth,S,h);const{email:N}=yield rn(p.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function Vu(){return(Vu=(0,g.Z)(function*(y,h,p){const E=(0,F.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&Ra(E.auth,N,p);const{email:K}=yield yd(E.auth,N);K!==y.email&&(yield y.reload())})).apply(this,arguments)}function tc(y,h){return Na.apply(this,arguments)}function Na(){return(Na=(0,g.Z)(function*(y,h){return Ot(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Bu(){return(Bu=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const E=(0,F.m9)(y),N={idToken:yield E.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},K=yield mr(E,tc(E.auth,N));E.displayName=K.displayName||null,E.photoURL=K.photoUrl||null;const he=E.providerData.find(({providerId:Le})=>"password"===Le);he&&(he.displayName=E.displayName,he.photoURL=E.photoURL),yield E._updateTokensIfNecessary(K)})).apply(this,arguments)}function ju(y,h,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,g.Z)(function*(y,h,p){const{auth:E}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),p&&(N.password=p);const K=yield mr(y,Da(E,N));yield y._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class qo{constructor(h,p,E={}){this.isNewUser=h,this.providerId=p,this.profile=E}}class Pd extends qo{constructor(h,p,E,S){super(h,p,E),this.username=S}}class Hu extends qo{constructor(h,p){super(h,"facebook.com",p)}}class Zr extends Pd{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Nf extends qo{constructor(h,p){super(h,"google.com",p)}}class nc extends Pd{constructor(h,p,E){super(h,"twitter.com",p,E)}}function Qn(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Nd(y){var h,p;if(!y)return null;const{providerId:E}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const K=null===(p=null===(h=ot(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(K)return new qo(N,"anonymous"!==K&&"custom"!==K?K:null)}if(!E)return null;switch(E){case"facebook.com":return new Hu(N,S);case"github.com":return new Zr(N,S);case"google.com":return new Nf(N,S);case"twitter.com":return new nc(N,S,y.screenName||null);case"custom":case"anonymous":return new qo(N,null);default:return new qo(N,E,S)}}(p)}class vs{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new vs("enroll",h)}static _fromMfaPendingCredential(h){return new vs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,E;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return vs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return vs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class vo{constructor(h,p,E){this.session=h,this.hints=p,this.signInResolver=E}static _fromError(h,p){const E=at(h),S=p.customData._serverResponse,N=(S.mfaInfo||[]).map(he=>js._fromServerResponse(E,he));$(S.mfaPendingCredential,E,"internal-error");const K=vs._fromMfaPendingCredential(S.mfaPendingCredential);return new vo(K,N,function(){var he=(0,g.Z)(function*(Le){const Je=yield Le._process(E,K);delete S.mfaInfo,delete S.mfaPendingCredential;const ct=Object.assign(Object.assign({},S),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(p.operationType){case"signIn":const lt=yield pi._fromIdTokenResponse(E,p.operationType,ct);return yield E._updateCurrentUser(lt.user),lt;case"reauthenticate":return $(p.user,E,"internal-error"),pi._forOperation(p.user,p.operationType,ct);default:Te(E,"internal-error")}});return function(Le){return he.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function kd(y,h){return Ot(y,"POST","/v2/accounts/mfaEnrollment:start",Wt(y,h))}class zo{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>js._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new zo(h)}getSession(){var h=this;return(0,g.Z)(function*(){return vs._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var E=this;return(0,g.Z)(function*(){const S=h,N=yield E.getSession(),K=yield mr(E.user,S._process(E.user.auth,N,p));return yield E.user._updateTokensIfNecessary(K),E.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const E="string"==typeof h?h:h.uid,S=yield p.user.getIdToken(),N=yield mr(p.user,function Eo(y,h){return Ot(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(y,h))}(p.user.auth,{idToken:S,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:K})=>K!==E),yield p.user._updateTokensIfNecessary(N);try{yield p.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const $u=new WeakMap,Es="__sak";class Gu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Es,"1"),this.storage.removeItem(Es),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const wo=(()=>{class y extends Gu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $g(){const y=(0,F.z$)();return Au(y)||Wr(y)}()&&function ir(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ks(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),N=this.localCache[E];S!==N&&p(E,N,S)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((he,Le,Je)=>{this.notifyListeners(he,Je)});const S=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(S);if(p.newValue!==he)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!E)return}const N=()=>{const he=this.storage.getItem(S);!E&&this.localCache[S]===he||this.notifyListeners(S,he)},K=this.storage.getItem(S);!function ba(){return(0,F.w1)()&&10===document.documentMode}()||K===p.newValue||p.newValue===p.oldValue?N():setTimeout(N,10)}notifyListeners(p,E){this.localCache[p]=E;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var S=()=>super._set,N=this;return(0,g.Z)(function*(){yield S().call(N,p,E),N.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,S=this;return(0,g.Z)(function*(){const N=yield E().call(S,p);return S.localCache[p]=JSON.stringify(N),N})()}_remove(p){var E=()=>super._remove,S=this;return(0,g.Z)(function*(){yield E().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),is=(()=>{class y extends Gu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return y.type="SESSION",y})();let Fd=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(N=>N.isListeningto(p));if(E)return E;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,g.Z)(function*(){const S=p,{eventId:N,eventType:K,data:he}=S.data,Le=E.handlersMap[K];if(!(null==Le?void 0:Le.size))return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:K});const Je=Array.from(Le).map(function(){var lt=(0,g.Z)(function*($n){return $n(S.origin,he)});return function($n){return lt.apply(this,arguments)}}()),ct=yield function Ko(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return h.apply(this,arguments)}}()))}(Je);S.ports[0].postMessage({status:"done",eventId:N,eventType:K,response:ct})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ss(y="",h=10){let p="";for(let E=0;E<h;E++)p+=Math.floor(10*Math.random());return y+p}class Pr{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,E=50){var S=this;return(0,g.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let K,he;return new Promise((Le,Je)=>{const ct=ss("",20);N.port1.start();const lt=setTimeout(()=>{Je(new Error("unsupported_event"))},E);he={messageChannel:N,onMessage($n){const Bi=$n;if(Bi.data.eventId===ct)switch(Bi.data.status){case"ack":clearTimeout(lt),K=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Le(Bi.data.response);break;default:clearTimeout(lt),clearTimeout(K),Je(new Error("invalid_response"))}}},S.handlers.add(he),N.port1.addEventListener("message",he.onMessage),S.target.postMessage({eventType:h,eventId:ct,data:p},[N.port2])}).finally(()=>{he&&S.removeMessageHandler(he)})})()}}function Lt(){return window}function Zo(){return void 0!==Lt().WorkerGlobalScope&&"function"==typeof Lt().importScripts}function rc(){return(rc=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const sc="firebaseLocalStorageDb",Jn="firebaseLocalStorage",Qo="fbase_key";class $s{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Cr(y,h){return y.transaction([Jn],h?"readwrite":"readonly").objectStore(Jn)}function Wu(){const y=indexedDB.open(sc,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Jn,{keyPath:Qo})}catch(S){p(S)}}),y.addEventListener("success",(0,g.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Jn)?h(E):(E.close(),yield function Oa(){const y=indexedDB.deleteDatabase(sc);return new $s(y).toPromise()}(),h(yield Wu()))}))})}function Pi(y,h,p){return _i.apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(y,h,p){const E=Cr(y,!0).put({[Qo]:h,value:p});return new $s(E).toPromise()})).apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(y,h){const p=Cr(y,!1).get(h),E=yield new $s(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Oi(y,h){const p=Cr(y,!0).delete(h);return new $s(p).toPromise()}const Co=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Wu()),p.db})()}_withRetries(p){var E=this;return(0,g.Z)(function*(){let S=0;for(;;)try{const N=yield E._openDb();return yield p(N)}catch(N){if(S++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return Zo()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=Fd._getInstance(function Ld(){return Zo()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,g.Z)(function*(S,N){return{keyProcessed:(yield p._poll()).includes(N.key)}});return function(S,N){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,g.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var E,S;if(p.activeServiceWorker=yield function Yo(){return rc.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Pr(p.activeServiceWorker);const N=yield p.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,g.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function ic(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Wu();return yield Pi(p,Es,"1"),yield Oi(p,Es),!0}catch(p){}return!1})()}_withPendingWrite(p){var E=this;return(0,g.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var S=this;return(0,g.Z)(function*(){return S._withPendingWrite((0,g.Z)(function*(){return yield S._withRetries(N=>Pi(N,p,E)),S.localCache[p]=E,S.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,g.Z)(function*(){const S=yield E._withRetries(N=>function qu(y,h){return fn.apply(this,arguments)}(N,p));return E.localCache[p]=S,S})()}_remove(p){var E=this;return(0,g.Z)(function*(){return E._withPendingWrite((0,g.Z)(function*(){return yield E._withRetries(S=>Oi(S,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const E=yield p._withRetries(K=>{const he=Cr(K,!1).getAll();return new $s(he).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:K,value:he}of E)N.add(K),JSON.stringify(p.localCache[K])!==JSON.stringify(he)&&(p.notifyListeners(K,he),S.push(K));for(const K of Object.keys(p.localCache))p.localCache[K]&&!N.has(K)&&(p.notifyListeners(K,null),S.push(K));return S})()}notifyListeners(p,E){this.localCache[p]=E;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Fa(y,h){return Ot(y,"POST","/v2/accounts/mfaSignIn:start",Wt(y,h))}function La(){return(La=(0,g.Z)(function*(y){return(yield Ot(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Va(y){return new Promise((h,p)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=h,E.onerror=S=>{const N=we("internal-error");N.customData=S,p(N)},E.type="text/javascript",E.charset="UTF-8",function Jo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(E)})}function yi(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ua=1e12;class zu{constructor(h){this.auth=h,this.counter=Ua,this._widgets=new Map}render(h,p){const E=this.counter;return this._widgets.set(E,new Xo(h,this.auth.name,p||{})),this.counter++,E}reset(h){var p;const E=h||Ua;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Ua))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var E;return null===(E=p._widgets.get(h||Ua))||void 0===E||E.execute(),""})()}}class Xo{constructor(h,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;$(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function uc(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lc=yi("rcb"),pn=new en(3e4,6e4);class Ff{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Lt().grecaptcha}load(h,p=""){return $(function Lf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Lt().grecaptcha):new Promise((E,S)=>{const N=Lt().setTimeout(()=>{S(we(h,"network-request-failed"))},pn.get());Lt()[lc]=()=>{Lt().clearTimeout(N),delete Lt()[lc];const he=Lt().grecaptcha;if(!he)return void S(we(h,"internal-error"));const Le=he.render;he.render=(Je,ct)=>{const lt=Le(Je,ct);return this.counter++,lt},this.hostLanguage=p,E(he)},Va(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:lc,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(N),S(we(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Lt().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vd{load(h){return(0,g.Z)(function*(){return new zu(h)})()}clearedOneInstance(){}}const cc="recaptcha",Ud={theme:"light",type:"image"};class dc{constructor(h,p=Object.assign({},Ud),E){this.parameters=p,this.type=cc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(E),this.isInvisible="invisible"===this.parameters.size,$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;$(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vd:new Ff,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(p)||new Promise(N=>{const K=he=>{!he||(h.tokenChangeListeners.delete(K),N(he))};h.tokenChangeListeners.add(K),h.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof h)h(p);else if("string"==typeof h){const E=Lt()[h];"function"==typeof E&&E(p)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){$(ut()&&!Zo(),h.auth,"internal-error"),yield function ea(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Is(y){return La.apply(this,arguments)}(h.auth);$(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hc{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Vo._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function vi(){return(vi=(0,g.Z)(function*(y,h,p){const E=at(y),S=yield Xn(E,h,(0,F.m9)(p));return new hc(S,N=>_n(E,N))})).apply(this,arguments)}function fc(){return(fc=(0,g.Z)(function*(y,h,p){const E=(0,F.m9)(y);yield Qt(!1,E,"phone");const S=yield Xn(E.auth,h,(0,F.m9)(p));return new hc(S,N=>ar(E,N))})).apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(function*(y,h,p){const E=(0,F.m9)(y),S=yield Xn(E.auth,h,(0,F.m9)(p));return new hc(S,N=>_s(E,N))})).apply(this,arguments)}function Xn(y,h,p){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,g.Z)(function*(y,h,p){var E;const S=yield p.verify();try{let N;if($("string"==typeof S,y,"argument-error"),$(p.type===cc,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const K=N.session;if("phoneNumber"in N)return $("enroll"===K.type,y,"internal-error"),(yield kd(y,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{$("signin"===K.type,y,"internal-error");const he=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return $(he,y,"missing-multi-factor-info"),(yield Fa(y,{mfaPendingCredential:K.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield kg(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return K}}finally{p._reset()}})).apply(this,arguments)}function Ei(){return(Ei=(0,g.Z)(function*(y,h){yield Sa((0,F.m9)(y),h)})).apply(this,arguments)}let qs=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=at(p)}verifyPhoneNumber(p,E){return Xn(this.auth,p,(0,F.m9)(E))}static credential(p,E){return Vo._fromVerification(p,E)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:S}=p;return E&&S?Vo._fromTokenResponse(E,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ki(y,h){return h?te(h):($(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ba extends xi{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Us(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Us(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Us(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Vf(y){return or(y.auth,new Ba(y),y.bypassAuthState)}function Uf(y){const{auth:h,user:p}=y;return $(p,h,"internal-error"),Nu(p,new Ba(y),y.bypassAuthState)}function qg(y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return $(p,h,"internal-error"),Sa(p,new Ba(y),y.bypassAuthState)})).apply(this,arguments)}class Bd{constructor(h,p,E,S,N=!1){this.auth=h,this.resolver=E,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(E,S){h.pendingPromise={resolve:E,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(E,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:N,tenantId:K,error:he,type:Le}=h;if(he)return void p.reject(he);const Je={auth:p.auth,requestUri:E,sessionId:S,tenantId:K||void 0,postBody:N||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Le)(Je))}catch(ct){p.reject(ct)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Vf;case"linkViaPopup":case"linkViaRedirect":return qg;case"reauthViaPopup":case"reauthViaRedirect":return Uf;default:Te(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ja=new en(2e3,1e4);function os(){return(os=(0,g.Z)(function*(y,h,p){const E=at(y);Ue(y,h,Er);const S=ki(E,p);return new bo(E,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function pc(){return(pc=(0,g.Z)(function*(y,h,p){const E=(0,F.m9)(y);Ue(E.auth,h,Er);const S=ki(E.auth,p);return new bo(E.auth,"reauthViaPopup",h,S,E).executeNotNull()})).apply(this,arguments)}function wi(){return(wi=(0,g.Z)(function*(y,h,p){const E=(0,F.m9)(y);Ue(E.auth,h,Er);const S=ki(E.auth,p);return new bo(E.auth,"linkViaPopup",h,S,E).executeNotNull()})).apply(this,arguments)}let bo=(()=>{class y extends Bd{constructor(p,E,S,N,K){super(p,E,N,K),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const E=yield p.execute();return $(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,g.Z)(function*(){Z(1===p.filter.length,"Popup operations only handle one event");const E=ss();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(we(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,S;this.pollId=(null===(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,ja.get())};p()}}return y.currentPopupAction=null,y})();const Ds=new Map;class gc extends Bd{constructor(h,p,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let E=Ds.get(p.auth._key());if(!E){try{const N=(yield function mc(y,h){return as.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;E=()=>Promise.resolve(N)}catch(S){E=()=>Promise.reject(S)}Ds.set(p.auth._key(),E)}return p.bypassAuthState||Ds.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,E=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(E,h);if("unknown"!==h.type){if(h.eventId){const S=yield E.auth._redirectUserForId(h.eventId);if(S)return E.user=S,p().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function as(){return(as=(0,g.Z)(function*(y,h){const p=V(h),E=R(y);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(p));return yield E._remove(p),S})).apply(this,arguments)}function Ha(y,h){return $a.apply(this,arguments)}function $a(){return($a=(0,g.Z)(function*(y,h){return R(y)._set(V(h),"true")})).apply(this,arguments)}function D(y,h){Ds.set(y._key(),h)}function R(y){return te(y._redirectPersistence)}function V(y){return Ln("pendingRedirect",y.config.apiKey,y.name)}function Ne(){return(Ne=(0,g.Z)(function*(y,h,p){const E=at(y);Ue(y,h,Er);const S=ki(E,p);return yield Ha(S,E),S._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function yt(){return(yt=(0,g.Z)(function*(y,h,p){const E=(0,F.m9)(y);Ue(E.auth,h,Er);const S=ki(E.auth,p);yield Ha(S,E.auth);const N=yield er(E);return S._openRedirect(E.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function Sn(){return(Sn=(0,g.Z)(function*(y,h,p){const E=(0,F.m9)(y);Ue(E.auth,h,Er);const S=ki(E.auth,p);yield Qt(!1,E,h.providerId),yield Ha(S,E.auth);const N=yield er(E);return S._openRedirect(E.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function zs(){return(zs=(0,g.Z)(function*(y,h){return yield at(y)._initializationPromise,us(y,h,!1)})).apply(this,arguments)}function us(y,h){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(y,h,p=!1){const E=at(y),S=ki(E,h),K=yield new gc(E,S,p).execute();return K&&!p&&(delete K.user._redirectEventId,yield E._persistUserIfCurrent(K.user),yield E._setRedirectUser(null,h)),K})).apply(this,arguments)}function er(y){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(y){const h=ss(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Hd{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(p=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function _c(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ku(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var E;if(h.error&&!Ku(h)){const S=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(we(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const E=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($d(h))}saveEventToCache(h){this.cachedEventUids.add($d(h)),this.lastProcessedEventTime=Date.now()}}function $d(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Ku({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Zu(y){return yc.apply(this,arguments)}function yc(){return(yc=(0,g.Z)(function*(y,h={}){return Ot(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Gd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ga=/^https?/;function Wd(){return(Wd=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Zu(y);for(const p of h)try{if(Ey(p))return}catch(E){}Te(y,"unauthorized-domain")})).apply(this,arguments)}function Ey(y){const h=Oe(),{protocol:p,hostname:E}=new URL(h);if(y.startsWith("chrome-extension://")){const K=new URL(y);return""===K.hostname&&""===E?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&K.hostname===E}if(!Ga.test(p))return!1;if(Gd.test(y))return E===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const qd=new en(3e4,6e4);function vc(){const y=Lt().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Qu=null;function wy(y){return Qu=Qu||function jf(y){return new Promise((h,p)=>{var E,S,N;function K(){vc(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{vc(),p(we(y,"network-request-failed"))},timeout:qd.get()})}if(null===(S=null===(E=Lt().gapi)||void 0===E?void 0:E.iframes)||void 0===S?void 0:S.Iframe)h(gapi.iframes.getContext());else{if(!(null===(N=Lt().gapi)||void 0===N?void 0:N.load)){const he=yi("iframefcb");return Lt()[he]=()=>{gapi.load?K():p(we(y,"network-request-failed"))},Va(`https://apis.google.com/js/api.js?onload=${he}`).catch(Le=>p(Le))}K()}}).catch(h=>{throw Qu=null,h})}(y),Qu}const Ec=new en(5e3,15e3),wc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YE(y){const h=y.config;$(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?In(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:y.name,v:ue.SDK_VERSION},S=ZE.get(y.config.apiHost);S&&(E.eid=S);const N=y._getFrameworks();return N.length&&(E.fw=N.join(",")),`${p}?${(0,F.xO)(E).slice(1)}`}function Ju(){return Ju=(0,g.Z)(function*(y){const h=yield wy(y),p=Lt().gapi;return $(p,y,"internal-error"),h.open({where:document.body,url:YE(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wc,dontclear:!0},E=>new Promise(function(){var S=(0,g.Z)(function*(N,K){yield E.restyle({setHideOnLeave:!1});const he=we(y,"network-request-failed"),Le=Lt().setTimeout(()=>{K(he)},Ec.get());function Je(){Lt().clearTimeout(Le),N(E)}E.ping(Je).then(Je,()=>{K(he)})});return function(N,K){return S.apply(this,arguments)}}()))}),Ju.apply(this,arguments)}const Kd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zg{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Ks(y,h,p,E,S,N){$(y.config.authDomain,y,"auth-domain-config-required"),$(y.config.apiKey,y,"invalid-api-key");const K={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:E,v:ue.SDK_VERSION,eventId:S};if(h instanceof Er){h.setDefaultLanguage(y.languageCode),K.providerId=h.providerId||"",(0,F.xb)(h.getCustomParameters())||(K.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Le,Je]of Object.entries(N||{}))K[Le]=Je}if(h instanceof ho){const Le=h.getScopes().filter(Je=>""!==Je);Le.length>0&&(K.scopes=Le.join(","))}y.tenantId&&(K.tid=y.tenantId);const he=K;for(const Le of Object.keys(he))void 0===he[Le]&&delete he[Le];return`${function el({config:y}){return y.emulator?In(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(he).slice(1)}`}const $f="webStorageSupport";class Wf extends class JE{constructor(h){this.factorId=h}_process(h,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,E);case"signin":return this._finalizeSignIn(h,p.credential);default:return Ee("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Wf(h)}_finalizeEnroll(h,p,E){return function jg(y,h){return Ot(y,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(y,h))}(h,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function ac(y,h){return Ot(y,"POST","/v2/accounts/mfaSignIn:finalize",Wt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let XE=(()=>{class y{constructor(){}static assertion(p){return Wf._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var tl="@firebase/auth";class qf{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(E=>{var S;h((null===(S=E)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qa(){return window}function Li(){return(Li=(0,g.Z)(function*(y,h,p){var E;const{BuildInfo:S}=qa();Z(h.sessionId,"AuthEvent did not contain a session ID");const N=yield wD(h.sessionId),K={};return Wr()?K.ibi=S.packageName:Mr()?K.apn=S.packageName:Te(y,"operation-not-supported-in-this-environment"),S.displayName&&(K.appDisplayName=S.displayName),K.sessionId=N,Ks(y,p,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,K)})).apply(this,arguments)}function na(){return(na=(0,g.Z)(function*(y){const{BuildInfo:h}=qa(),p={};Wr()?p.iosBundleId=h.packageName:Mr()?p.androidPackageName=h.packageName:Te(y,"operation-not-supported-in-this-environment"),yield Zu(y,p)})).apply(this,arguments)}function zf(){return(zf=(0,g.Z)(function*(y,h,p){const{cordova:E}=qa();let S=()=>{};try{yield new Promise((N,K)=>{let he=null;function Le(){var lt;N();const $n=null===(lt=E.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof $n&&$n(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Je(){he||(he=window.setTimeout(()=>{K(we(y,"redirect-cancelled-by-user"))},2e3))}function ct(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}h.addPassiveListener(Le),document.addEventListener("resume",Je,!1),Mr()&&document.addEventListener("visibilitychange",ct,!1),S=()=>{h.removePassiveListener(Le),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",ct,!1),he&&window.clearTimeout(he)}})}finally{S()}})).apply(this,arguments)}function wD(y){return za.apply(this,arguments)}function za(){return(za=(0,g.Z)(function*(y){const h=bc(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function bc(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let E=0;E<y.length;E++)p[E]=y.charCodeAt(E);return p}!function Zd(y){(0,ue._registerComponent)(new le.wA("auth",(h,{options:p})=>{const E=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:N,authDomain:K}=E.options;return((he,Le)=>{$(N&&!N.includes(":"),"invalid-api-key",{appName:he.name}),$(!(null==K?void 0:K.includes(":")),"argument-error",{appName:he.name});const Je={apiKey:N,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lo(y)},ct=new qe(he,Le,Je);return function ae(y,h){const p=(null==h?void 0:h.persistence)||[],E=(Array.isArray(p)?p:[p]).map(te);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(ct,p),ct})(E,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,E)=>{h.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new le.wA("auth-internal",h=>{const p=at(h.getProvider("auth").getImmediate());return new qf(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(tl,"0.20.1",function by(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(tl,"0.20.1","esm2017")}("Browser");class nw extends Hd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function tm(y){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,g.Z)(function*(y){const h=yield Xd()._get(nl(y));return h&&(yield Xd()._remove(nl(y))),h})).apply(this,arguments)}function nm(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const E=Math.floor(Math.random()*h.length);y.push(h.charAt(E))}return y.join("")}function Xd(){return te(wo)}function nl(y){return Ln("authEvent",y.config.apiKey,y.name)}function th(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,F.zd)(p.join("?"))}function nh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function Zf(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function sm(y=(0,F.z$)()){return!("file:"!==Zf()&&"ionic:"!==Zf()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function om(){try{const y=self.localStorage,h=ss();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Yf(y=(0,F.z$)()){return function il(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ei(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return sl()&&(0,F.hl)()}return!1}function sl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function nt(){return(function iw(){return"http:"===Zf()||"https:"===Zf()}()||(0,F.ru)()||sm())&&!function sw(){return(0,F.b$)()||(0,F.UG)()}()&&om()&&!sl()}function Vi(){return sm()&&"undefined"!=typeof document}function ia(){return(ia=(0,g.Z)(function*(){return!!Vi()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Ci={LOCAL:"local",NONE:"none",SESSION:"session"},Dc=$,rh="persistence";function Ka(y){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Za(),p=Ln(rh,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Za(){var y;try{return(null===(y=function xy(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const My=$;class Zs{constructor(){this.browserResolver=te(class Iy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=is,this._completeRedirectFn=us,this._overrideRedirectResult=D}_openPopup(h,p,E,S){var N=this;return(0,g.Z)(function*(){var K;Z(null===(K=N.eventManagers[h._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const he=Ks(h,p,E,Oe(),S);return function Yg(y,h,p,E=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),K=Math.max((window.screen.availWidth-E)/2,0).toString();let he="";const Le=Object.assign(Object.assign({},Kd),{width:E.toString(),height:S.toString(),top:N,left:K}),Je=(0,F.z$)().toLowerCase();p&&(he=Ia(Je)?"_blank":p),Ca(Je)&&(h=h||"http://localhost",Le.scrollbars="yes");const ct=Object.entries(Le).reduce(($n,[Bi,Ja])=>`${$n}${Bi}=${Ja},`,"");if(function lo(y=(0,F.z$)()){var h;return Wr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Je)&&"_self"!==he)return function Cy(y,h){const p=document.createElement("a");p.href=y,p.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(h||"",he),new Zg(null);const lt=window.open(h||"",he,ct);$(lt,y,"popup-blocked");try{lt.focus()}catch($n){}return new Zg(lt)}(h,he,ss())})()}_openRedirect(h,p,E,S){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(h),function ht(y){Lt().location.href=y}(Ks(h,p,E,Oe(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:N}=this.eventManagers[p];return S?Promise.resolve(S):(Z(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(h);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const E=yield function ED(y){return Ju.apply(this,arguments)}(h),S=new Hd(h);return E.register("authEvent",N=>($(null==N?void 0:N.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=E,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send($f,{type:$f},S=>{var N;const K=null===(N=null==S?void 0:S[0])||void 0===N?void 0:N[$f];void 0!==K&&p(!!K),Te(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Yu(y){return Wd.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return ks()||Au()||Wr()}}),this.cordovaResolver=te(class Ay{constructor(){this._redirectPersistence=is,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=us,this._overrideRedirectResult=D}_initialize(h){var p=this;return(0,g.Z)(function*(){const E=h._key();let S=p.eventManagers.get(E);return S||(S=new nw(h),p.eventManagers.set(E,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){Te(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,E,S){var N=this;return(0,g.Z)(function*(){!function tw(y){var h,p,E,S,N,K,he,Le,Je,ct;const lt=qa();$("function"==typeof(null===(h=null==lt?void 0:lt.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(void 0!==(null===(p=null==lt?void 0:lt.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(N=null===(S=null===(E=null==lt?void 0:lt.cordova)||void 0===E?void 0:E.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Le=null===(he=null===(K=null==lt?void 0:lt.cordova)||void 0===K?void 0:K.plugins)||void 0===he?void 0:he.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(ct=null===(Je=null==lt?void 0:lt.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===ct?void 0:ct.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const K=yield N._initialize(h);yield K.initialized(),K.resetRedirect(),function b(){Ds.clear()}(),yield N._originValidation(h);const he=function Dy(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:nm(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(h,E,S);yield function ra(y,h){return Xd()._set(nl(y),h)}(h,he);const Le=yield function Xg(y,h,p){return Li.apply(this,arguments)}(h,he,p),Je=yield function Yd(y){const{cordova:h}=qa();return new Promise(p=>{h.plugins.browsertab.isAvailable(E=>{let S=null;E?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function _d(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Le);return function em(y,h,p){return zf.apply(this,arguments)}(h,K,Je)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ic(y){return na.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:E,handleOpenURL:S,BuildInfo:N}=qa(),K=setTimeout((0,g.Z)(function*(){yield tm(h),p.onEvent(nh())}),500),he=function(){var ct=(0,g.Z)(function*(lt){clearTimeout(K);const $n=yield tm(h);let Bi=null;$n&&(null==lt?void 0:lt.url)&&(Bi=function Ty(y,h){var p,E;const S=function eh(y){const h=th(y),p=h.link?decodeURIComponent(h.link):void 0,E=th(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return th(S).link||S||E||p||y}(h);if(S.includes("/__/auth/callback")){const N=th(S),K=N.firebaseError?function rl(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(N.firebaseError)):null,he=null===(E=null===(p=null==K?void 0:K.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],Le=he?we(he):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}($n,lt.url)),p.onEvent(Bi||nh())});return function($n){return ct.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,he);const Le=S,Je=`${N.packageName.toLowerCase()}://`;qa().handleOpenURL=function(){var ct=(0,g.Z)(function*(lt){if(lt.toLowerCase().startsWith(Je)&&he({url:lt}),"function"==typeof Le)try{Le(lt)}catch($n){console.error($n)}});return function(lt){return ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=is,this._completeRedirectFn=us,this._overrideRedirectResult=D}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,E,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,p,E,S)})()}_openRedirect(h,p,E,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,p,E,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Vi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return My(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Ui(){return ia.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Tc(y){return y.unwrap()}function am(y){return Xf(y)}function Xf(y){const{_tokenResponse:h}=y instanceof F.ZR?y.customData:y;if(!h)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return qs.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let E;switch(p){case"google.com":E=Td;break;case"facebook.com":E=Uo;break;case"github.com":E=Mf;break;case"twitter.com":E=Ad;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:K,pendingToken:he,nonce:Le}=h;return N||K||S||he?he?p.startsWith("saml.")?fo._create(p,he):gs._fromParams({providerId:p,signInMethod:p,pendingToken:he,idToken:S,accessToken:N}):new es(p).credential({idToken:S,accessToken:N,rawNonce:Le}):null}return y instanceof F.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Ii(y,h){return h.catch(p=>{throw p instanceof F.ZR&&function lr(y,h){var p;const E=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new sh(y,function jn(y,h){var p;const E=(0,F.m9)(y),S=h;return $(h.customData.operationType,E,"argument-error"),$(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),vo._fromError(E,S)}(y,h));else if(E){const S=Xf(h),N=h;S&&(N.credential=S,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:am(p),additionalUserInfo:Qn(p),user:Ys.getOrCreate(S)}})}function cr(y,h){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:E=>Ii(y,p.confirm(E))}})).apply(this,arguments)}class sh{constructor(h,p){this.resolver=p,this.auth=function ol(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ii(Tc(this.auth),this.resolver.resolveSignIn(h))}}class Ys{constructor(h){this._delegate=h,this.multiFactor=function Hg(y){const h=(0,F.m9)(y);return $u.has(h)||$u.set(h,zo._fromUser(h)),$u.get(h)}(h)}static getOrCreate(h){return Ys.USER_MAP.has(h)||Ys.USER_MAP.set(h,new Ys(h)),Ys.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return Ii(p.auth,ar(p._delegate,h))})()}linkWithPhoneNumber(h,p){var E=this;return(0,g.Z)(function*(){return cr(E.auth,function Hn(y,h,p){return fc.apply(this,arguments)}(E._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return Ii(p.auth,function Bf(y,h,p){return wi.apply(this,arguments)}(p._delegate,h,Zs))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Ka(at(p.auth)),function Ht(y,h,p){return function wt(y,h,p){return Sn.apply(this,arguments)}(y,h,p)}(p._delegate,h,Zs)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return Ii(p.auth,_s(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return cr(this.auth,function Wg(y,h,p){return Yr.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Ii(this.auth,function jd(y,h,p){return pc.apply(this,arguments)}(this._delegate,h,Zs))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Ka(at(p.auth)),function et(y,h,p){return function tt(y,h,p){return yt.apply(this,arguments)}(y,h,p)}(p._delegate,h,Zs)})()}sendEmailVerification(h){return function Ri(y,h){return ec.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function Rf(y,h){return sn.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Md(y,h){return ju((0,F.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Rd(y,h){return ju((0,F.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Ws(y,h){return Ei.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Uu(y,h){return Bu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Lu(y,h,p){return Vu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ys.USER_MAP=new WeakMap;const Ts=$;let Qs=(()=>{class y{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;Ts(S,"invalid-api-key",{appName:p.name}),Ts(S,"invalid-api-key",{appName:p.name});const N="undefined"!=typeof window?Zs:void 0;this._delegate=E.initialize({options:{persistence:Or(S,p.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Pe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ys.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function zr(y,h,p){const E=at(y);$(E._canInitEmulator,E,"emulator-config-failed"),$(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const S=!!(null==p?void 0:p.disableWarnings),N=Zi(h),{host:K,port:he}=function Pn(y){const h=Zi(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const N=S[1];return{host:N,port:Yi(E.substr(N.length+1))}}{const[N,K]=E.split(":");return{host:N,port:Yi(K)}}}(h);E.config.emulator={url:`${N}//${K}${null===he?"":`:${he}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:K,port:he,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function cn(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,E)}applyActionCode(p){return function Go(y,h){return Ae.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return kt(this._delegate,p)}confirmPasswordReset(p,E){return function Ou(y,h,p){return Yl.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var S=this;return(0,g.Z)(function*(){return Ii(S._delegate,function mo(y,h,p){return gi.apply(this,arguments)}(S._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Fu(y,h){return Hs.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function xd(y,h){const p=Ru.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Ts(nt(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function ur(y,h){return zs.apply(this,arguments)}(p._delegate,Zs);return E?Ii(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Kf(y,h){at(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,E,S){const{next:N,error:K,complete:he}=To(p,E,S);return this._delegate.onAuthStateChanged(N,K,he)}onIdTokenChanged(p,E,S){const{next:N,error:K,complete:he}=To(p,E,S);return this._delegate.onIdTokenChanged(N,K,he)}sendSignInLinkToEmail(p,E){return function Jl(y,h,p){return Xl.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function Zl(y,h,p){return Pu.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,g.Z)(function*(){let S;switch(function Qf(y,h){Dc(Object.values(Ci).includes(h),y,"invalid-persistence-type"),(0,F.b$)()?Dc(h!==Ci.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?Dc(h===Ci.NONE,y,"unsupported-persistence-type"):sl()?Dc(h===Ci.NONE||h===Ci.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):Dc(h===Ci.NONE||om(),y,"unsupported-persistence-type")}(E._delegate,p),p){case Ci.SESSION:S=is;break;case Ci.LOCAL:S=(yield te(Co)._isAvailable())?Co:wo;break;case Ci.NONE:S=vt;break;default:return Te("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Ii(this._delegate,function Sd(y){return Wl.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Ii(this._delegate,_n(this._delegate,p))}signInWithCustomToken(p){return Ii(this._delegate,function $o(y,h){return gt.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return Ii(this._delegate,function Ql(y,h,p){return _n((0,F.m9)(y),Dd.credential(h,p))}(this._delegate,p,E))}signInWithEmailLink(p,E){return Ii(this._delegate,function Ug(y,h,p){return ys.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return cr(this._delegate,function An(y,h,p){return vi.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,g.Z)(function*(){return Ts(nt(),E._delegate,"operation-not-supported-in-this-environment"),Ii(E._delegate,function zg(y,h,p){return os.apply(this,arguments)}(E._delegate,p,Zs))})()}signInWithRedirect(p){var E=this;return(0,g.Z)(function*(){return Ts(nt(),E._delegate,"operation-not-supported-in-this-environment"),yield Ka(E._delegate),function J(y,h,p){return function se(y,h,p){return Ne.apply(this,arguments)}(y,h,p)}(E._delegate,p,Zs)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function hn(y,h){return ku.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ci,y})();function To(y,h,p){let E=y;"function"!=typeof y&&({next:E,error:h,complete:p}=y);const S=E;return{next:K=>S(K&&Ys.getOrCreate(K)),error:h,complete:p}}function Or(y,h){const p=function ih(y,h){const p=Za();if(!p)return[];const E=Ln(rh,y,h);switch(p.getItem(E)){case Ci.NONE:return[vt];case Ci.LOCAL:return[Co,is];case Ci.SESSION:return[is];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(Co)&&p.push(Co),"undefined"!=typeof window)for(const E of[wo,is])p.includes(E)||p.push(E);return p.includes(vt)||p.push(vt),p}class Ya{constructor(){this.providerId="phone",this._delegate=new qs(Tc(ee.Z.auth()))}static credential(h,p){return qs.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Ya.PHONE_SIGN_IN_METHOD=qs.PHONE_SIGN_IN_METHOD,Ya.PROVIDER_ID=qs.PROVIDER_ID;const ep=$;class um{constructor(h,p,E=ee.Z.app()){var S;ep(null===(S=E.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new dc(h,p,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Qa(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new Qs(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Dd,FacebookAuthProvider:Uo,GithubAuthProvider:Mf,GoogleAuthProvider:Td,OAuthProvider:es,SAMLAuthProvider:Rr,PhoneAuthProvider:Ya,PhoneMultiFactorGenerator:XE,RecaptchaVerifier:um,TwitterAuthProvider:Ad,Auth:Qs,AuthCredential:xi,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.14")}(ee.Z)},8306:(Ye,ve,k)=>{k.d(ve,{y:()=>G});var g=k(930),ee=k(727),F=k(8822),ue=k(4671);var le=k(2416),oe=k(576),de=k(2806);let G=(()=>{class xe{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const fe=new xe;return fe.source=this,fe.operator=Ve,fe}subscribe(Ve,fe,Ie){const We=function Ge(xe){return xe&&xe instanceof g.Lv||function ne(xe){return xe&&(0,oe.m)(xe.next)&&(0,oe.m)(xe.error)&&(0,oe.m)(xe.complete)}(xe)&&(0,ee.Nn)(xe)}(Ve)?Ve:new g.Hp(Ve,fe,Ie);return(0,de.x)(()=>{const{operator:Ze,source:Te}=this;We.add(Ze?Ze.call(We,Te):Te?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(fe){Ve.error(fe)}}forEach(Ve,fe){return new(fe=H(fe))((Ie,We)=>{const Ze=new g.Hp({next:Te=>{try{Ve(Te)}catch(we){We(we),Ze.unsubscribe()}},error:We,complete:Ie});this.subscribe(Ze)})}_subscribe(Ve){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Ve)}[F.L](){return this}pipe(...Ve){return function ge(xe){return 0===xe.length?ue.y:1===xe.length?xe[0]:function(Ve){return xe.reduce((fe,Ie)=>Ie(fe),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=H(Ve))((fe,Ie)=>{let We;this.subscribe(Ze=>We=Ze,Ze=>Ie(Ze),()=>fe(We))})}}return xe.create=Pe=>new xe(Pe),xe})();function H(xe){var Pe;return null!==(Pe=null!=xe?xe:le.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(Ye,ve,k)=>{k.d(ve,{x:()=>le});var g=k(8306),ee=k(727);const ue=(0,k(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),ge=k(2806);let le=(()=>{class de extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ne=new oe(this,this);return ne.operator=H,ne}_throwIfClosed(){if(this.closed)throw new ue}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ne}=this;for(;ne.length;)ne.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ne,isStopped:Ge,observers:xe}=this;return ne||Ge?ee.Lc:(this.currentObservers=null,xe.push(H),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(xe,H)}))}_checkFinalizedStatuses(H){const{hasError:ne,thrownError:Ge,isStopped:xe}=this;ne?H.error(Ge):xe&&H.complete()}asObservable(){const H=new g.y;return H.source=this,H}}return de.create=(G,H)=>new oe(G,H),de})();class oe extends le{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,ne;null===(ne=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ne||ne.call(H,G)}error(G){var H,ne;null===(ne=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ne||ne.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,ne;return null!==(ne=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==ne?ne:ee.Lc}}},930:(Ye,ve,k)=>{k.d(ve,{Hp:()=>Ve,Lv:()=>ne});var g=k(576),ee=k(727),F=k(2416),ue=k(7849),re=k(5032);const ge=de("C",void 0,void 0);function de(Te,we,Ce){return{kind:Te,value:we,error:Ce}}var G=k(3410),H=k(2806);class ne extends ee.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,ee.Nn)(we)&&we.add(this)):this.destination=Ze}static create(we,Ce,Ue){return new Ve(we,Ce,Ue)}next(we){this.isStopped?We(function oe(Te){return de("N",Te,void 0)}(we),this):this._next(we)}error(we){this.isStopped?We(function le(Te){return de("E",void 0,Te)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?We(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function xe(Te,we){return Ge.call(Te,we)}class Pe{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(we)}catch(Ue){fe(Ue)}}error(we){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(we)}catch(Ue){fe(Ue)}else fe(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ce){fe(Ce)}}}class Ve extends ne{constructor(we,Ce,Ue){let Be;if(super(),(0,g.m)(we)||!we)Be={next:null!=we?we:void 0,error:null!=Ce?Ce:void 0,complete:null!=Ue?Ue:void 0};else{let $;this&&F.v.useDeprecatedNextContext?($=Object.create(we),$.unsubscribe=()=>this.unsubscribe(),Be={next:we.next&&xe(we.next,$),error:we.error&&xe(we.error,$),complete:we.complete&&xe(we.complete,$)}):Be=we}this.destination=new Pe(Be)}}function fe(Te){F.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Te):(0,ue.h)(Te)}function We(Te,we){const{onStoppedNotification:Ce}=F.v;Ce&&G.z.setTimeout(()=>Ce(Te,we))}const Ze={closed:!0,next:re.Z,error:function Ie(Te){throw Te},complete:re.Z}},727:(Ye,ve,k)=>{k.d(ve,{Lc:()=>ge,w0:()=>re,Nn:()=>le});var g=k(576);const F=(0,k(3888).d)(de=>function(H){de(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ne,Ge)=>`${Ge+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ue=k(8737);class re{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const xe of H)xe.remove(this);else H.remove(this);const{initialTeardown:ne}=this;if((0,g.m)(ne))try{ne()}catch(xe){G=xe instanceof F?xe.errors:[xe]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const xe of Ge)try{oe(xe)}catch(Pe){G=null!=G?G:[],Pe instanceof F?G=[...G,...Pe.errors]:G.push(Pe)}}if(G)throw new F(G)}}add(G){var H;if(G&&G!==this)if(this.closed)oe(G);else{if(G instanceof re){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,ue.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,ue.P)(H,G),G instanceof re&&G._removeParent(this)}}re.EMPTY=(()=>{const de=new re;return de.closed=!0,de})();const ge=re.EMPTY;function le(de){return de instanceof re||de&&"closed"in de&&(0,g.m)(de.remove)&&(0,g.m)(de.add)&&(0,g.m)(de.unsubscribe)}function oe(de){(0,g.m)(de)?de():de.unsubscribe()}},2416:(Ye,ve,k)=>{k.d(ve,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ye,ve,k)=>{k.d(ve,{E:()=>ee});const ee=new(k(8306).y)(re=>re.complete())},8996:(Ye,ve,k)=>{k.d(ve,{D:()=>we});var g=k(8421),ee=k(5363),F=k(9468),ge=k(8306),oe=k(2202),de=k(576),G=k(9672);function ne(Ce,Ue){if(!Ce)throw new Error("Iterable cannot be null");return new ge.y(Be=>{(0,G.f)(Be,Ue,()=>{const $=Ce[Symbol.asyncIterator]();(0,G.f)(Be,Ue,()=>{$.next().then(Ee=>{Ee.done?Be.complete():Be.next(Ee.value)})},0,!0)})})}var Ge=k(3670),xe=k(8239),Pe=k(1144),Ve=k(6495),fe=k(2206),Ie=k(4532),We=k(3260);function we(Ce,Ue){return Ue?function Te(Ce,Ue){if(null!=Ce){if((0,Ge.c)(Ce))return function ue(Ce,Ue){return(0,g.Xf)(Ce).pipe((0,F.R)(Ue),(0,ee.Q)(Ue))}(Ce,Ue);if((0,Pe.z)(Ce))return function le(Ce,Ue){return new ge.y(Be=>{let $=0;return Ue.schedule(function(){$===Ce.length?Be.complete():(Be.next(Ce[$++]),Be.closed||this.schedule())})})}(Ce,Ue);if((0,xe.t)(Ce))return function re(Ce,Ue){return(0,g.Xf)(Ce).pipe((0,F.R)(Ue),(0,ee.Q)(Ue))}(Ce,Ue);if((0,fe.D)(Ce))return ne(Ce,Ue);if((0,Ve.T)(Ce))return function H(Ce,Ue){return new ge.y(Be=>{let $;return(0,G.f)(Be,Ue,()=>{$=Ce[oe.h](),(0,G.f)(Be,Ue,()=>{let Ee,Z;try{({value:Ee,done:Z}=$.next())}catch(ie){return void Be.error(ie)}Z?Be.complete():Be.next(Ee)},0,!0)}),()=>(0,de.m)(null==$?void 0:$.return)&&$.return()})}(Ce,Ue);if((0,We.L)(Ce))return function Ze(Ce,Ue){return ne((0,We.Q)(Ce),Ue)}(Ce,Ue)}throw(0,Ie.z)(Ce)}(Ce,Ue):(0,g.Xf)(Ce)}},8421:(Ye,ve,k)=>{k.d(ve,{Xf:()=>Ge});var g=k(655),ee=k(1144),F=k(8239),ue=k(8306),re=k(3670),ge=k(2206),le=k(4532),oe=k(6495),de=k(3260),G=k(576),H=k(7849),ne=k(8822);function Ge(Te){if(Te instanceof ue.y)return Te;if(null!=Te){if((0,re.c)(Te))return function xe(Te){return new ue.y(we=>{const Ce=Te[ne.L]();if((0,G.m)(Ce.subscribe))return Ce.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,ee.z)(Te))return function Pe(Te){return new ue.y(we=>{for(let Ce=0;Ce<Te.length&&!we.closed;Ce++)we.next(Te[Ce]);we.complete()})}(Te);if((0,F.t)(Te))return function Ve(Te){return new ue.y(we=>{Te.then(Ce=>{we.closed||(we.next(Ce),we.complete())},Ce=>we.error(Ce)).then(null,H.h)})}(Te);if((0,ge.D)(Te))return Ie(Te);if((0,oe.T)(Te))return function fe(Te){return new ue.y(we=>{for(const Ce of Te)if(we.next(Ce),we.closed)return;we.complete()})}(Te);if((0,de.L)(Te))return function We(Te){return Ie((0,de.Q)(Te))}(Te)}throw(0,le.z)(Te)}function Ie(Te){return new ue.y(we=>{(function Ze(Te,we){var Ce,Ue,Be,$;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,g.KL)(Te);!(Ue=yield Ce.next()).done;)if(we.next(Ue.value),we.closed)return}catch(Ee){Be={error:Ee}}finally{try{Ue&&!Ue.done&&($=Ce.return)&&(yield $.call(Ce))}finally{if(Be)throw Be.error}}we.complete()})})(Te,we).catch(Ce=>we.error(Ce))})}},6451:(Ye,ve,k)=>{k.d(ve,{T:()=>ge});var g=k(8189),ee=k(8421),F=k(515),ue=k(7669),re=k(8996);function ge(...le){const oe=(0,ue.yG)(le),de=(0,ue._6)(le,1/0),G=le;return G.length?1===G.length?(0,ee.Xf)(G[0]):(0,g.J)(de)((0,re.D)(G,oe)):F.E}},5403:(Ye,ve,k)=>{k.d(ve,{x:()=>ee});var g=k(930);function ee(ue,re,ge,le,oe){return new F(ue,re,ge,le,oe)}class F extends g.Lv{constructor(re,ge,le,oe,de,G){super(re),this.onFinalize=de,this.shouldUnsubscribe=G,this._next=ge?function(H){try{ge(H)}catch(ne){re.error(ne)}}:super._next,this._error=oe?function(H){try{oe(H)}catch(ne){re.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(H){re.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Ye,ve,k)=>{k.d(ve,{U:()=>F});var g=k(4482),ee=k(5403);function F(ue,re){return(0,g.e)((ge,le)=>{let oe=0;ge.subscribe((0,ee.x)(le,de=>{le.next(ue.call(re,de,oe++))}))})}},8189:(Ye,ve,k)=>{k.d(ve,{J:()=>F});var g=k(5577),ee=k(4671);function F(ue=1/0){return(0,g.z)(ee.y,ue)}},5577:(Ye,ve,k)=>{k.d(ve,{z:()=>oe});var g=k(4004),ee=k(8421),F=k(4482),ue=k(9672),re=k(5403),le=k(576);function oe(de,G,H=1/0){return(0,le.m)(G)?oe((ne,Ge)=>(0,g.U)((xe,Pe)=>G(ne,xe,Ge,Pe))((0,ee.Xf)(de(ne,Ge))),H):("number"==typeof G&&(H=G),(0,F.e)((ne,Ge)=>function ge(de,G,H,ne,Ge,xe,Pe,Ve){const fe=[];let Ie=0,We=0,Ze=!1;const Te=()=>{Ze&&!fe.length&&!Ie&&G.complete()},we=Ue=>Ie<ne?Ce(Ue):fe.push(Ue),Ce=Ue=>{xe&&G.next(Ue),Ie++;let Be=!1;(0,ee.Xf)(H(Ue,We++)).subscribe((0,re.x)(G,$=>{null==Ge||Ge($),xe?we($):G.next($)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ie--;fe.length&&Ie<ne;){const $=fe.shift();Pe?(0,ue.f)(G,Pe,()=>Ce($)):Ce($)}Te()}catch($){G.error($)}}))};return de.subscribe((0,re.x)(G,we,()=>{Ze=!0,Te()})),()=>{null==Ve||Ve()}}(ne,Ge,de,H)))}},5363:(Ye,ve,k)=>{k.d(ve,{Q:()=>ue});var g=k(9672),ee=k(4482),F=k(5403);function ue(re,ge=0){return(0,ee.e)((le,oe)=>{le.subscribe((0,F.x)(oe,de=>(0,g.f)(oe,re,()=>oe.next(de),ge),()=>(0,g.f)(oe,re,()=>oe.complete(),ge),de=>(0,g.f)(oe,re,()=>oe.error(de),ge)))})}},3099:(Ye,ve,k)=>{k.d(ve,{B:()=>ge});var g=k(8996),ee=k(5698),F=k(7579),ue=k(930),re=k(4482);function ge(oe={}){const{connector:de=(()=>new F.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:ne=!0}=oe;return Ge=>{let xe=null,Pe=null,Ve=null,fe=0,Ie=!1,We=!1;const Ze=()=>{null==Pe||Pe.unsubscribe(),Pe=null},Te=()=>{Ze(),xe=Ve=null,Ie=We=!1},we=()=>{const Ce=xe;Te(),null==Ce||Ce.unsubscribe()};return(0,re.e)((Ce,Ue)=>{fe++,!We&&!Ie&&Ze();const Be=Ve=null!=Ve?Ve:de();Ue.add(()=>{fe--,0===fe&&!We&&!Ie&&(Pe=le(we,ne))}),Be.subscribe(Ue),xe||(xe=new ue.Hp({next:$=>Be.next($),error:$=>{We=!0,Ze(),Pe=le(Te,G,$),Be.error($)},complete:()=>{Ie=!0,Ze(),Pe=le(Te,H),Be.complete()}}),(0,g.D)(Ce).subscribe(xe))})(Ge)}}function le(oe,de,...G){return!0===de?(oe(),null):!1===de?null:de(...G).pipe((0,ee.q)(1)).subscribe(()=>oe())}},9468:(Ye,ve,k)=>{k.d(ve,{R:()=>ee});var g=k(4482);function ee(F,ue=0){return(0,g.e)((re,ge)=>{ge.add(F.schedule(()=>re.subscribe(ge),ue))})}},5698:(Ye,ve,k)=>{k.d(ve,{q:()=>ue});var g=k(515),ee=k(4482),F=k(5403);function ue(re){return re<=0?()=>g.E:(0,ee.e)((ge,le)=>{let oe=0;ge.subscribe((0,F.x)(le,de=>{++oe<=re&&(le.next(de),re<=oe&&le.complete())}))})}},8505:(Ye,ve,k)=>{k.d(ve,{b:()=>re});var g=k(576),ee=k(4482),F=k(5403),ue=k(4671);function re(ge,le,oe){const de=(0,g.m)(ge)||le||oe?{next:ge,error:le,complete:oe}:ge;return de?(0,ee.e)((G,H)=>{var ne;null===(ne=de.subscribe)||void 0===ne||ne.call(de);let Ge=!0;G.subscribe((0,F.x)(H,xe=>{var Pe;null===(Pe=de.next)||void 0===Pe||Pe.call(de,xe),H.next(xe)},()=>{var xe;Ge=!1,null===(xe=de.complete)||void 0===xe||xe.call(de),H.complete()},xe=>{var Pe;Ge=!1,null===(Pe=de.error)||void 0===Pe||Pe.call(de,xe),H.error(xe)},()=>{var xe,Pe;Ge&&(null===(xe=de.unsubscribe)||void 0===xe||xe.call(de)),null===(Pe=de.finalize)||void 0===Pe||Pe.call(de)}))}):ue.y}},4408:(Ye,ve,k)=>{k.d(ve,{o:()=>re});var g=k(727);class ee extends g.w0{constructor(le,oe){super()}schedule(le,oe=0){return this}}const F={setInterval(ge,le,...oe){const{delegate:de}=F;return(null==de?void 0:de.setInterval)?de.setInterval(ge,le,...oe):setInterval(ge,le,...oe)},clearInterval(ge){const{delegate:le}=F;return((null==le?void 0:le.clearInterval)||clearInterval)(ge)},delegate:void 0};var ue=k(8737);class re extends ee{constructor(le,oe){super(le,oe),this.scheduler=le,this.work=oe,this.pending=!1}schedule(le,oe=0){if(this.closed)return this;this.state=le;const de=this.id,G=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(G,de,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(G,this.id,oe),this}requestAsyncId(le,oe,de=0){return F.setInterval(le.flush.bind(le,this),de)}recycleAsyncId(le,oe,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return oe;F.clearInterval(oe)}execute(le,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(le,oe);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,oe){let G,de=!1;try{this.work(le)}catch(H){de=!0,G=H||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:le,scheduler:oe}=this,{actions:de}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(de,this),null!=le&&(this.id=this.recycleAsyncId(oe,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ye,ve,k)=>{k.d(ve,{v:()=>F});var g=k(6063);class ee{constructor(re,ge=ee.now){this.schedulerActionCtor=re,this.now=ge}schedule(re,ge=0,le){return new this.schedulerActionCtor(this,re).schedule(le,ge)}}ee.now=g.l.now;class F extends ee{constructor(re,ge=ee.now){super(re,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:ge}=this;if(this._active)return void ge.push(re);let le;this._active=!0;do{if(le=re.execute(re.state,re.delay))break}while(re=ge.shift());if(this._active=!1,le){for(;re=ge.shift();)re.unsubscribe();throw le}}}},4986:(Ye,ve,k)=>{k.d(ve,{z:()=>F});var g=k(4408);const F=new(k(7565).v)(g.o)},6063:(Ye,ve,k)=>{k.d(ve,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Ye,ve,k)=>{k.d(ve,{z:()=>g});const g={setTimeout(ee,F,...ue){const{delegate:re}=g;return(null==re?void 0:re.setTimeout)?re.setTimeout(ee,F,...ue):setTimeout(ee,F,...ue)},clearTimeout(ee){const{delegate:F}=g;return((null==F?void 0:F.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(Ye,ve,k)=>{k.d(ve,{h:()=>ee});const ee=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ye,ve,k)=>{k.d(ve,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Ye,ve,k)=>{k.d(ve,{_6:()=>ge,jO:()=>ue,yG:()=>re});var g=k(576);function F(le){return le[le.length-1]}function ue(le){return(0,g.m)(F(le))?le.pop():void 0}function re(le){return function ee(le){return le&&(0,g.m)(le.schedule)}(F(le))?le.pop():void 0}function ge(le,oe){return"number"==typeof F(le)?le.pop():oe}},8737:(Ye,ve,k)=>{function g(ee,F){if(ee){const ue=ee.indexOf(F);0<=ue&&ee.splice(ue,1)}}k.d(ve,{P:()=>g})},3888:(Ye,ve,k)=>{function g(ee){const ue=ee(re=>{Error.call(re),re.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}k.d(ve,{d:()=>g})},2806:(Ye,ve,k)=>{k.d(ve,{O:()=>ue,x:()=>F});var g=k(2416);let ee=null;function F(re){if(g.v.useDeprecatedSynchronousErrorHandling){const ge=!ee;if(ge&&(ee={errorThrown:!1,error:null}),re(),ge){const{errorThrown:le,error:oe}=ee;if(ee=null,le)throw oe}}else re()}function ue(re){g.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(Ye,ve,k)=>{function g(ee,F,ue,re=0,ge=!1){const le=F.schedule(function(){ue(),ge?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(le),!ge)return le}k.d(ve,{f:()=>g})},4671:(Ye,ve,k)=>{function g(ee){return ee}k.d(ve,{y:()=>g})},1144:(Ye,ve,k)=>{k.d(ve,{z:()=>g});const g=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Ye,ve,k)=>{k.d(ve,{D:()=>ee});var g=k(576);function ee(F){return Symbol.asyncIterator&&(0,g.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(Ye,ve,k)=>{function g(ee){return"function"==typeof ee}k.d(ve,{m:()=>g})},3670:(Ye,ve,k)=>{k.d(ve,{c:()=>F});var g=k(8822),ee=k(576);function F(ue){return(0,ee.m)(ue[g.L])}},6495:(Ye,ve,k)=>{k.d(ve,{T:()=>F});var g=k(2202),ee=k(576);function F(ue){return(0,ee.m)(null==ue?void 0:ue[g.h])}},8239:(Ye,ve,k)=>{k.d(ve,{t:()=>ee});var g=k(576);function ee(F){return(0,g.m)(null==F?void 0:F.then)}},3260:(Ye,ve,k)=>{k.d(ve,{L:()=>ue,Q:()=>F});var g=k(655),ee=k(576);function F(re){return(0,g.FC)(this,arguments,function*(){const le=re.getReader();try{for(;;){const{value:oe,done:de}=yield(0,g.qq)(le.read());if(de)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(oe)}}finally{le.releaseLock()}})}function ue(re){return(0,ee.m)(null==re?void 0:re.getReader)}},4482:(Ye,ve,k)=>{k.d(ve,{A:()=>ee,e:()=>F});var g=k(576);function ee(ue){return(0,g.m)(null==ue?void 0:ue.lift)}function F(ue){return re=>{if(ee(re))return re.lift(function(ge){try{return ue(ge,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ye,ve,k)=>{function g(){}k.d(ve,{Z:()=>g})},7849:(Ye,ve,k)=>{k.d(ve,{h:()=>F});var g=k(2416),ee=k(3410);function F(ue){ee.z.setTimeout(()=>{const{onUnhandledError:re}=g.v;if(!re)throw ue;re(ue)})}},4532:(Ye,ve,k)=>{function g(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(ve,{z:()=>g})},655:(Ye,ve,k)=>{function ue(Z,ie){var te={};for(var me in Z)Object.prototype.hasOwnProperty.call(Z,me)&&ie.indexOf(me)<0&&(te[me]=Z[me]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(me=Object.getOwnPropertySymbols(Z);ae<me.length;ae++)ie.indexOf(me[ae])<0&&Object.prototype.propertyIsEnumerable.call(Z,me[ae])&&(te[me[ae]]=Z[me[ae]])}return te}function oe(Z,ie,te,me){return new(te||(te=Promise))(function(Oe,ut){function Bt(en){try{Ke(me.next(en))}catch(In){ut(In)}}function Pt(en){try{Ke(me.throw(en))}catch(In){ut(In)}}function Ke(en){en.done?Oe(en.value):function ae(Oe){return Oe instanceof te?Oe:new te(function(ut){ut(Oe)})}(en.value).then(Bt,Pt)}Ke((me=me.apply(Z,ie||[])).next())})}function fe(Z){return this instanceof fe?(this.v=Z,this):new fe(Z)}function Ie(Z,ie,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,me=te.apply(Z,ie||[]),Oe=[];return ae={},ut("next"),ut("throw"),ut("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function ut(tn){me[tn]&&(ae[tn]=function(Zt){return new Promise(function(Ar,Wt){Oe.push([tn,Zt,Ar,Wt])>1||Bt(tn,Zt)})})}function Bt(tn,Zt){try{!function Pt(tn){tn.value instanceof fe?Promise.resolve(tn.value.v).then(Ke,en):In(Oe[0][2],tn)}(me[tn](Zt))}catch(Ar){In(Oe[0][3],Ar)}}function Ke(tn){Bt("next",tn)}function en(tn){Bt("throw",tn)}function In(tn,Zt){tn(Zt),Oe.shift(),Oe.length&&Bt(Oe[0][0],Oe[0][1])}}function Ze(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,ie=Z[Symbol.asyncIterator];return ie?ie.call(Z):(Z=function ne(Z){var ie="function"==typeof Symbol&&Symbol.iterator,te=ie&&Z[ie],me=0;if(te)return te.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&me>=Z.length&&(Z=void 0),{value:Z&&Z[me++],done:!Z}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),te={},me("next"),me("throw"),me("return"),te[Symbol.asyncIterator]=function(){return this},te);function me(Oe){te[Oe]=Z[Oe]&&function(ut){return new Promise(function(Bt,Pt){!function ae(Oe,ut,Bt,Pt){Promise.resolve(Pt).then(function(Ke){Oe({value:Ke,done:Bt})},ut)}(Bt,Pt,(ut=Z[Oe](ut)).done,ut.value)})}}}k.d(ve,{FC:()=>Ie,KL:()=>Ze,_T:()=>ue,mG:()=>oe,qq:()=>fe})},5e3:(Ye,ve,k)=>{k.d(ve,{$8M:()=>Va,$Z:()=>Uc,AFp:()=>V0,ALo:()=>Jc,AaK:()=>oe,CHM:()=>Wo,CRH:()=>D0,CZH:()=>L0,CqO:()=>Rv,EJc:()=>B0,EpF:()=>Tp,F4k:()=>Ym,FYo:()=>Hp,FiY:()=>er,G48:()=>Rl,GfV:()=>uI,Gpc:()=>H,JOm:()=>N,LFG:()=>tt,LSH:()=>nh,Lbi:()=>mA,MAs:()=>wp,MGl:()=>Rh,NdJ:()=>Qm,OlP:()=>pn,Oqu:()=>$v,PXZ:()=>ad,Q6J:()=>xv,QGY:()=>Zm,Qsj:()=>b_,R0b:()=>ai,RDi:()=>ql,Rgc:()=>tf,SBq:()=>Po,Sil:()=>H0,Suo:()=>b0,TTD:()=>es,TgZ:()=>Dp,VLi:()=>sg,X6Q:()=>JI,XFs:()=>pt,Xpm:()=>dt,Y36:()=>bp,YKP:()=>pI,YNc:()=>fC,Yjl:()=>Ia,Yz7:()=>Zt,ZZ4:()=>tE,_Bn:()=>to,_UZ:()=>qm,_Vd:()=>mu,_c5:()=>ab,_uU:()=>OC,aQg:()=>Pl,c2e:()=>_A,cJS:()=>Wt,cg1:()=>h_,dDg:()=>G0,deG:()=>kf,dqk:()=>Ft,eFA:()=>z0,ekj:()=>Uv,g9A:()=>io,h0i:()=>Oo,hGG:()=>ub,hij:()=>s_,iGM:()=>Qp,ifc:()=>jt,ip1:()=>F0,kL8:()=>Qv,lG2:()=>Au,lcZ:()=>y0,n5z:()=>La,oAB:()=>xr,oxw:()=>xh,q4F:()=>lI,qLn:()=>lr,qOj:()=>da,qZA:()=>jc,s9C:()=>Mh,sBO:()=>TA,sIi:()=>br,s_b:()=>Zp,soG:()=>k_,tBr:()=>Jr,tb:()=>af,tp0:()=>ta,uIk:()=>fl,vHH:()=>Pe,vpe:()=>no,wAp:()=>it,xp6:()=>jy,z2F:()=>cf,zSh:()=>ov,zs3:()=>ua});var g=k(7579),ee=k(727),F=k(8306),ue=k(6451),re=k(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function le(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function oe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(oe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function de(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return oe(this())},s}function ne(s){return Ge(s)?s():s}function Ge(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}class Pe extends Error{constructor(o,u){super(function Ve(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function fe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():fe(s)}function we(s,o){const u=o?` in ${o}`:"";throw new Pe(-201,`No provider for ${Ie(s)} found${u}`)}function Pt(s,o){null==s&&function Ke(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Zt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Wt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ot(s){return qi(s,zi)||qi(s,$r)}function qi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Sr(s){return s&&(s.hasOwnProperty(Ps)||s.hasOwnProperty(Ki))?s[Ps]:null}const zi=ge({\u0275prov:ge}),Ps=ge({\u0275inj:ge}),$r=ge({ngInjectableDef:ge}),Ki=ge({ngInjectorDef:ge});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let di;function bn(s){const o=di;return di=s,o}function Os(s,o,u){const c=Ot(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&pt.Optional?null:void 0!==o?o:void we(oe(s),"Injector")}function Yn(s){return{toString:s}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),jt=(()=>{return(s=jt||(jt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",jt;var s})();const ot="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,mr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=ot||"undefined"!=typeof global&&global||_t||mr,yr={},U=[],q=ge({\u0275cmp:ge}),z=ge({\u0275dir:ge}),be=ge({\u0275pipe:ge}),W=ge({\u0275mod:ge}),X=ge({\u0275fac:ge}),Me=ge({__NG_ELEMENT_ID__:ge});let Qe=0;function dt(s){return Yn(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||U,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||jt.Emulated,id:"c",styles:s.styles||U,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,m=s.features,v=s.pipes;return c.id+=Qe++,c.inputs=Ca(s.inputs,u),c.outputs=Ca(s.outputs),m&&m.forEach(C=>C(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(ln):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(vt):null,c})}function ln(s){return Vn(s)||function Mr(s){return s[z]||null}(s)}function vt(s){return function ps(s){return s[be]||null}(s)}const Ln={};function xr(s){return Yn(()=>{const o={type:s.type,bootstrap:s.bootstrap||U,declarations:s.declarations||U,imports:s.imports||U,exports:s.exports||U,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Ln[s.id]=s.type),o})}function Ca(s,o){if(null==s)return yr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),u[d]=c,o&&(o[d]=m)}return u}const Au=dt;function Ia(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Vn(s){return s[q]||null}function Un(s,o){const u=s[W]||null;if(!u&&!0===o)throw new Error(`Type ${oe(s)} does not have '\u0275mod' property.`);return u}function Kr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Qi(s){return Array.isArray(s)&&!0===s[1]}function Mu(s){return 0!=(8&s.flags)}function yd(s){return 2==(2&s.flags)}function Ji(s){return 1==(1&s.flags)}function Xi(s){return null!==s.template}function jl(s){return 0!=(512&s[2])}function Er(s,o){return s.hasOwnProperty(X)?s[X]:null}class ho{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function es(){return Uo}function Uo(s){return s.type.prototype.ngOnChanges&&(s.setInput=Mf),Td}function Td(){const s=fo(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===yr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Mf(s,o,u,c){const d=fo(s)||function Bo(s,o){return s[$l]=o}(s,{previous:yr,current:null}),m=d.current||(d.current={}),v=d.previous,C=this.declaredInputs[u],I=v[C];m[C]=new ho(I&&I.currentValue,o,v===yr),s[c]=o}es.ngInherit=!0;const $l="__ngSimpleChanges__";function fo(s){return s[$l]||null}let Ho;function ql(s){Ho=s}function sn(s){return!!s.listen}const Sa={createRenderer:(s,o)=>function ts(){return void 0!==Ho?Ho:"undefined"!=typeof document?document:void 0}()};function Qt(s){for(;Array.isArray(s);)s=s[0];return s}function Bs(s,o){return Qt(o[s])}function or(s,o){return Qt(o[s.index])}function _n(s,o){return s.data[o]}function ns(s,o){return s[o]}function ar(s,o){const u=o[s];return Kr(u)?u:u[0]}function go(s){return 4==(4&s[2])}function _s(s){return 128==(128&s[2])}function Mi(s,o){return null==o?null:s[o]}function rs(s){s[18]=0}function $o(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const gt={lFrame:qo(null),bindingsEnabled:!0};function Ou(){return gt.bindingsEnabled}function Ae(){return gt.lFrame.lView}function kt(){return gt.lFrame.tView}function Wo(s){return gt.lFrame.contextLView=s,s[8]}function hn(){let s=ku();for(;null!==s&&64===s.type;)s=s.parent;return s}function ku(){return gt.lFrame.currentTNode}function gi(s,o){const u=gt.lFrame;u.currentTNode=s,u.isParent=o}function Ql(){return gt.lFrame.isParent}function Hs(){return gt.lFrame.bindingIndex++}function Vu(s,o){const u=gt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Na(o)}function Na(s){gt.lFrame.currentDirectiveIndex=s}function Bu(){return gt.lFrame.currentQueryIndex}function Md(s){gt.lFrame.currentQueryIndex=s}function Rd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ju(s,o,u){if(u&pt.SkipSelf){let d=o,m=s;for(;!(d=d.parent,null!==d||u&pt.Host||(d=Rd(m),null===d||(m=m[15],10&d.type))););if(null===d)return!1;o=d,s=m}const c=gt.lFrame=Nd();return c.currentTNode=o,c.lView=s,!0}function _o(s){const o=Nd(),u=s[1];gt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Nd(){const s=gt.lFrame,o=null===s?null:s.child;return null===o?qo(s):o}function qo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Pd(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Hu=Pd;function Zr(){const s=Pd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Qn(){return gt.lFrame.selectedIndex}function yo(s){gt.lFrame.selectedIndex=s}function On(){const s=gt.lFrame;return _n(s.tView,s.selectedIndex)}function Pa(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:M}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),x&&((s.viewHooks||(s.viewHooks=[])).push(u,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,x)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function vs(s,o,u){kd(s,o,3,u)}function vo(s,o,u,c){(3&s[2])===u&&kd(s,o,u,c)}function jn(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function kd(s,o,u,c){const m=null!=c?c:-1,v=o.length-1;let C=0;for(let I=void 0!==c?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(C=o[I],null!=c&&C>=c)break}else o[I]<0&&(s[18]+=65536),(C<m||-1==m)&&(jg(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function jg(s,o,u,c){const d=u[c]<0,m=u[c+1],C=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class zo{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function wo(s,o,u){const c=sn(s);let d=0;for(;d<u.length;){const m=u[d];if("number"==typeof m){if(0!==m)break;d++;const v=u[d++],C=u[d++],I=u[d++];c?s.setAttribute(o,C,I,v):o.setAttributeNS(v,C,I)}else{const v=m,C=u[++d];is(v)?c&&s.setProperty(o,v,C):c?s.setAttribute(o,v,C):o.setAttribute(v,C),d++}}return d}function Of(s){return 3===s||4===s||6===s}function is(s){return 64===s.charCodeAt(0)}function Ko(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Fd(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Fd(s,o,u,c,d){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const C=s[m++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=m-1;break}}}for(;m<s.length;){const C=s[m];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==d&&(s[m+1]=d));if(c===s[m+1])return void(s[m+2]=d)}m++,null!==c&&m++,null!==d&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,u),null!==c&&s.splice(m++,0,c),null!==d&&s.splice(m++,0,d)}function ss(s){return-1!==s}function Pr(s){return 32767&s}function ht(s,o){let u=function Lt(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Zo=!0;function Yo(s){const o=Zo;return Zo=s,o}let sc=0;function Jn(s,o){const u=$s(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Qo(c.data,s),Qo(o,null),Qo(c.blueprint,null));const d=Cr(s,o),m=s.injectorIndex;if(ss(d)){const v=Pr(d),C=ht(d,o),I=C[1].data;for(let x=0;x<8;x++)o[m+x]=C[v+x]|I[v+x]}return o[m+8]=d,m}function Qo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function $s(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Cr(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const m=d[1],v=m.type;if(c=2===v?m.declTNode:1===v?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Oa(s,o,u){!function Cs(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Me)&&(c=u[Me]),null==c&&(c=u[Me]=sc++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Pi(s,o,u){if(u&pt.Optional)return s;we(o,"NodeInjector")}function _i(s,o,u,c){if(u&pt.Optional&&void 0===c&&(c=null),0==(u&(pt.Self|pt.Host))){const d=s[9],m=bn(void 0);try{return d?d.get(o,c,u&pt.Optional):Os(o,c,u&pt.Optional)}finally{bn(m)}}return Pi(c,o,u)}function qu(s,o,u,c=pt.Default,d){if(null!==s){const m=function Co(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Me)?s[Me]:void 0;return"number"==typeof o?o>=0?255&o:Oi:o}(u);if("function"==typeof m){if(!ju(o,s,c))return c&pt.Host?Pi(d,u,c):_i(o,u,c,d);try{const v=m(c);if(null!=v||c&pt.Optional)return v;we(u)}finally{Hu()}}else if("number"==typeof m){let v=null,C=$s(s,o),I=-1,x=c&pt.Host?o[16][6]:null;for((-1===C||c&pt.SkipSelf)&&(I=-1===C?Cr(s,o):o[C+8],-1!==I&&ac(c,!1)?(v=o[1],C=Pr(I),o=ht(I,o)):C=-1);-1!==C;){const M=o[1];if(Fa(m,C,M.data)){const L=Gg(C,o,u,v,c,x);if(L!==fn)return L}I=o[C+8],-1!==I&&ac(c,o[1].data[C+8]===x)&&Fa(m,C,o)?(v=M,C=Pr(I),o=ht(I,o)):C=-1}}}return _i(o,u,c,d)}const fn={};function Oi(){return new Is(hn(),Ae())}function Gg(s,o,u,c,d,m){const v=o[1],C=v.data[s+8],M=oc(C,v,u,null==c?yd(C)&&Zo:c!=v&&0!=(3&C.type),d&pt.Host&&m===C);return null!==M?ka(o,v,M,C):fn}function oc(s,o,u,c,d){const m=s.providerIndexes,v=o.data,C=1048575&m,I=s.directiveStart,M=m>>20,j=d?C+M:s.directiveEnd;for(let Q=c?C:C+M;Q<j;Q++){const ye=v[Q];if(Q<I&&u===ye||Q>=I&&ye.type===u)return Q}if(d){const Q=v[I];if(Q&&Xi(Q)&&Q.type===u)return I}return null}function ka(s,o,u,c){let d=s[u];const m=o.data;if(function $u(s){return s instanceof zo}(d)){const v=d;v.resolving&&function We(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${s}${u}`)}(Ie(m[u]));const C=Yo(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?bn(v.injectImpl):null;ju(s,c,pt.Default);try{d=s[u]=v.factory(void 0,m,s,c),o.firstCreatePass&&u>=c.directiveStart&&function vy(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:m}=o.type.prototype;if(c){const v=Uo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],o)}finally{null!==I&&bn(I),Yo(C),v.resolving=!1,Hu()}}return d}function Fa(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function ac(s,o){return!(s&pt.Self||s&pt.Host&&o)}class Is{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return qu(this._tNode,this._lView,o,c,u)}}function La(s){return Yn(()=>{const o=s.prototype.constructor,u=o[X]||Jo(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const m=d[X]||Jo(d);if(m&&m!==u)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function Jo(s){return Ge(s)?()=>{const o=Jo(ne(s));return o&&o()}:Er(s)}function Va(s){return function Wu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const m=u[d];if(Of(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(m===o)return u[d+1];d+=2}}}return null}(hn(),s)}const Io="__parameters__";function Xo(s,o,u){return Yn(()=>{const c=function zu(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...m){if(this instanceof d)return c.apply(this,m),this;const v=new d(...m);return C.annotation=v,C;function C(I,x,M){const L=I.hasOwnProperty(Io)?I[Io]:Object.defineProperty(I,Io,{value:[]})[Io];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(v),I}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class pn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Zt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const kf=new pn("AnalyzeForEntryComponents");function Yr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Yr(c,o)):o!==s&&o.push(c)}return o}function Xn(s,o){s.forEach(u=>Array.isArray(u)?Xn(u,o):o(u))}function Gs(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Ws(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Qr(s,o,u){let c=ja(s,o);return c>=0?s[1|c]=u:(c=~c,function Ba(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Bd(s,o){const u=ja(s,o);if(u>=0)return s[1|u]}function ja(s,o){return function os(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const m=c+(d-c>>1),v=s[m<<u];if(o===v)return m<<u;v>o?d=m:c=m+1}return~(d<<u)}(s,o,1)}const as={},Ha="__NG_DI_FLAG__",$a="ngTempTokenPath",D=/\n/gm,V="__source",J=ge({provide:String,useValue:ge});let se;function Ne(s){const o=se;return se=s,o}function et(s,o=pt.Default){if(void 0===se)throw new Pe(203,"");return null===se?Os(s,void 0,o):se.get(s,o&pt.Optional?null:void 0,o)}function tt(s,o=pt.Default){return(function vn(){return di}()||et)(ne(s),o)}const Ht=tt;function wt(s){const o=[];for(let u=0;u<s.length;u++){const c=ne(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Pe(900,"");let d,m=pt.Default;for(let v=0;v<c.length;v++){const C=c[v],I=ur(C);"number"==typeof I?-1===I?d=C.token:m|=I:d=C}o.push(tt(d,m))}else o.push(tt(c))}return o}function Sn(s,o){return s[Ha]=o,s.prototype[Ha]=o,s}function ur(s){return s[Ha]}const Jr=Sn(Xo("Inject",s=>({token:s})),-1),er=Sn(Xo("Optional"),8),ta=Sn(Xo("SkipSelf"),4);class Xu{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ks(s){return s instanceof Xu?s.changingThisBreaksApplicationSecurity:s}const Zd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var kn=(()=>((kn=kn||{})[kn.NONE=0]="NONE",kn[kn.HTML=1]="HTML",kn[kn.STYLE=2]="STYLE",kn[kn.SCRIPT=3]="SCRIPT",kn[kn.URL=4]="URL",kn[kn.RESOURCE_URL=5]="RESOURCE_URL",kn))();function nh(s){const o=function il(){const s=Ae();return s&&s[12]}();return o?o.sanitize(kn.URL,s)||"":function el(s,o){const u=function $f(s){return s instanceof Xu&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?Ks(s):function Cc(s){return(s=String(s)).match(Zd)||s.match(qa)?s:"unsafe:"+s}(fe(s))}const sl="__ngContext__";function nt(s,o){s[sl]=o}function Ui(s){const o=function Vi(s){return s[sl]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Tc(s){return s.ngOriginalError}function am(s,...o){s.error(...o)}class lr{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function ol(s){return s&&s.ngErrorLogger||am}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Tc(o);for(;u&&Tc(u);)u=Tc(u);return u||null}}const Ya=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function y(s){return s instanceof Function?s():s}var N=(()=>((N=N||{})[N.Important=1]="Important",N[N.DashCase=2]="DashCase",N))();function he(s,o){return undefined(s,o)}function ct(s){const o=s[3];return Qi(o)?o[3]:o}function Bi(s){return oh(s[13])}function Ja(s){return oh(s[4])}function oh(s){for(;null!==s&&!Qi(s);)s=s[4];return s}function Xa(s,o,u,c,d){if(null!=c){let m,v=!1;Qi(c)?m=c:Kr(c)&&(v=!0,c=c[0]);const C=Qt(c);0===s&&null!==u?null==d?uw(o,u,C):xc(o,u,C,d||null,!0):1===s&&null!==u?xc(o,u,C,d||null,!0):2===s?function fw(s,o,u){const c=hm(s,o);c&&function lw(s,o,u,c){sn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,C,v):3===s&&o.destroyNode(C),null!=m&&function ip(s,o,u,c,d){const m=u[7];m!==Qt(u)&&Xa(o,s,c,m,d);for(let C=10;C<u.length;C++){const I=u[C];ch(I[1],I,s,o,c,m)}}(o,s,m,u,d)}}function St(s,o,u){if(sn(s))return s.createElement(o,u);{const c=null!==u?function Wl(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function ow(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,$o(d,-1)),u.splice(c,1)}function Js(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&ow(d,c),o>0&&(s[u-1][4]=c[4]);const m=Ws(s,10+o);!function np(s,o){ch(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=m[19];null!==v&&v.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Py(s,o){if(!(256&o[2])){const u=o[11];sn(u)&&u.destroyNode&&ch(s,o,u,3,null,null),function Sc(s){let o=s[13];if(!o)return dm(s[1],s);for(;o;){let u=null;if(Kr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Kr(o)&&dm(o[1],o),o=o[3];null===o&&(o=s),Kr(o)&&dm(o[1],o),u=o&&o[4]}o=u}}(o)}}function dm(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function VM(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof zo)){const m=u[c+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const C=d[m[v]],I=m[v+1];try{I.call(C)}finally{}}else try{m.call(d)}finally{}}}}(s,o),function aw(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const v=u[m+1],C="function"==typeof v?v(o):Qt(o[v]),I=c[d=u[m+2]],x=u[m+3];"boolean"==typeof x?C.removeEventListener(u[m],I,x):x>=0?c[d=x]():c[d=-x].unsubscribe(),m+=2}else{const v=c[d=u[m+1]];u[m].call(v)}if(null!==c){for(let m=d+1;m<c.length;m++)c[m]();o[7]=null}}(s,o),1===o[1].type&&sn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Qi(o[3])){u!==o[3]&&ow(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function kr(s,o,u){return function Ao(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===jt.None||d===jt.Emulated)return null}return or(c,u)}(s,o.parent,u)}function xc(s,o,u,c,d){sn(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function uw(s,o,u){sn(s)?s.appendChild(o,u):o.appendChild(u)}function Oy(s,o,u,c,d){null!==c?xc(s,o,u,c,d):uw(s,o,u)}function hm(s,o){return sn(s)?s.parentNode(o):o.parentNode}let Fy=function ky(s,o,u){return 40&s.type?or(s,u):null};function Vt(s,o,u,c){const d=kr(s,c,o),m=o[11],C=function dw(s,o,u){return Fy(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let I=0;I<u.length;I++)Oy(m,d,u[I],C,!1);else Oy(m,d,u,C,!1)}function ul(s,o){if(null!==o){const u=o.type;if(3&u)return or(o,s);if(4&u)return tu(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return ul(s,c);{const d=s[o.index];return Qi(d)?tu(-1,d):Qt(d)}}if(32&u)return he(o,s)()||Qt(s[o.index]);{const c=hw(s,o);return null!==c?Array.isArray(c)?c[0]:ul(ct(s[16]),c):ul(s,o.next)}}return null}function hw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function tu(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return ul(c,d)}return o[7]}function fm(s,o,u,c,d,m,v){for(;null!=u;){const C=c[u.index],I=u.type;if(v&&0===o&&(C&&nt(Qt(C),c),u.flags|=4),64!=(64&u.flags))if(8&I)fm(s,o,u.child,c,d,m,!1),Xa(o,s,d,C,m);else if(32&I){const x=he(u,c);let M;for(;M=x();)Xa(o,s,d,M,m);Xa(o,s,d,C,m)}else 16&I?rp(s,o,c,u,d,m):Xa(o,s,d,C,m);u=v?u.projectionNext:u.next}}function ch(s,o,u,c,d,m){fm(u,c,s.firstChild,o,d,m,!1)}function rp(s,o,u,c,d,m){const v=u[16],I=v[6].projection[c.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)Xa(o,s,d,I[x],m);else fm(s,o,I,v[3],d,m,!0)}function sp(s,o,u){sn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Ly(s,o,u){sn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function pm(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const m=o.length;if(d+m===c||s.charCodeAt(d+m)<=32)return d}u=d+1}}const Uy="ng-template";function gw(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==pm(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function mw(s){return 4===s.type&&s.value!==Uy}function bD(s,o,u){return o===(4!==s.type||u?s.value:Uy)}function DD(s,o,u){let c=4;const d=s.attrs||[],m=function SD(s){for(let o=0;o<s.length;o++)if(Of(s[o]))return o;return s.length}(d);let v=!1;for(let C=0;C<o.length;C++){const I=o[C];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!bD(s,I,u)||""===I&&1===o.length){if(ls(c))return!1;v=!0}}else{const x=8&c?I:o[++C];if(8&c&&null!==s.attrs){if(!gw(s.attrs,x,u)){if(ls(c))return!1;v=!0}continue}const L=TD(8&c?"class":I,d,mw(s),u);if(-1===L){if(ls(c))return!1;v=!0;continue}if(""!==x){let j;j=L>m?"":d[L+1].toLowerCase();const Q=8&c?j:null;if(Q&&-1!==pm(Q,x,0)||2&c&&x!==j){if(ls(c))return!1;v=!0}}}}else{if(!v&&!ls(c)&&!ls(I))return!1;if(v&&ls(I))continue;v=!1,c=I|1&c}}return ls(c)||v}function ls(s){return 0==(1&s)}function TD(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let m=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)m=!0;else{if(1===v||2===v){let C=o[++d];for(;"string"==typeof C;)C=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=m?1:2}return-1}return function xD(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function _w(s,o,u=!1){for(let c=0;c<o.length;c++)if(DD(s,o[c],u))return!0;return!1}function gm(s,o){return s?":not("+o.trim()+")":o}function By(s){let o=s[0],u=1,c=2,d="",m=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const C=s[++u];d+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!ls(v)&&(o+=gm(m,d),d=""),c=v,m=m||!ls(c);u++}return""!==d&&(o+=gm(m,d)),o}const Tt={};function jy(s){vw(kt(),Ae(),Qn()+s,!1)}function vw(s,o,u,c){if(!c)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&vs(o,m,u)}else{const m=s.preOrderHooks;null!==m&&vo(o,m,0,u)}yo(u)}function op(s,o){return s<<17|o<<2}function So(s){return s>>17&32767}function up(s){return 2|s}function sa(s){return(131068&s)>>2}function lp(s,o){return-131069&s|o<<2}function Hy(s){return 1|s}function Wy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],m=u[c+1];if(-1!==m){const v=s.data[m];Md(d),v.contentQueries(2,o[m],m)}}}function cl(s,o,u,c,d,m,v,C,I,x){const M=o.blueprint.slice();return M[0]=d,M[2]=140|c,rs(M),M[3]=M[15]=s,M[8]=u,M[10]=v||s&&s[10],M[11]=C||s&&s[11],M[12]=I||s&&s[12]||null,M[9]=x||s&&s[9]||null,M[6]=m,M[16]=2==o.type?s[16]:M,M}function fh(s,o,u,c,d){let m=s.data[o];if(null===m)m=function qy(s,o,u,c,d){const m=ku(),v=Ql(),I=s.data[o]=function LD(s,o,u,c,d,m){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=I),null!==m&&(v?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I)),I}(s,o,u,c,d),function ec(){return gt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=c,m.attrs=d;const v=function mo(){const s=gt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return gi(m,!0),m}function ph(s,o,u,c){if(0===u)return-1;const d=o.length;for(let m=0;m<u;m++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function fp(s,o,u){_o(o);try{const c=s.viewQuery;null!==c&&tv(1,c,u);const d=s.template;null!==d&&zy(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Wy(s,o),s.staticViewQueries&&tv(2,s.viewQuery,u);const m=s.components;null!==m&&function bm(s,o){for(let u=0;u<o.length;u++)YD(s,o[u])}(o,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Zr()}}function su(s,o,u,c){const d=o[2];if(256!=(256&d)){_o(o);try{rs(o),function Fu(s){return gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&zy(s,o,u,2,c);const v=3==(3&d);if(v){const x=s.preOrderCheckHooks;null!==x&&vs(o,x,null)}else{const x=s.preOrderHooks;null!==x&&vo(o,x,0,null),jn(o,0)}if(function KD(s){for(let o=Bi(s);null!==o;o=Ja(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],m=d[3];0==(1024&d[2])&&$o(m,1),d[2]|=1024}}}(o),function jw(s){for(let o=Bi(s);null!==o;o=Ja(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];_s(c)&&su(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&Wy(s,o),v){const x=s.contentCheckHooks;null!==x&&vs(o,x)}else{const x=s.contentHooks;null!==x&&vo(o,x,1),jn(o,1)}!function Xs(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)yo(~d);else{const m=d,v=u[++c],C=u[++c];Vu(v,m),C(2,o[m])}}}finally{yo(-1)}}(s,o);const C=s.components;null!==C&&function xw(s,o){for(let u=0;u<o.length;u++)ZD(s,o[u])}(o,C);const I=s.viewQuery;if(null!==I&&tv(2,I,c),v){const x=s.viewCheckHooks;null!==x&&vs(o,x)}else{const x=s.viewHooks;null!==x&&vo(o,x,2),jn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,$o(o[3],-1))}finally{Zr()}}}function Mw(s,o,u,c){const d=o[10],v=go(o);try{!v&&d.begin&&d.begin(),v&&fp(s,o,c),su(s,o,u,c)}finally{!v&&d.end&&d.end()}}function zy(s,o,u,c,d){const m=Qn(),v=2&c;try{yo(-1),v&&o.length>20&&vw(s,o,20,!1),u(c,d)}finally{yo(m)}}function Dm(s,o,u){!Ou()||(function HD(s,o,u,c){const d=u.directiveStart,m=u.directiveEnd;s.firstCreatePass||Jn(u,o),nt(c,o);const v=u.initialInputs;for(let C=d;C<m;C++){const I=s.data[C],x=Xi(I);x&&qD(o,u,I);const M=ka(o,s,C,u);nt(M,o),null!==v&&YM(0,C-d,M,I,0,v),x&&(ar(u.index,o)[8]=M)}}(s,o,u,or(u,o)),128==(128&u.flags)&&function $D(s,o,u){const c=u.directiveStart,d=u.directiveEnd,v=u.index,C=function tc(){return gt.lFrame.currentDirectiveIndex}();try{yo(v);for(let I=c;I<d;I++){const x=s.data[I],M=o[I];Na(I),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&kw(x,M)}}finally{yo(-1),Na(C)}}(s,o,u))}function kc(s,o,u=or){const c=o.localNames;if(null!==c){let d=o.index+1;for(let m=0;m<c.length;m+=2){const v=c[m+1],C=-1===v?u(o,s):s[v];s[d++]=C}}}function Ky(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Tm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Tm(s,o,u,c,d,m,v,C,I,x){const M=20+c,L=M+d,j=function FD(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Tt);return u}(M,L),Q="function"==typeof x?x():x;return j[1]={type:s,blueprint:j,template:u,queries:null,viewQuery:C,declTNode:o,data:j.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function Am(s,o,u,c){const d=nv(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&$w(s).push(c,d.length-1))}function Zy(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function As(s,o,u,c,d,m,v,C){const I=or(o,u);let M,x=o.inputs;!C&&null!=x&&(M=x[c])?(Ww(s,u,M,c,d),yd(o)&&function xm(s,o){const u=ar(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function VD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,sn(m)?m.setProperty(I,c,d):is(c)||(I.setProperty?I.setProperty(c,d):I[c]=d))}function Yy(s,o,u,c){let d=!1;if(Ou()){const m=function GD(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];_w(u,v.selectors,!1)&&(d||(d=[]),Oa(Jn(u,o),s,v.type),Xi(v)?(Fw(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===c?null:{"":-1};if(null!==m){d=!0,Vw(u,s.data.length,m.length);for(let M=0;M<m.length;M++){const L=m[M];L.providersResolver&&L.providersResolver(L)}let C=!1,I=!1,x=ph(s,o,m.length,null);for(let M=0;M<m.length;M++){const L=m[M];u.mergedAttrs=Ko(u.mergedAttrs,L.hostAttrs),Uw(s,u,o,x,L),WD(x,L,v),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const j=L.type.prototype;!C&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),C=!0),!I&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),x++}!function Sm(s,o){const c=o.directiveEnd,d=s.data,m=o.attrs,v=[];let C=null,I=null;for(let x=o.directiveStart;x<c;x++){const M=d[x],L=M.inputs,j=null===m||mw(o)?null:Bw(L,m);v.push(j),C=Zy(L,x,C),I=Zy(M.outputs,x,I)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=C,o.outputs=I}(s,u)}v&&function Lw(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const m=u[o[d+1]];if(null==m)throw new Pe(-301,!1);c.push(o[d],m)}}}(u,c,v)}return u.mergedAttrs=Ko(u.mergedAttrs,u.attrs),d}function Ow(s,o,u,c,d,m){const v=m.hostBindings;if(v){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const I=~o.index;(function jD(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(c,d,v)}}function kw(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Fw(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function WD(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Xi(o)&&(u[""]=s)}}function Vw(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Uw(s,o,u,c,d){s.data[c]=d;const m=d.factory||(d.factory=Er(d.type)),v=new zo(m,Xi(d),null);s.blueprint[c]=v,u[c]=v,Ow(s,o,0,c,ph(s,u,d.hostVars,Tt),d)}function qD(s,o,u){const c=or(o,s),d=Ky(u),m=s[10],v=Pm(s,cl(s,d,null,u.onPush?64:16,c,o,m,m.createRenderer(c,u),null,null));s[o.index]=v}function oa(s,o,u,c,d,m){const v=or(s,o);!function Nm(s,o,u,c,d,m,v){if(null==m)sn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const C=null==v?fe(m):v(m,c||"",d);sn(s)?s.setAttribute(o,d,C,u):u?o.setAttributeNS(u,d,C):o.setAttribute(d,C)}}(o[11],v,m,s.value,u,c,d)}function YM(s,o,u,c,d,m){const v=m[o];if(null!==v){const C=c.setInput;for(let I=0;I<v.length;){const x=v[I++],M=v[I++],L=v[I++];null!==C?c.setInput(u,L,x,M):u[M]=L}}}function Bw(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Qy(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function ZD(s,o){const u=ar(o,s);if(_s(u)){const c=u[1];80&u[2]?su(c,u,c.template,u[8]):u[5]>0&&Jy(u)}}function Jy(s){for(let c=Bi(s);null!==c;c=Ja(c))for(let d=10;d<c.length;d++){const m=c[d];if(1024&m[2]){const v=m[1];su(v,m,v.template,m[8])}else m[5]>0&&Jy(m)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=ar(u[c],s);_s(d)&&d[5]>0&&Jy(d)}}function YD(s,o){const u=ar(o,s),c=u[1];(function Hw(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),fp(c,u,u[8])}function Pm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function gp(s){for(;s;){s[2]|=64;const o=ct(s);if(jl(s)&&!o)return s;s=o}return null}function Om(s){!function Xy(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=Ui(u),d=c[1];Mw(d,c,d.template,u)}}(s[8])}function tv(s,o,u){Md(0),o(s,u)}const XD=(()=>Promise.resolve(null))();function nv(s){return s[7]||(s[7]=[])}function $w(s){return s.cleanup||(s.cleanup=[])}function Ir(s,o){const u=s[9],c=u?u.get(lr,null):null;c&&c.handleError(o)}function Ww(s,o,u,c,d){for(let m=0;m<u.length;){const v=u[m++],C=u[m++],I=o[v],x=s.data[v];null!==x.setInput?x.setInput(I,d,c,C):I[C]=d}}function aa(s,o,u){const c=Bs(o,s);!function uh(s,o,u){sn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function gh(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?m=C:1==m?d=de(d,C):2==m&&(c=de(c,C+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const iv=new pn("INJECTOR",-1);class sv{get(o,u=as){if(u===as){const c=new Error(`NullInjectorError: No provider for ${oe(o)}!`);throw c.name="NullInjectorError",c}return u}}const ov=new pn("Set Injector scope."),_h={},qw={};let mp;function eT(){return void 0===mp&&(mp=new sv),mp}function dl(s,o=null,u=null,c){const d=av(s,o,u,c);return d._resolveInjectorDefTypes(),d}function av(s,o=null,u=null,c){return new tT(s,u,o||eT(),c)}class tT{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&Xn(u,C=>this.processProvider(C,o,u)),Xn([o],C=>this.processInjectorType(C,[],m)),this.records.set(iv,yh(void 0,this));const v=this.records.get(ov);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:oe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=as,c=pt.Default){this.assertNotDestroyed();const d=Ne(this),m=bn(void 0);try{if(!(c&pt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const I=function Zw(s){return"function"==typeof s||"object"==typeof s&&s instanceof pn}(o)&&Ot(o);C=I&&this.injectableDefInScope(I)?yh(uv(o),_h):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&pt.Self?eT():this.parent).get(o,u=c&pt.Optional&&u===as?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[$a]=v[$a]||[]).unshift(oe(o)),d)throw v;return function zs(s,o,u,c){const d=s[$a];throw o[V]&&d.unshift(o[V]),s.message=function us(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=oe(o);if(Array.isArray(o))d=o.map(oe).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];m.push(v+":"+("string"==typeof C?JSON.stringify(C):oe(C)))}d=`{${m.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(D,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[$a]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{bn(m),Ne(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(oe(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(o,u,c){if(!(o=ne(o)))return!1;let d=Sr(o);const m=null==d&&o.ngModule||void 0,v=void 0===m?o:m,C=-1!==c.indexOf(v);if(void 0!==m&&(d=Sr(m)),null==d)return!1;if(null!=d.imports&&!C){let M;c.push(v);try{Xn(d.imports,L=>{this.processInjectorType(L,u,c)&&(void 0===M&&(M=[]),M.push(L))})}finally{}if(void 0!==M)for(let L=0;L<M.length;L++){const{ngModule:j,providers:Q}=M[L];Xn(Q,ye=>this.processProvider(ye,j,Q||U))}}this.injectorDefTypes.add(v);const I=Er(v)||(()=>new v);this.records.set(v,yh(I,_h));const x=d.providers;if(null!=x&&!C){const M=o;Xn(x,L=>this.processProvider(L,M,x))}return void 0!==m&&void 0!==o.providers}processProvider(o,u,c){let d=vh(o=ne(o))?o:ne(o&&o.provide);const m=function nT(s,o,u){return lv(s)?yh(void 0,s.useValue):yh(Kw(s),_h)}(o);if(vh(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=yh(void 0,_h,!0),v.factory=()=>wt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,m)}hydrate(o,u){return u.value===_h&&(u.value=qw,u.value=u.factory()),"object"==typeof u.value&&u.value&&function oT(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ne(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function uv(s){const o=Ot(s),u=null!==o?o.factory:Er(s);if(null!==u)return u;if(s instanceof pn)throw new Pe(204,!1);if(s instanceof Function)return function zw(s){const o=s.length;if(o>0)throw function Ei(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Pe(204,!1);const u=function ci(s){const o=s&&(s[zi]||s[$r]);if(o){const u=function gr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Pe(204,!1)}function Kw(s,o,u){let c;if(vh(s)){const d=ne(s);return Er(d)||uv(d)}if(lv(s))c=()=>ne(s.useValue);else if(function iT(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...wt(s.deps||[]));else if(function rT(s){return!(!s||!s.useExisting)}(s))c=()=>tt(ne(s.useExisting));else{const d=ne(s&&(s.useClass||s.provide));if(!function sT(s){return!!s.deps}(s))return Er(d)||uv(d);c=()=>new d(...wt(s.deps))}return c}function yh(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function lv(s){return null!==s&&"object"==typeof s&&J in s}function vh(s){return"function"==typeof s}let ua=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return dl({name:""},c,u,"");{const m=null!==(d=u.name)&&void 0!==d?d:"";return dl({name:m},u.parent,u.providers,m)}}}return s.THROW_IF_NOT_FOUND=as,s.NULL=new sv,s.\u0275prov=Zt({token:s,providedIn:"any",factory:()=>tt(iv)}),s.__NG_ELEMENT_ID__=-1,s})();function ti(s,o){Pa(Ui(s)[1],hn())}function da(s){let o=function Fr(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(Xi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Pe(903,"");d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=gv(s.inputs),v.declaredInputs=gv(s.declaredInputs),v.outputs=gv(s.outputs);const C=d.hostBindings;C&&lT(s,C);const I=d.viewQuery,x=d.contentQueries;if(I&&rC(s,I),x&&iC(s,x),le(s.inputs,d.inputs),le(s.declaredInputs,d.declaredInputs),le(s.outputs,d.outputs),Xi(d)&&d.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const m=d.features;if(m)for(let v=0;v<m.length;v++){const C=m[v];C&&C.ngInherit&&C(s),C===da&&(u=!1)}}o=Object.getPrototypeOf(o)}!function uT(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Ko(d.hostAttrs,u=Ko(u,d.hostAttrs))}}(c)}function gv(s){return s===yr?{}:s===U?[]:s}function rC(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function iC(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,m)=>{o(c,d,m),u(c,d,m)}:o}function lT(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let yp=null;function dr(){if(!yp){const s=Ft.Symbol;if(s&&s.iterator)yp=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(yp=c)}}}return yp}function br(s){return!!vp(s)&&(Array.isArray(s)||!(s instanceof Map)&&dr()in s)}function vp(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ni(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function fl(s,o,u,c){const d=Ae();return ni(d,Hs(),o)&&(kt(),oa(On(),d,s,o,u,c)),fl}function pl(s,o,u,c){return ni(s,Hs(),u)?o+fe(u)+c:Tt}function fC(s,o,u,c,d,m,v,C){const I=Ae(),x=kt(),M=s+20,L=x.firstCreatePass?function Ep(s,o,u,c,d,m,v,C,I){const x=o.consts,M=fh(o,s,4,v||null,Mi(x,C));Yy(o,u,M,Mi(x,I)),Pa(o,M);const L=M.tViews=Tm(2,M,c,d,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,x,I,o,u,c,d,m,v):x.data[M];gi(L,!1);const j=I[11].createComment("");Vt(x,I,j,L),nt(j,I),Pm(I,I[M]=Qy(j,I,j,L)),Ji(L)&&Dm(x,I,L),null!=v&&kc(I,L,C)}function wp(s){return ns(function xd(){return gt.lFrame.contextLView}(),20+s)}function bp(s,o=pt.Default){const u=Ae();return null===u?tt(s,o):qu(hn(),u,ne(s),o)}function Uc(){throw new Error("invalid")}function xv(s,o,u){const c=Ae();return ni(c,Hs(),o)&&As(kt(),On(),c,s,o,c[11],u,!1),xv}function Mv(s,o,u,c,d){const v=d?"class":"style";Ww(s,u,o.inputs[v],v,c)}function Dp(s,o,u,c){const d=Ae(),m=kt(),v=20+s,C=d[11],I=d[v]=St(C,o,function Bg(){return gt.lFrame.currentNamespace}()),x=m.firstCreatePass?function Bc(s,o,u,c,d,m,v){const C=o.consts,x=fh(o,s,2,d,Mi(C,m));return Yy(o,u,x,Mi(C,v)),null!==x.attrs&&gh(x,x.attrs,!1),null!==x.mergedAttrs&&gh(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,m,d,0,o,u,c):m.data[v];gi(x,!0);const M=x.mergedAttrs;null!==M&&wo(C,I,M);const L=x.classes;null!==L&&Ly(C,I,L);const j=x.styles;return null!==j&&sp(C,I,j),64!=(64&x.flags)&&Vt(m,d,I,x),0===function Ra(){return gt.lFrame.elementDepthCount}()&&nt(I,d),function Zl(){gt.lFrame.elementDepthCount++}(),Ji(x)&&(Dm(m,d,x),function pp(s,o,u){if(Mu(o)){const d=o.directiveEnd;for(let m=o.directiveStart;m<d;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,u[m],m)}}}(m,x,d)),null!==c&&kc(d,x),Dp}function jc(){let s=hn();Ql()?function Jl(){gt.lFrame.isParent=!1}():(s=s.parent,gi(s,!1));const o=s;!function Pu(){gt.lFrame.elementDepthCount--}();const u=kt();return u.firstCreatePass&&(Pa(u,s),Mu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function $g(s){return 0!=(16&s.flags)}(o)&&Mv(u,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function yn(s){return 0!=(32&s.flags)}(o)&&Mv(u,o,Ae(),o.stylesWithoutHost,!1),jc}function qm(s,o,u,c){return Dp(s,o,u,c),jc(),qm}function Tp(){return Ae()}function Zm(s){return!!s&&"function"==typeof s.then}function Ym(s){return!!s&&"function"==typeof s.subscribe}const Rv=Ym;function Qm(s,o,u,c){const d=Ae(),m=kt(),v=hn();return function Jm(s,o,u,c,d,m,v,C){const I=Ji(c),M=s.firstCreatePass&&$w(s),L=o[8],j=nv(o);let Q=!0;if(3&c.type||C){const He=or(c,o),rt=C?C(He):He,Se=j.length,ft=C?Ut=>C(Qt(Ut[c.index])):c.index;if(sn(u)){let Ut=null;if(!C&&I&&(Ut=function Nv(s,o,u,c){const d=s.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const v=d[m];if(v===u&&d[m+1]===c){const C=o[7],I=d[m+2];return C.length>I?C[I]:null}"string"==typeof v&&(m+=2)}return null}(s,o,d,c.index)),null!==Ut)(Ut.__ngLastListenerFn__||Ut).__ngNextListenerFn__=m,Ut.__ngLastListenerFn__=m,Q=!1;else{m=Sh(c,o,L,m,!1);const Jt=u.listen(rt,d,m);j.push(m,Jt),M&&M.push(d,ft,Se,Se+1)}}else m=Sh(c,o,L,m,!0),rt.addEventListener(d,m,v),j.push(m),M&&M.push(d,ft,Se,v)}else m=Sh(c,o,L,m,!1);const ye=c.outputs;let Fe;if(Q&&null!==ye&&(Fe=ye[d])){const He=Fe.length;if(He)for(let rt=0;rt<He;rt+=2){const li=o[Fe[rt]][Fe[rt+1]].subscribe(m),Eu=j.length;j.push(m,li),M&&M.push(d,c.index,Eu,-(Eu+1))}}}(m,d,d[11],v,s,o,!!u,c),Qm}function Xm(s,o,u,c){try{return!1!==u(c)}catch(d){return Ir(s,d),!1}}function Sh(s,o,u,c,d){return function m(v){if(v===Function)return c;const C=2&s.flags?ar(s.index,o):o;0==(32&o[2])&&gp(C);let I=Xm(o,0,c,v),x=m.__ngNextListenerFn__;for(;x;)I=Xm(o,0,x,v)&&I,x=x.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function xh(s=1){return function Nf(s){return(gt.lFrame.contextLView=function nc(s,o){for(;s>0;)o=o[15],s--;return o}(s,gt.lFrame.contextLView))[8]}(s)}function Mh(s,o,u){return Rh(s,"",o,"",u),Mh}function Rh(s,o,u,c,d){const m=Ae(),v=pl(m,o,u,c);return v!==Tt&&As(kt(),On(),m,s,v,m[11],d,!1),Rh}function e_(s,o,u,c,d){const m=s[u+1],v=null===o;let C=c?So(m):sa(m),I=!1;for(;0!==C&&(!1===I||v);){const M=s[C+1];kh(s[C],o)&&(I=!0,s[C+1]=c?Hy(M):up(M)),C=c?So(M):sa(M)}I&&(s[u+1]=c?up(m):Hy(m))}function kh(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ja(s,o)>=0}function Uv(s,o){return function No(s,o,u,c){const d=Ae(),m=kt(),v=function Ri(s){const o=gt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);m.firstUpdatePass&&function Bv(s,o,u,c){const d=s.data;if(null===d[u+1]){const m=d[Qn()],v=function cu(s,o){return o>=s.expandoStartIndex}(s,u);(function i_(s,o){return 0!=(s.flags&(o?16:32))})(m,c)&&null===o&&!v&&(o=!1),o=function MC(s,o,u,c){const d=function Uu(s){const o=gt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Vh(u=jv(null,s,o,u,c),o.attrs,c),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=jv(d,s,o,u,c),null===m){let I=function RC(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==sa(c))return s[So(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=jv(null,s,o,I[1],c),I=Vh(I,o.attrs,c),function Lh(s,o,u,c){s[So(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else m=function bT(s,o,u){let c;const d=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<d;m++)c=Vh(c,s[m].hostAttrs,u);return Vh(c,o.attrs,u)}(s,o,c)}return void 0!==m&&(c?o.residualClasses=m:o.residualStyles=m),u}(d,m,o,c),function Vv(s,o,u,c,d,m){let v=m?o.classBindings:o.styleBindings,C=So(v),I=sa(v);s[c]=u;let M,x=!1;if(Array.isArray(u)){const L=u;M=L[1],(null===M||ja(L,M)>0)&&(x=!0)}else M=u;if(d)if(0!==I){const j=So(s[C+1]);s[c+1]=op(j,C),0!==j&&(s[j+1]=lp(s[j+1],c)),s[C+1]=function Ew(s,o){return 131071&s|o<<17}(s[C+1],c)}else s[c+1]=op(C,0),0!==C&&(s[C+1]=lp(s[C+1],c)),C=c;else s[c+1]=op(I,0),0===C?C=c:s[I+1]=lp(s[I+1],c),I=c;x&&(s[c+1]=up(s[c+1])),e_(s,M,c,!0),e_(s,M,c,!1),function vT(s,o,u,c,d){const m=d?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&ja(m,o)>=0&&(u[c+1]=Hy(u[c+1]))}(o,M,s,c,m),v=op(C,I),m?o.classBindings=v:o.styleBindings=v}(d,m,o,u,v,c)}}(m,s,v,c),o!==Tt&&ni(d,v,o)&&function n_(s,o,u,c,d,m,v,C){if(!(3&o.type))return;const I=s.data,x=I[C+1];Rp(function mm(s){return 1==(1&s)}(x)?r_(I,o,u,d,sa(x),v):void 0)||(Rp(m)||function ap(s){return 2==(2&s)}(x)&&(m=r_(I,null,u,d,C,v)),function pw(s,o,u,c,d){const m=sn(s);if(o)d?m?s.addClass(u,c):u.classList.add(c):m?s.removeClass(u,c):u.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:N.DashCase;if(null==d)m?s.removeStyle(u,c,v):u.style.removeProperty(c);else{const C="string"==typeof d&&d.endsWith("!important");C&&(d=d.slice(0,-10),v|=N.Important),m?s.setStyle(u,c,d,v):u.style.setProperty(c,d,C?"important":"")}}}(c,v,Bs(Qn(),u),d,m))}(m,m.data[Qn()],d,d[11],s,d[v+1]=function PC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=oe(Ks(s)))),s}(o,u),c,v)}(s,o,null,!0),Uv}function jv(s,o,u,c,d){let m=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(m=o[C],c=Vh(c,m.hostAttrs,d),m!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function Vh(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Qr(s,v,!!u||o[++m]))}return void 0===s?null:s}function r_(s,o,u,c,d,m){const v=null===o;let C;for(;d>0;){const I=s[d],x=Array.isArray(I),M=x?I[1]:I,L=null===M;let j=u[d+1];j===Tt&&(j=L?U:void 0);let Q=L?Bd(j,c):M===c?j:void 0;if(x&&!Rp(Q)&&(Q=Bd(I,c)),Rp(Q)&&(C=Q,v))return C;const ye=s[d+1];d=v?So(ye):sa(ye)}if(null!==o){let I=m?o.residualClasses:o.residualStyles;null!=I&&(C=Bd(I,c))}return C}function Rp(s){return void 0!==s}function OC(s,o=""){const u=Ae(),c=kt(),d=s+20,m=c.firstCreatePass?fh(c,d,1,o,null):c.data[d],v=u[d]=function ah(s,o){return sn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Vt(c,u,v,m),gi(m,!1)}function $v(s){return s_("",s,""),$v}function s_(s,o,u){const c=Ae(),d=pl(c,s,o,u);return d!==Tt&&aa(c,Qn(),d),s_}const El=void 0;var GC=["en",[["a","p"],["AM","PM"],El],[["AM","PM"],El,El],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],El,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],El,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",El,"{1} 'at' {0}",El],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function d_(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Hc={};function h_(s){const o=function WC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Jv(o);if(u)return u;const c=o.split("-")[0];if(u=Jv(c),u)return u;if("en"===c)return GC;throw new Error(`Missing locale data for the locale "${s}".`)}function Qv(s){return h_(s)[it.PluralCase]}function Jv(s){return s in Hc||(Hc[s]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[s]),Hc[s]}var it=(()=>((it=it||{})[it.LocaleId=0]="LocaleId",it[it.DayPeriodsFormat=1]="DayPeriodsFormat",it[it.DayPeriodsStandalone=2]="DayPeriodsStandalone",it[it.DaysFormat=3]="DaysFormat",it[it.DaysStandalone=4]="DaysStandalone",it[it.MonthsFormat=5]="MonthsFormat",it[it.MonthsStandalone=6]="MonthsStandalone",it[it.Eras=7]="Eras",it[it.FirstDayOfWeek=8]="FirstDayOfWeek",it[it.WeekendRange=9]="WeekendRange",it[it.DateFormat=10]="DateFormat",it[it.TimeFormat=11]="TimeFormat",it[it.DateTimeFormat=12]="DateTimeFormat",it[it.NumberSymbols=13]="NumberSymbols",it[it.NumberFormats=14]="NumberFormats",it[it.CurrencyCode=15]="CurrencyCode",it[it.CurrencySymbol=16]="CurrencySymbol",it[it.CurrencyName=17]="CurrencyName",it[it.Currencies=18]="Currencies",it[it.Directionality=19]="Directionality",it[it.PluralCase=20]="PluralCase",it[it.ExtraData=21]="ExtraData",it))();const f_="en-US";let zC=f_;function mn(s,o,u,c,d){if(s=ne(s),Array.isArray(s))for(let m=0;m<s.length;m++)mn(s[m],o,u,c,d);else{const m=kt(),v=Ae();let C=vh(s)?s:ne(s.provide),I=Kw(s);const x=hn(),M=1048575&x.providerIndexes,L=x.directiveStart,j=x.providerIndexes>>20;if(vh(s)||!s.multi){const Q=new zo(I,d,bp),ye=gu(C,o,d?M:M+j,L);-1===ye?(Oa(Jn(x,v),m,C),Qh(m,s,o.length),o.push(C),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),u.push(Q),v.push(Q)):(u[ye]=Q,v[ye]=Q)}else{const Q=gu(C,o,M+j,L),ye=gu(C,o,M,M+j),Fe=Q>=0&&u[Q],He=ye>=0&&u[ye];if(d&&!He||!d&&!Fe){Oa(Jn(x,v),m,C);const rt=function YT(s,o,u,c,d){const m=new zo(s,u,bp);return m.multi=[],m.index=o,m.componentProviders=0,v_(m,d,c&&!u),m}(d?jp:E_,u.length,d,c,I);!d&&He&&(u[ye].providerFactory=rt),Qh(m,s,o.length,0),o.push(C),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),u.push(rt),v.push(rt)}else Qh(m,s,Q>-1?Q:ye,v_(u[d?ye:Q],I,!d&&c));!d&&c&&He&&u[ye].componentProviders++}}}function Qh(s,o,u,c){const d=vh(o),m=function cv(s){return!!s.useClass}(o);if(d||m){const I=(m?ne(o.useClass):o).prototype.ngOnDestroy;if(I){const x=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const M=x.indexOf(u);-1===M?x.push(u,[c,I]):x[M+1].push(c,I)}else x.push(u,I)}}}function v_(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function gu(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function E_(s,o,u,c){return w_(this.multi,[])}function jp(s,o,u,c){const d=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=ka(u,u[1],this.providerFactory.index,c);m=C.slice(0,v),w_(d,m);for(let I=v;I<C.length;I++)m.push(C[I])}else m=[],w_(d,m);return m}function w_(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function to(s,o=[]){return u=>{u.providersResolver=(c,d)=>function rI(s,o,u){const c=kt();if(c.firstCreatePass){const d=Xi(s);mn(u,c.data,c.blueprint,d,!0),mn(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class zn{}class sI{resolveComponentFactory(o){throw function C_(s){const o=Error(`No component factory found for ${oe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let mu=(()=>{class s{}return s.NULL=new sI,s})();function QT(){return Yc(hn(),Ae())}function Yc(s,o){return new Po(or(s,o))}let Po=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=QT,s})();function JT(s){return s instanceof Po?s.nativeElement:s}class Hp{}let b_=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function aI(){const s=Ae(),u=ar(hn().index,s);return function oI(s){return s[11]}(Kr(u)?u:s)}(),s})(),si=(()=>{class s{}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:()=>null}),s})();class uI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const lI=new uI("13.3.8"),d0={};function $p(s,o,u,c,d=!1){for(;null!==u;){const m=o[u.index];if(null!==m&&c.push(Qt(m)),Qi(m))for(let C=10;C<m.length;C++){const I=m[C],x=I[1].firstChild;null!==x&&$p(I[1],I,x,c)}const v=u.type;if(8&v)$p(s,o,u.child,c);else if(32&v){const C=he(u,o);let I;for(;I=C();)c.push(I)}else if(16&v){const C=hw(o,u);if(Array.isArray(C))c.push(...C);else{const I=ct(o[16]);$p(I[1],I,C,c,!0)}}u=d?u.projectionNext:u.next}return c}class Gp{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return $p(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Qi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Js(o,c),Ws(u,c))}this._attachedToViewContainer=!1}Py(this._lView[1],this._lView)}onDestroy(o){Am(this._lView[1],this._lView,null,o)}markForCheck(){gp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function ev(s,o,u){const c=o[10];c.begin&&c.begin();try{su(s,o,s.template,u)}catch(d){throw Ir(o,d),d}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cm(s,o){ch(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=o}}class XT extends Gp{constructor(o){super(o),this._view=o}detectChanges(){Om(this._view)}checkNoChanges(){}get context(){return null}}class cI extends mu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Vn(o);return new h0(u,this.ngModule)}}function dI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class h0 extends zn{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function nu(s){return s.map(By).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return dI(this.componentDef.inputs)}get outputs(){return dI(this.componentDef.outputs)}create(o,u,c,d){const m=(d=d||this.ngModule)?function Jh(s,o){return{get:(u,c,d)=>{const m=s.get(u,d0,d);return m!==d0||c===d0?m:o.get(u,c,d)}}}(o,d.injector):o,v=m.get(Hp,Sa),C=m.get(si,null),I=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",M=c?function Nw(s,o,u){if(sn(s))return s.selectRootElement(o,u===jt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):St(v.createRenderer(null,this.componentDef),x,function Il(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),L=this.componentDef.onPush?576:528,j=function nC(s,o){return{components:[],scheduler:s||Ya,clean:XD,playerHandler:o||null,flags:0}}(),Q=Tm(0,null,null,1,0,null,null,null,null,null),ye=cl(null,Q,j,L,null,null,v,I,C,m);let Fe,He;_o(ye);try{const rt=function eC(s,o,u,c,d,m){const v=u[1];u[20]=s;const I=fh(v,20,2,"#host",null),x=I.mergedAttrs=o.hostAttrs;null!==x&&(gh(I,x,!0),null!==s&&(wo(d,s,x),null!==I.classes&&Ly(d,s,I.classes),null!==I.styles&&sp(d,s,I.styles)));const M=c.createRenderer(s,o),L=cl(u,Ky(o),null,o.onPush?64:16,u[20],I,c,M,m||null,null);return v.firstCreatePass&&(Oa(Jn(I,u),v,o.type),Fw(v,I),Vw(I,u.length,1)),Pm(u,L),u[20]=L}(M,this.componentDef,ye,v,I);if(M)if(c)wo(I,M,["ng-version",lI.full]);else{const{attrs:Se,classes:ft}=function dh(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===d?""!==m&&o.push(m,s[++c]):8===d&&u.push(m);else{if(!ls(d))break;d=m}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Se&&wo(I,M,Se),ft&&ft.length>0&&Ly(I,M,ft.join(" "))}if(He=_n(Q,20),void 0!==u){const Se=He.projection=[];for(let ft=0;ft<this.ngContentSelectors.length;ft++){const Ut=u[ft];Se.push(null!=Ut?Array.from(Ut):null)}}Fe=function tC(s,o,u,c,d){const m=u[1],v=function BD(s,o,u){const c=hn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Uw(s,c,o,ph(s,o,1,null),u));const d=ka(o,s,c.directiveStart,c);nt(d,o);const m=or(c,o);return m&&nt(m,o),d}(m,u,o);if(c.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=hn();o.contentQueries(1,v,I.directiveStart)}const C=hn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(yo(C.index),Ow(u[1],C,0,C.directiveStart,C.directiveEnd,o),kw(o,v)),v}(rt,this.componentDef,ye,j,[ti]),fp(Q,ye,null)}finally{Zr()}return new _u(this.componentType,Fe,Yc(He,ye),ye,He)}}class _u extends class iI{}{constructor(o,u,c,d,m){super(),this.location=c,this._rootLView=d,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new XT(d),this.componentType=o}get injector(){return new Is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Oo{}class pI{}const bl=new Map;class p0 extends Oo{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new cI(this);const c=Un(o);this._bootstrapComponents=y(c.bootstrap),this._r3Injector=av(o,u,[{provide:Oo,useValue:this},{provide:mu,useValue:this.componentFactoryResolver}],oe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=ua.THROW_IF_NOT_FOUND,c=pt.Default){return o===ua||o===Oo||o===iv?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Wp extends pI{constructor(o){super(),this.moduleType=o,null!==Un(o)&&function Xh(s){const o=new Set;!function u(c){const d=Un(c,!0),m=d.id;null!==m&&(function D_(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${oe(o)} vs ${oe(o.name)}`)}(m,bl.get(m),c),bl.set(m,c));const v=y(d.imports);for(const C of v)o.has(C)||(o.add(C),u(C))}(s)}(o)}create(o){return new p0(this.moduleType,o)}}function Qc(s,o,u,c,d,m){const v=o+u;return ni(s,v,d)?function Mo(s,o,u){return s[o]=u}(s,v+1,m?c.call(m,d):c(d)):function ef(s,o){const u=s[o];return u===Tt?void 0:u}(s,v+1)}function Jc(s,o){const u=kt();let c;const d=s+20;u.firstCreatePass?(c=function wI(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[d]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(d,c.onDestroy)):c=u.data[d];const m=c.factory||(c.factory=Er(c.type)),v=bn(bp);try{const C=Yo(!1),I=m();return Yo(C),function cT(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Ae(),d,I),I}finally{bn(v)}}function y0(s,o,u){const c=s+20,d=Ae(),m=ns(d,c);return function Al(s,o){return s[1].data[o].pure}(d,c)?Qc(d,function wr(){const s=gt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,m.transform,u,m):m.transform(u)}function v0(s){return o=>{setTimeout(s,void 0,o)}}const no=class S_ extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,m,v;let C=o,I=u||(()=>null),x=c;if(o&&"object"==typeof o){const L=o;C=null===(d=L.next)||void 0===d?void 0:d.bind(L),I=null===(m=L.error)||void 0===m?void 0:m.bind(L),x=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(I=v0(I),C&&(C=v0(C)),x&&(x=v0(x)));const M=super.subscribe({next:C,error:I,complete:x});return o instanceof ee.w0&&o.add(M),M}};function oA(){return this._results[dr()]()}class x_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=dr(),c=x_.prototype;c[u]||(c[u]=oA)}get changes(){return this._changes||(this._changes=new no)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Yr(o);(this._changesDetected=!function Wg(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],m=o[c];if(u&&(d=u(d),m=u(m)),m!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let tf=(()=>{class s{}return s.__NG_ELEMENT_ID__=CI,s})();const zp=tf,Xc=class extends zp{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=cl(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(c[19]=m.createEmbeddedView(u)),fp(u,c,o),new Gp(c)}};function CI(){return Kp(hn(),Ae())}function Kp(s,o){return 4&s.type?new Xc(o,s,Yc(s,o)):null}let Zp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Yp,s})();function Yp(){return w0(hn(),Ae())}const E0=Zp,II=class extends E0{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Yc(this._hostTNode,this._hostLView)}get injector(){return new Is(this._hostTNode,this._hostLView)}get parentInjector(){const o=Cr(this._hostTNode,this._hostLView);if(ss(o)){const u=ht(o,this._hostLView),c=Pr(o);return new Is(u[1].data[c+8],u)}return new Is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=nr(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,m){const v=o&&!function Hn(s){return"function"==typeof s}(o);let C;if(v)C=u;else{const L=u||{};C=L.index,c=L.injector,d=L.projectableNodes,m=L.ngModuleRef}const I=v?o:new h0(Vn(o)),x=c||this.parentInjector;if(!m&&null==I.ngModule){const j=(v?x:this.parentInjector).get(Oo,null);j&&(m=j)}const M=I.create(x,d,void 0,m);return this.insert(M.hostView,C),M}insert(o,u){const c=o._lView,d=c[1];if(function Ma(s){return Qi(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const L=c[3],j=new II(L,L[6],L[3]);j.detach(j.indexOf(o))}}const m=this._adjustIndex(u),v=this._lContainer;!function Ny(s,o,u,c){const d=10+c,m=u.length;c>0&&(u[d-1][4]=o),c<m-10?(o[4]=u[d],Gs(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function CD(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=128}(d,c,v,m);const C=tu(m,v),I=c[11],x=hm(I,v[7]);return null!==x&&function eu(s,o,u,c,d,m){c[0]=d,c[6]=o,ch(s,c,u,1,d,m)}(d,v[6],I,c,x,C),o.attachToViewContainerRef(),Gs(qt(v),m,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=nr(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Js(this._lContainer,u);c&&(Ws(qt(this._lContainer),u),Py(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Js(this._lContainer,u);return c&&null!=Ws(qt(this._lContainer),u)?new Gp(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function nr(s){return s[8]}function qt(s){return s[8]||(s[8]=[])}function w0(s,o){let u;const c=o[s.index];if(Qi(c))u=c;else{let d;if(8&s.type)d=Qt(c);else{const m=o[11];d=m.createComment("");const v=or(s,o);xc(m,hm(m,v),d,function cw(s,o){return sn(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=u=Qy(c,o,d,s),Pm(o,u)}return new II(u,s,o)}class cs{constructor(o){this.queryList=o,this.matches=null}clone(){return new cs(this.queryList)}setDirty(){this.queryList.setDirty()}}class C0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let m=0;m<c;m++){const v=u.getByIndex(m);d.push(this.queries[v.indexInDeclarationView].clone())}return new C0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==TI(o,u).matches&&this.queries[u].setDirty()}}class M_{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class ed{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,m=this.getByIndex(c).embeddedTView(o,d);m&&(m.indexInDeclarationView=c,null!==u?u.push(m):u=[m])}return null!==u?new ed(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class I0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new I0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const m=c[d];this.matchTNodeWithReadOption(o,u,aA(u,m)),this.matchTNodeWithReadOption(o,u,oc(u,o,m,!1,!1))}else c===tf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,oc(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Po||d===Zp||d===tf&&4&u.type)this.addMatch(u.index,-2);else{const m=oc(u,o,d,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function aA(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function uA(s,o,u,c){return-1===u?function on(s,o){return 11&s.type?Yc(s,o):4&s.type?Kp(s,o):null}(o,s):-2===u?function R_(s,o,u){return u===Po?Yc(o,s):u===tf?Kp(o,s):u===Zp?w0(o,s):void 0}(s,o,c):ka(s,s[1],u,o)}function nf(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const m=s.data,v=u.matches,C=[];for(let I=0;I<v.length;I+=2){const x=v[I];C.push(x<0?null:uA(o,m[x],v[I+1],u.metadata.read))}d.matches=C}return d.matches}function td(s,o,u,c){const d=s.queries.getByIndex(u),m=d.matches;if(null!==m){const v=nf(s,o,d,u);for(let C=0;C<m.length;C+=2){const I=m[C];if(I>0)c.push(v[C/2]);else{const x=m[C+1],M=o[-I];for(let L=10;L<M.length;L++){const j=M[L];j[17]===j[3]&&td(j[1],j,x,c)}if(null!==M[9]){const L=M[9];for(let j=0;j<L.length;j++){const Q=L[j];td(Q[1],Q,x,c)}}}}}return c}function Qp(s){const o=Ae(),u=kt(),c=Bu();Md(c+1);const d=TI(u,c);if(s.dirty&&go(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const m=d.crossesNgTemplate?td(u,o,c,[]):nf(u,o,d,c);s.reset(m,JT),s.notifyOnChanges()}return!0}return!1}function b0(s,o,u,c){const d=kt();if(d.firstCreatePass){const m=hn();(function A0(s,o,u){null===s.queries&&(s.queries=new ed),s.queries.track(new I0(o,u))})(d,new M_(o,u,c),m.index),function cA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function T0(s,o,u){const c=new x_(4==(4&u));Am(s,o,c,c.destroy),null===o[19]&&(o[19]=new C0),o[19].queries.push(new cs(c))}(d,Ae(),u)}function D0(){return function lA(s,o){return s[19].queries[o].queryList}(Ae(),Bu())}function TI(s,o){return s.queries.getByIndex(o)}function ng(...s){}const F0=new pn("Application Initializer");let L0=(()=>{class s{constructor(u){this.appInits=u,this.resolve=ng,this.reject=ng,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(Zm(m))u.push(m);else if(Rv(m)){const v=new Promise((C,I)=>{m.subscribe({complete:C,error:I})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(tt(F0,8))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const V0=new pn("AppId",{providedIn:"root",factory:function U0(){return`${of()}${of()}${of()}`}});function of(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const io=new pn("Platform Initializer"),mA=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),af=new pn("appBootstrapListener");let _A=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const k_=new pn("LocaleId",{providedIn:"root",factory:()=>Ht(k_,pt.Optional|pt.SkipSelf)||function id(){return"undefined"!=typeof $localize&&$localize.locale||f_}()}),B0=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class j0{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let H0=(()=>{class s{compileModuleSync(u){return new Wp(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),m=y(Un(u).declarations).reduce((v,C)=>{const I=Vn(C);return I&&v.push(new h0(I)),v},[]);return new j0(c,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const EA=(()=>Promise.resolve(0))();function F_(s){"undefined"==typeof Zone?EA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ai{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new no(!1),this.onMicrotaskEmpty=new no(!1),this.onStable=new no(!1),this.onError=new no(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function L_(){let s=Ft.requestAnimationFrame,o=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function WI(s){const o=()=>{!function rg(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ft,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ig(s),s.isCheckStableRunning=!0,Ml(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ig(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,m,v,C)=>{try{return V_(s),u.invokeTask(d,m,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),$0(s)}},onInvoke:(u,c,d,m,v,C,I)=>{try{return V_(s),u.invoke(d,m,v,C,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),$0(s)}},onHasTask:(u,c,d,m)=>{u.hasTask(d,m),c===d&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,ig(s),Ml(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,c,d,m)=>(u.handleError(d,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ai.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ai.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+d,o,sd,ng,ng);try{return m.runTask(v,u,c)}finally{m.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const sd={};function Ml(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ig(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function V_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function $0(s){s._nesting--,Ml(s)}class wA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new no,this.onMicrotaskEmpty=new no,this.onStable=new no,this.onError=new no}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let G0=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ai.assertNotInAngularZone(),F_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())F_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(tt(ai))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})(),qI=(()=>{class s{constructor(){this._applications=new Map,yu.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return yu.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class W0{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function sg(s){yu=s}let yu=new W0,od=null;const q0=new pn("AllowMultipleToken"),zI=new pn("PlatformOnDestroy");class ad{constructor(o,u){this.name=o,this.token=u}}function z0(s,o,u=[]){const c=`Platform: ${o}`,d=new pn(c);return(m=[])=>{let v=lf();if(!v||v.injector.get(q0,!1)){const C=[...u,...m,{provide:d,useValue:!0}];s?s(C):function ud(s){if(od&&!od.get(q0,!1))throw new Pe(400,"");od=s;const o=s.get(ZI),u=s.get(io,null);u&&u.forEach(c=>c())}(function bA(s=[],o){return ua.create({name:o,providers:[{provide:ov,useValue:"platform"},{provide:zI,useValue:()=>od=null},...s]})}(C,c))}return function IA(s){const o=lf();if(!o)throw new Pe(401,"");return o}()}}function lf(){var s;return null!==(s=null==od?void 0:od.get(ZI))&&void 0!==s?s:null}let ZI=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const C=function YI(s,o){let u;return u="noop"===s?new wA:("zone.js"===s?void 0:s)||new ai({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:ai,useValue:C}];return C.run(()=>{const x=ua.create({providers:I,parent:this.injector,name:u.moduleType.name}),M=u.create(x),L=M.injector.get(lr,null);if(!L)throw new Pe(402,"");return C.runOutsideAngular(()=>{const j=C.onError.subscribe({next:Q=>{L.handleError(Q)}});M.onDestroy(()=>{U_(this._modules,M),j.unsubscribe()})}),function ag(s,o,u){try{const c=u();return Zm(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,C,()=>{const j=M.injector.get(L0);return j.runInitializers(),j.donePromise.then(()=>(function g_(s){Pt(s,"Expected localeId to be defined"),"string"==typeof s&&(zC=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(k_,f_)||f_),this._moduleDoBootstrap(M),M))})})}bootstrapModule(u,c=[]){const d=ug({},c);return function CA(s,o,u){const c=new Wp(u);return Promise.resolve(c)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(u){const c=u.injector.get(cf);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Pe(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(zI,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(tt(ua))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function ug(s,o){return Array.isArray(o)?o.reduce(ug,s):Object.assign(Object.assign({},s),o)}let cf=(()=>{class s{constructor(u,c,d,m){this._zone=u,this._injector=c,this._exceptionHandler=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new F.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),C=new F.y(I=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{ai.assertNotInAngularZone(),F_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{ai.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{x.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ue.T)(v,C.pipe((0,re.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Pe(405,"");let d;d=u instanceof zn?u:this._injector.get(mu).resolveComponentFactory(u),this.componentTypes.push(d.componentType);const m=function og(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Oo),C=d.create(ua.NULL,[],c||d.selector,m),I=C.location.nativeElement,x=C.injector.get(G0,null),M=x&&C.injector.get(qI);return x&&M&&M.registerApplication(I,x),C.onDestroy(()=>{this.detachView(C.hostView),U_(this.components,C),M&&M.unregisterApplication(I)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;U_(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(af,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(tt(ai),tt(ua),tt(lr),tt(L0))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function U_(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let lg=!0,B_=!1;function JI(){return B_=!0,lg}function Rl(){if(B_)throw new Error("Cannot enable prod mode after platform setup.");lg=!1}let TA=(()=>{class s{}return s.__NG_ELEMENT_ID__=df,s})();function df(s){return function XI(s,o,u){if(yd(s)&&!u){const c=ar(s.index,o);return new Gp(c,c)}return 47&s.type?new Gp(o[16],o):null}(hn(),Ae(),16==(16&s))}class hg{constructor(){}supports(o){return br(o)}create(o){return new RA(o)}}const Z0=(s,o)=>o;class RA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Z0}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,m=null;for(;u||c;){const v=!c||u&&u.currentIndex<Q0(c,d,m)?u:c,C=Q0(v,d,m),I=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{m||(m=[]);const x=C-d,M=I-d;if(x!=M){for(let j=0;j<x;j++){const Q=j<m.length?m[j]:m[j]=0,ye=Q+j;M<=ye&&ye<x&&(m[j]=Q+1)}m[v.previousIndex]=M-x}}C!==I&&o(v,C,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!br(o))throw new Pe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,m,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)m=o[C],v=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,m,v,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,v,C),c=!0),u=u._next}else d=0,function aC(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[dr()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,C=>{v=this._trackByFn(d,C),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,C,v,d)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,m,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,m,d)):o=this._addAfter(new Y0(u,c),m,d),o}_verifyReinsertion(o,u,c,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?o=this._reinsertAfter(m,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,m=o._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new sb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Y0{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ib{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class sb{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new ib,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Q0(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class J0{constructor(){}supports(o){return o instanceof Map||vp(o)}create(){return new X0}}class X0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||vp(o)))throw new Pe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const m=d._prev,v=d._next;return m&&(m._next=v),v&&(v._prev=m),d._next=null,d._prev=null,d}const c=new NA(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class NA{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function eE(){return new tE([new hg])}let tE=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||eE()),deps:[[s,new ta,new er]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Pe(901,"")}}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:eE}),s})();function ob(){return new Pl([new J0])}let Pl=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ob()),deps:[[s,new ta,new er]]}}find(u){const c=this.factories.find(m=>m.supports(u));if(c)return c;throw new Pe(901,"")}}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:ob}),s})();const ab=z0(null,"core",[]);let ub=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(tt(cf))},s.\u0275mod=xr({type:s}),s.\u0275inj=Wt({}),s})()},3942:(Ye,ve,k)=>{k.d(ve,{Z:()=>Pe});var g=k(2090),ee=k(4859),F=k(9681),ue=k(1877);class re{constructor(fe,Ie){this._delegate=fe,this.firebase=Ie,(0,F._addComponent)(fe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(fe,Ie=F._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(fe);return!Ze.isInitialized()&&"EXPLICIT"===(null===(We=Ze.getComponent())||void 0===We?void 0:We.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:Ie})}_removeServiceInstance(fe,Ie=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(Ie)}_addComponent(fe){(0,F._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,F._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function de(){const Ve=function oe(Ve){const fe={},Ie={__esModule:!0,initializeApp:function Te(Be,$={}){const Ee=F.initializeApp(Be,$);if((0,g.r3)(fe,Ee.name))return fe[Ee.name];const Z=new Ve(Ee,Ie);return fe[Ee.name]=Z,Z},app:Ze,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Be){const $=Be.name,Ee=$.replace("-compat","");if(F._registerComponent(Be)&&"PUBLIC"===Be.type){const Z=(ie=Ze())=>{if("function"!=typeof ie[Ee])throw le.create("invalid-app-argument",{appName:$});return ie[Ee]()};void 0!==Be.serviceProps&&(0,g.ZB)(Z,Be.serviceProps),Ie[Ee]=Z,Ve.prototype[Ee]=function(...ie){return this._getService.bind(this,$).apply(this,Be.multipleInstances?ie:[])}}return"PUBLIC"===Be.type?Ie[Ee]:null},removeApp:function We(Be){delete fe[Be]},useAsService:function Ue(Be,$){return"serverAuth"===$?null:$},modularAPIs:F}};function Ze(Be){if(!(0,g.r3)(fe,Be=Be||F._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Be});return fe[Be]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function we(){return Object.keys(fe).map(Be=>fe[Be])}}),Ze.App=Ve,Ie}(re);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function fe(Ie){(0,g.ZB)(Ve,Ie)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ve}(),H=new ue.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=G;!function xe(Ve){(0,F.registerVersion)("@firebase/app-compat","0.1.25",Ve)}()},9681:(Ye,ve,k)=>{k.r(ve),k.d(ve,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>zi,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>tn,_addOrOverwriteComponent:()=>Zt,_apps:()=>en,_clearComponents:()=>qi,_components:()=>In,_getProvider:()=>Wt,_registerComponent:()=>Ar,_removeServiceInstance:()=>Ot,deleteApp:()=>pt,getApp:()=>$r,getApps:()=>Ki,initializeApp:()=>Ps,onLog:()=>bn,registerVersion:()=>vn,setLogLevel:()=>Os});var g=k(5861),ee=k(4859),F=k(1877),ue=k(2090),re=k(8766);class ge{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function le(W){const X=W.getComponent();return"VERSION"===(null==X?void 0:X.type)}(Me)){const Qe=Me.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(Me=>Me).join(" ")}}const oe="@firebase/app",G=new F.Yd("@firebase/app"),Pt="[DEFAULT]",Ke={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,In=new Map;function tn(W,X){try{W.container.addComponent(X)}catch(Me){G.debug(`Component ${X.name} failed to register with FirebaseApp ${W.name}`,Me)}}function Zt(W,X){W.container.addOrOverwriteComponent(X)}function Ar(W){const X=W.name;if(In.has(X))return G.debug(`There were multiple attempts to register component ${X}.`),!1;In.set(X,W);for(const Me of en.values())tn(Me,W);return!0}function Wt(W,X){const Me=W.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),W.container.getProvider(X)}function Ot(W,X,Me=Pt){Wt(W,X).clearInstance(Me)}function qi(){In.clear()}const gr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Sr{constructor(X,Me,Qe){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}const zi="9.8.1";function Ps(W,X={}){"object"!=typeof X&&(X={name:X});const Me=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},X),Qe=Me.name;if("string"!=typeof Qe||!Qe)throw gr.create("bad-app-name",{appName:String(Qe)});const dt=en.get(Qe);if(dt){if((0,ue.vZ)(W,dt.options)&&(0,ue.vZ)(Me,dt.config))return dt;throw gr.create("duplicate-app",{appName:Qe})}const Et=new ee.H0(Qe);for(const vt of In.values())Et.addComponent(vt);const ln=new Sr(W,Me,Et);return en.set(Qe,ln),ln}function $r(W=Pt){const X=en.get(W);if(!X)throw gr.create("no-app",{appName:W});return X}function Ki(){return Array.from(en.values())}function pt(W){return di.apply(this,arguments)}function di(){return(di=(0,g.Z)(function*(W){const X=W.name;en.has(X)&&(en.delete(X),yield Promise.all(W.container.getProviders().map(Me=>Me.delete())),W.isDeleted=!0)})).apply(this,arguments)}function vn(W,X,Me){var Qe;let dt=null!==(Qe=Ke[W])&&void 0!==Qe?Qe:W;Me&&(dt+=`-${Me}`);const Et=dt.match(/\s|\//),ln=X.match(/\s|\//);if(Et||ln){const vt=[`Unable to register library "${dt}" with version "${X}":`];return Et&&vt.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),Et&&ln&&vt.push("and"),ln&&vt.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void G.warn(vt.join(" "))}Ar(new ee.wA(`${dt}-version`,()=>({library:dt,version:X}),"VERSION"))}function bn(W,X){if(null!==W&&"function"!=typeof W)throw gr.create("invalid-log-argument");(0,F.Am)(W,X)}function Os(W){(0,F.Ub)(W)}const Dn="firebase-heartbeat-store";let hi=null;function ao(){return hi||(hi=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(W,X)=>{0===X&&W.createObjectStore(Dn)}}).catch(W=>{throw gr.create("storage-open",{originalErrorMessage:W.message})})),hi}function ot(){return(ot=(0,g.Z)(function*(W){try{return(yield ao()).transaction(Dn).objectStore(Dn).get(fi(W))}catch(X){throw gr.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function _t(W,X){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(W,X){try{const Qe=(yield ao()).transaction(Dn,"readwrite");return yield Qe.objectStore(Dn).put(X,fi(W)),Qe.done}catch(Me){throw gr.create("storage-set",{originalErrorMessage:Me.message})}})).apply(this,arguments)}function fi(W){return`${W.name}!${W.options.appId}`}class _r{constructor(X){this.container=X,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new q(Me),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var X=this;return(0,g.Z)(function*(){const Qe=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=yr();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==dt&&!X._heartbeatsCache.heartbeats.some(Et=>Et.date===dt))return X._heartbeatsCache.heartbeats.push({date:dt,agent:Qe}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Et=>{const ln=new Date(Et.date).valueOf();return Date.now()-ln<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,g.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Me=yr(),{heartbeatsToSend:Qe,unsentEntries:dt}=function U(W,X=1024){const Me=[];let Qe=W.slice();for(const dt of W){const Et=Me.find(ln=>ln.agent===dt.agent);if(Et){if(Et.dates.push(dt.date),z(Me)>X){Et.dates.pop();break}}else if(Me.push({agent:dt.agent,dates:[dt.date]}),z(Me)>X){Me.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:Me,unsentEntries:Qe}}(X._heartbeatsCache.heartbeats),Et=(0,ue.L)(JSON.stringify({version:2,heartbeats:Qe}));return X._heartbeatsCache.lastSentHeartbeatDate=Me,dt.length>0?(X._heartbeatsCache.heartbeats=dt,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Et})()}}function yr(){return(new Date).toISOString().substring(0,10)}class q{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,g.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function jt(W){return ot.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Me=this;return(0,g.Z)(function*(){var Qe;if(yield Me._canUseIndexedDBPromise){const Et=yield Me.read();return _t(Me.app,{lastSentHeartbeatDate:null!==(Qe=X.lastSentHeartbeatDate)&&void 0!==Qe?Qe:Et.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Me=this;return(0,g.Z)(function*(){var Qe;if(yield Me._canUseIndexedDBPromise){const Et=yield Me.read();return _t(Me.app,{lastSentHeartbeatDate:null!==(Qe=X.lastSentHeartbeatDate)&&void 0!==Qe?Qe:Et.lastSentHeartbeatDate,heartbeats:[...Et.heartbeats,...X.heartbeats]})}})()}}function z(W){return(0,ue.L)(JSON.stringify({version:2,heartbeats:W})).length}!function be(W){Ar(new ee.wA("platform-logger",X=>new ge(X),"PRIVATE")),Ar(new ee.wA("heartbeat",X=>new _r(X),"PRIVATE")),vn(oe,"0.7.24",W),vn(oe,"0.7.24","esm2017"),vn("fire-js","")}("")},4859:(Ye,ve,k)=>{k.d(ve,{H0:()=>oe,wA:()=>F,zt:()=>re});var g=k(5861),ee=k(2090);class F{constructor(G,H,ne){this.name=G,this.instanceFactory=H,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ue="[DEFAULT]";class re{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const ne=new ee.BH;if(this.instancesDeferred.set(H,ne),this.isInitialized(H)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:H});Ge&&ne.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const ne=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),Ge=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(xe){if(Ge)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function le(de){return"EAGER"===de.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(H){}for(const[H,ne]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(H);try{const xe=this.getOrInitializeService({instanceIdentifier:Ge});ne.resolve(xe)}catch(xe){}}}}clearInstance(G=ue){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,g.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...H.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ue){return this.instances.has(G)}getOptions(G=ue){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,ne=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ne,options:H});for(const[xe,Pe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(xe)&&Pe.resolve(Ge);return Ge}onInit(G,H){var ne;const Ge=this.normalizeInstanceIdentifier(H),xe=null!==(ne=this.onInitCallbacks.get(Ge))&&void 0!==ne?ne:new Set;xe.add(G),this.onInitCallbacks.set(Ge,xe);const Pe=this.instances.get(Ge);return Pe&&G(Pe,Ge),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,H){const ne=this.onInitCallbacks.get(H);if(ne)for(const Ge of ne)try{Ge(G,H)}catch(xe){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let ne=this.instances.get(G);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(de=G,de===ue?void 0:de),options:H}),this.instances.set(G,ne),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(ne,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,ne)}catch(Ge){}var de;return ne||null}normalizeInstanceIdentifier(G=ue){return this.component?this.component.multipleInstances?G:ue:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new re(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(Ye,ve,k)=>{k.d(ve,{Am:()=>de,Ub:()=>oe,Yd:()=>le,in:()=>ee});const g=[];var ee=(()=>{return(G=ee||(ee={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",ee;var G})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ue=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ge=(G,H,...ne)=>{if(H<G.logLevel)return;const Ge=(new Date).toISOString(),xe=re[H];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[xe](`[${Ge}]  ${G.name}:`,...ne)};class le{constructor(H){this.name=H,this._logLevel=ue,this._logHandler=ge,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in ee))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?F[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...H),this._logHandler(this,ee.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...H),this._logHandler(this,ee.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...H),this._logHandler(this,ee.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...H),this._logHandler(this,ee.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...H),this._logHandler(this,ee.ERROR,...H)}}function oe(G){g.forEach(H=>{H.setLogLevel(G)})}function de(G,H){for(const ne of g){let Ge=null;H&&H.level&&(Ge=F[H.level]),ne.userLogHandler=null===G?null:(xe,Pe,...Ve)=>{const fe=Ve.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(We){return null}}).filter(Ie=>Ie).join(" ");Pe>=(null!=Ge?Ge:xe.logLevel)&&G({level:ee[Pe].toLowerCase(),message:fe,args:Ve,type:xe.name})}}}},8766:(Ye,ve,k)=>{k.d(ve,{Lj:()=>Te,X3:()=>Ze});var g=k(5861);let F,ue;const le=new WeakMap,oe=new WeakMap,de=new WeakMap,G=new WeakMap,H=new WeakMap;let xe={get($,Ee,Z){if($ instanceof IDBTransaction){if("done"===Ee)return oe.get($);if("objectStoreNames"===Ee)return $.objectStoreNames||de.get($);if("store"===Ee)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Ie($[Ee])},set:($,Ee,Z)=>($[Ee]=Z,!0),has:($,Ee)=>$ instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in $};function fe($){return"function"==typeof $?function Ve($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...Ee){return $.apply(We(this),Ee),Ie(le.get(this))}:function(...Ee){return Ie($.apply(We(this),Ee))}:function(Ee,...Z){const ie=$.call(We(this),Ee,...Z);return de.set(ie,Ee.sort?Ee.sort():[Ee]),Ie(ie)}}($):($ instanceof IDBTransaction&&function Ge($){if(oe.has($))return;const Ee=new Promise((Z,ie)=>{const te=()=>{$.removeEventListener("complete",me),$.removeEventListener("error",ae),$.removeEventListener("abort",ae)},me=()=>{Z(),te()},ae=()=>{ie($.error||new DOMException("AbortError","AbortError")),te()};$.addEventListener("complete",me),$.addEventListener("error",ae),$.addEventListener("abort",ae)});oe.set($,Ee)}($),(($,Ee)=>Ee.some(Z=>$ instanceof Z))($,function re(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,xe):$)}function Ie($){if($ instanceof IDBRequest)return function ne($){const Ee=new Promise((Z,ie)=>{const te=()=>{$.removeEventListener("success",me),$.removeEventListener("error",ae)},me=()=>{Z(Ie($.result)),te()},ae=()=>{ie($.error),te()};$.addEventListener("success",me),$.addEventListener("error",ae)});return Ee.then(Z=>{Z instanceof IDBCursor&&le.set(Z,$)}).catch(()=>{}),H.set(Ee,$),Ee}($);if(G.has($))return G.get($);const Ee=fe($);return Ee!==$&&(G.set($,Ee),H.set(Ee,$)),Ee}const We=$=>H.get($);function Ze($,Ee,{blocked:Z,upgrade:ie,blocking:te,terminated:me}={}){const ae=indexedDB.open($,Ee),Oe=Ie(ae);return ie&&ae.addEventListener("upgradeneeded",ut=>{ie(Ie(ae.result),ut.oldVersion,ut.newVersion,Ie(ae.transaction))}),Z&&ae.addEventListener("blocked",()=>Z()),Oe.then(ut=>{me&&ut.addEventListener("close",()=>me()),te&&ut.addEventListener("versionchange",()=>te())}).catch(()=>{}),Oe}function Te($,{blocked:Ee}={}){const Z=indexedDB.deleteDatabase($);return Ee&&Z.addEventListener("blocked",()=>Ee()),Ie(Z).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ue=new Map;function Be($,Ee){if(!($ instanceof IDBDatabase)||Ee in $||"string"!=typeof Ee)return;if(Ue.get(Ee))return Ue.get(Ee);const Z=Ee.replace(/FromIndex$/,""),ie=Ee!==Z,te=Ce.includes(Z);if(!(Z in(ie?IDBIndex:IDBObjectStore).prototype)||!te&&!we.includes(Z))return;const me=function(){var ae=(0,g.Z)(function*(Oe,...ut){const Bt=this.transaction(Oe,te?"readwrite":"readonly");let Pt=Bt.store;return ie&&(Pt=Pt.index(ut.shift())),(yield Promise.all([Pt[Z](...ut),te&&Bt.done]))[0]});return function(ut){return ae.apply(this,arguments)}}();return Ue.set(Ee,me),me}!function Pe($){xe=$(xe)}($=>Fk(kk({},$),{get:(Ee,Z,ie)=>Be(Ee,Z)||$.get(Ee,Z,ie),has:(Ee,Z)=>!!Be(Ee,Z)||$.has(Ee,Z)}))},5861:(Ye,ve,k)=>{function g(F,ue,re,ge,le,oe,de){try{var G=F[oe](de),H=G.value}catch(ne){return void re(ne)}G.done?ue(H):Promise.resolve(H).then(ge,le)}function ee(F){return function(){var ue=this,re=arguments;return new Promise(function(ge,le){var oe=F.apply(ue,re);function de(H){g(oe,ge,le,de,G,"next",H)}function G(H){g(oe,ge,le,de,G,"throw",H)}de(void 0)})}}k.d(ve,{Z:()=>ee})}},Ye=>{Ye(Ye.s=6042)}]);